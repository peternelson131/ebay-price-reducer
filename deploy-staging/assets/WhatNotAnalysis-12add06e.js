import{c as E,u as P,j as e,X as xe,S as pe}from"./index-0231291c.js";import{r as i}from"./vendor-react-4c62d1cf.js";import{u as ue}from"./vendor-forms-45c7a11a.js";import{r as ge,u as fe}from"./vendor-utils-04f2268f.js";import{L,C as ye}from"./loader-43bf0082.js";import{D as je}from"./download-ea89d811.js";import{C as G}from"./circle-alert-a9c91508.js";import{P as be}from"./package-c13beea5.js";import{F as B}from"./file-spreadsheet-291256bd.js";import{U as D}from"./upload-c26ca2b0.js";import{F as Ne}from"./funnel-9484537d.js";import{R as ve}from"./refresh-cw-6c475bbf.js";import{C as we}from"./chevron-down-7e76eefa.js";import{C as ke}from"./chevron-right-269a41e8.js";import{E as Se}from"./external-link-a2bb9e65.js";import"./vendor-supabase-5edd3635.js";import"./vendor-query-4b12add6.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ie=E("chart-column",Ce);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Re=E("dollar-sign",_e);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Y=E("sparkles",Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fe=E("trending-up",$e),Le=(n,R)=>!R||n==null?{bg:"",text:"text-theme-secondary"}:n<5e4?{bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-600 dark:text-green-400"}:n<2e5?{bg:"bg-yellow-50 dark:bg-yellow-900/20",text:"text-yellow-600 dark:text-yellow-400"}:{bg:"",text:"text-theme-secondary"},k=n=>n==null||isNaN(n)?"—":`$${n.toFixed(2)}`,T=n=>n==null||isNaN(n)?"—":n.toLocaleString();function Ge(){const[n,R]=i.useState([]),[A,z]=i.useState(!1),[U,O]=i.useState(!1),[h,N]=i.useState(null),[ee,te]=i.useState(new Set),[o,S]=i.useState(null),[Q,f]=i.useState(null),[V,q]=i.useState(!1),[H,W]=i.useState(!1),[$,se]=i.useState("sales_rank"),[J,K]=i.useState("asc"),[C,re]=i.useState("all"),[M,ae]=i.useState(""),X=[...new Set(n.map(t=>t.lot_id).filter(Boolean))],I=i.useCallback(async()=>{z(!0);try{const t=await P.getAuthToken(),r=await(await fetch("/.netlify/functions/whatnot-analysis?action=list&limit=500",{headers:{Authorization:`Bearer ${t}`}})).json();r.success&&r.items&&R(r.items.map(a=>({...a,enriched:a.status==="enriched",roi:a.roi_percent,profit:a.estimated_profit})))}catch(t){console.error("Failed to fetch items:",t)}finally{z(!1)}},[]);i.useEffect(()=>{I()},[I]);const ne=(t,s)=>{const r=w=>{const _=s.map(p=>(p||"").toString().toLowerCase().trim());for(const p of w){const u=_.findIndex(g=>g.includes(p));if(u!==-1)return u}return-1},a=r(["asin"]),d=r(["item description","description","title","name"]),x=r(["qty","quantity"]),v=r(["unit retail","retail","price","msrp"]),l=r(["brand"]),m=r(["condition"]),b=r(["lot id","lot","lotid"]);return{asin:a!==-1?(t[a]||"").toString().trim().toUpperCase():null,title:d!==-1?(t[d]||"").toString().trim():null,quantity:x!==-1&&parseInt(t[x])||1,manifest_price:v!==-1&&parseFloat(t[v])||0,brand:l!==-1?(t[l]||"").toString().trim():null,condition:m!==-1?(t[m]||"").toString().trim():null,lot_id:b!==-1?(t[b]||"").toString().trim():null}},le=i.useCallback(t=>{const s=t[0];if(!s)return;f(null),S(null);const r=new FileReader;r.onload=a=>{try{const d=new Uint8Array(a.target.result),x=ge(d,{type:"array"}),v=x.SheetNames[0],l=x.Sheets[v],m=fe.sheet_to_json(l,{header:1});if(m.length<2){f("File appears to be empty or has no data rows");return}const b=m[0],w=[],_=[];for(let p=1;p<m.length;p++){const u=m[p];if(!u||u.length===0)continue;const g=ne(u,b);g.asin&&/^B[0-9A-Z]{9}$/.test(g.asin)?w.push({...g,rowNum:p+1}):(g.title||g.asin)&&_.push({rowNum:p+1,asin:g.asin,title:g.title})}if(w.length===0){f(`No valid ASINs found. ${_.length} rows had invalid or missing ASINs.`);return}S({fileName:s.name,totalRows:m.length-1,validItems:w,invalidRows:_,totalManifestCost:w.reduce((p,u)=>p+u.manifest_price*u.quantity,0)}),q(!0)}catch(d){console.error("Parse error:",d),f("Failed to parse file. Please ensure it's a valid Excel or CSV file.")}},r.readAsArrayBuffer(s)},[]),{getRootProps:ie,getInputProps:oe,isDragActive:F}=ue({onDrop:le,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"text/csv":[".csv"]},maxFiles:1}),ce=async()=>{var t;if((t=o==null?void 0:o.validItems)!=null&&t.length){W(!0);try{const s=await P.getAuthToken(),a=await(await fetch("/.netlify/functions/whatnot-analysis",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:"import",items:o.validItems})})).json();a.success?(await I(),q(!1),S(null)):f(a.error||"Import failed")}catch(s){console.error("Import error:",s),f("Failed to import items. Please try again.")}finally{W(!1)}}},de=async()=>{if(n.length!==0){O(!0),N({current:0,total:n.length,message:"Starting enrichment..."});try{const t=await P.getAuthToken(),s=[...new Set(n.filter(d=>d.asin&&!d.enriched).map(d=>d.asin))];N({current:0,total:s.length,message:`Fetching data for ${s.length} ASINs...`});const a=await(await fetch("/.netlify/functions/whatnot-analysis",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:"enrich",asins:s})})).json();a.success?(await I(),N({current:a.enriched||0,total:s.length,message:`Enriched ${a.enriched||0} items!${a.errors?` (${a.errors} not found)`:""}${a.remaining?` ${a.remaining} remaining.`:""}`,complete:!0})):N({message:a.error||"Enrichment failed",error:!0})}catch(t){console.error("Enrich error:",t),N({message:"Failed to enrich items",error:!0})}finally{O(!1),setTimeout(()=>N(null),3e3)}}},me=()=>{if(n.length===0)return;const t=["ASIN","Title","Qty","Manifest Price","Amazon Price","Sales Rank","90-Day Avg Rank","FBA Sellers","FBM Sellers","Category","Brand","Condition","Lot ID"],s=n.map(l=>{var m,b;return[l.asin,l.title||"",l.quantity,((m=l.manifest_price)==null?void 0:m.toFixed(2))||"",((b=l.amazon_price)==null?void 0:b.toFixed(2))||"",l.sales_rank||"",l.sales_rank_90_avg||"",l.fba_sellers??"",l.fbm_sellers??"",l.category||"",l.brand||"",l.condition||"",l.lot_id||""]}),r=[t,...s].map(l=>l.map(m=>`"${m}"`).join(",")).join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(a),x=document.createElement("a"),v=new Date().toISOString().split("T")[0];x.href=d,x.download=`whatnot-analysis-${v}.csv`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(d)},he=t=>{te(s=>{const r=new Set(s);return r.has(t)?r.delete(t):r.add(t),r})},Z=[...n].sort((t,s)=>{let r=t[$],a=s[$];return r==null&&a==null?0:r==null?1:a==null?-1:(typeof r=="string"&&(r=r.toLowerCase(),a=a.toLowerCase()),J==="asc"?r<a?-1:r>a?1:0:r>a?-1:r<a?1:0)}).filter(t=>{if(C!=="all"&&t.lot_id!==C)return!1;if(M){const s=M.toLowerCase();return t.asin&&t.asin.toLowerCase().includes(s)||t.title&&t.title.toLowerCase().includes(s)||t.brand&&t.brand.toLowerCase().includes(s)}return!0}),c={totalItems:n.length,totalQuantity:n.reduce((t,s)=>t+(s.quantity||1),0),totalManifestCost:n.reduce((t,s)=>t+(s.manifest_price||0)*(s.quantity||1),0),enrichedCount:n.filter(t=>t.enriched).length,avgRank:(()=>{const t=n.filter(s=>s.enriched&&s.sales_rank!=null);return t.length===0?null:Math.round(t.reduce((s,r)=>s+r.sales_rank,0)/t.length)})()},y=t=>{$===t?K(s=>s==="asc"?"desc":"asc"):(se(t),K("desc"))},j=({column:t})=>$!==t?null:e.jsx("span",{className:"ml-1",children:J==="asc"?"↑":"↓"});return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-theme-primary flex items-center gap-3",children:[e.jsx(Fe,{className:"w-7 h-7 text-purple-500"}),"WhatNot Lot Analysis"]}),e.jsx("p",{className:"text-theme-secondary mt-1",children:"Import manifests, enrich with Keepa, assess demand"})]}),e.jsx("div",{className:"flex items-center gap-2",children:n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:de,disabled:U||n.filter(t=>!t.enriched).length===0,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white font-medium rounded-lg transition-colors",children:[U?e.jsx(L,{className:"w-4 h-4 animate-spin"}):e.jsx(Y,{className:"w-4 h-4"}),"Enrich with Keepa"]}),e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-theme-hover hover:bg-theme-primary text-theme-secondary hover:text-theme-primary font-medium rounded-lg transition-colors",children:[e.jsx(je,{className:"w-4 h-4"}),"Export CSV"]})]})})]}),h&&e.jsxs("div",{className:`mb-4 p-4 rounded-lg flex items-center gap-3 ${h.error?"bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400":h.complete?"bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"}`,children:[!h.complete&&!h.error&&e.jsx(L,{className:"w-5 h-5 animate-spin"}),h.complete&&e.jsx(ye,{className:"w-5 h-5"}),h.error&&e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:h.message}),h.total>0&&!h.complete&&e.jsxs("span",{className:"ml-auto text-sm",children:[h.current," / ",h.total]})]}),n.length>0&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-theme-surface rounded-xl p-4 border border-theme",children:[e.jsxs("div",{className:"flex items-center gap-2 text-theme-secondary text-sm mb-1",children:[e.jsx(be,{className:"w-4 h-4"}),"Total Items"]}),e.jsx("div",{className:"text-2xl font-bold text-theme-primary",children:c.totalQuantity}),e.jsxs("div",{className:"text-xs text-theme-tertiary",children:[c.totalItems," unique"]})]}),e.jsxs("div",{className:"bg-theme-surface rounded-xl p-4 border border-theme",children:[e.jsxs("div",{className:"flex items-center gap-2 text-theme-secondary text-sm mb-1",children:[e.jsx(Re,{className:"w-4 h-4"}),"Manifest Cost"]}),e.jsx("div",{className:"text-2xl font-bold text-theme-primary",children:k(c.totalManifestCost)})]}),e.jsxs("div",{className:"bg-theme-surface rounded-xl p-4 border border-theme",children:[e.jsxs("div",{className:"flex items-center gap-2 text-theme-secondary text-sm mb-1",children:[e.jsx(Y,{className:"w-4 h-4"}),"Enriched"]}),e.jsx("div",{className:"text-2xl font-bold text-theme-primary",children:c.enrichedCount}),e.jsxs("div",{className:"text-xs text-theme-tertiary",children:["of ",c.totalItems]})]}),e.jsxs("div",{className:`rounded-xl p-4 border ${c.avgRank!=null&&c.avgRank<5e4?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":c.avgRank!=null&&c.avgRank<2e5?"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800":"bg-theme-surface border-theme"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-theme-secondary text-sm mb-1",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Avg Rank"]}),e.jsx("div",{className:`text-2xl font-bold ${c.avgRank!=null&&c.avgRank<5e4?"text-green-600 dark:text-green-400":c.avgRank!=null&&c.avgRank<2e5?"text-yellow-600 dark:text-yellow-400":"text-theme-primary"}`,children:c.avgRank!=null?T(c.avgRank):"—"})]})]}),A&&n.length===0&&e.jsxs("div",{className:"bg-theme-surface rounded-xl border border-theme p-8 flex flex-col items-center justify-center",children:[e.jsx(L,{className:"w-8 h-8 text-purple-500 animate-spin mb-4"}),e.jsx("p",{className:"text-theme-secondary",children:"Loading items..."})]}),n.length===0&&!V&&!A&&e.jsxs("div",{className:"bg-theme-surface rounded-xl border border-theme p-8",children:[e.jsxs("div",{...ie(),className:`
              border-2 border-dashed rounded-xl p-12 text-center cursor-pointer
              transition-all duration-200
              ${F?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 scale-[1.02]":"border-theme hover:border-purple-500/50 hover:bg-theme-hover"}
            `,children:[e.jsx("input",{...oe()}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`
                w-20 h-20 rounded-full flex items-center justify-center mb-4
                ${F?"bg-purple-500/20":"bg-theme-primary"}
              `,children:F?e.jsx(B,{className:"w-10 h-10 text-purple-500"}):e.jsx(D,{className:"w-10 h-10 text-theme-tertiary"})}),e.jsx("p",{className:"text-lg text-theme-primary font-medium mb-2",children:F?"Drop your manifest here":"Drop WhatNot manifest here"}),e.jsx("p",{className:"text-sm text-theme-secondary",children:"or click to browse • Supports .xlsx, .xls, .csv"}),e.jsxs("div",{className:"mt-6 p-4 bg-theme-primary rounded-lg text-left max-w-md",children:[e.jsx("p",{className:"text-sm text-theme-secondary mb-2",children:e.jsx("strong",{className:"text-theme-primary",children:"Expected columns:"})}),e.jsxs("ul",{className:"text-sm text-theme-tertiary space-y-1",children:[e.jsx("li",{children:"• ASIN (required)"}),e.jsx("li",{children:"• Item Description / Title"}),e.jsx("li",{children:"• Qty / Quantity"}),e.jsx("li",{children:"• Unit Retail / Price"}),e.jsx("li",{children:"• Brand, Condition, Lot ID (optional)"})]})]})]})]}),Q&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-600 dark:text-red-400 text-sm",children:[e.jsx(G,{className:"w-4 h-4 flex-shrink-0"}),Q]})]}),V&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-theme-surface rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme",children:[e.jsxs("h2",{className:"text-lg font-semibold text-theme-primary flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-purple-500"}),"Import Preview"]}),e.jsx("button",{onClick:()=>{q(!1),S(null)},className:"p-1 rounded-lg text-theme-tertiary hover:text-theme-primary hover:bg-theme-hover transition-colors",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"bg-theme-primary rounded-lg p-4 mb-4",children:[e.jsxs("h3",{className:"font-medium text-theme-primary mb-3 flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-purple-500"}),o.fileName]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-theme-secondary",children:"Total rows:"}),e.jsx("div",{className:"text-theme-primary",children:o.totalRows}),e.jsx("div",{className:"text-theme-secondary",children:"Valid items:"}),e.jsx("div",{className:"text-green-600 font-medium",children:o.validItems.length}),o.invalidRows.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-theme-secondary",children:"Invalid rows:"}),e.jsx("div",{className:"text-yellow-600",children:o.invalidRows.length})]}),e.jsx("div",{className:"text-theme-secondary",children:"Total manifest cost:"}),e.jsx("div",{className:"text-theme-primary font-medium",children:k(o.totalManifestCost)})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-theme-secondary mb-2",children:"Sample items to import:"}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-auto",children:[o.validItems.slice(0,5).map((t,s)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-theme-primary rounded text-sm",children:[e.jsx("span",{className:"font-mono text-purple-500",children:t.asin}),e.jsx("span",{className:"text-theme-secondary truncate flex-1",children:t.title||"No title"}),e.jsxs("span",{className:"text-theme-tertiary",children:["×",t.quantity]}),e.jsx("span",{className:"text-green-600",children:k(t.manifest_price)})]},s)),o.validItems.length>5&&e.jsxs("p",{className:"text-xs text-theme-tertiary text-center",children:["+",o.validItems.length-5," more items"]})]})]}),e.jsx("button",{onClick:ce,disabled:H,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4"}),"Import ",o.validItems.length," Items"]})})]})]})}),n.length>0&&e.jsxs("div",{className:"bg-theme-surface rounded-xl border border-theme overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-theme flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-theme-tertiary"}),e.jsx("input",{type:"text",placeholder:"Search ASIN, title, or brand...",value:M,onChange:t=>ae(t.target.value),className:"w-full pl-9 pr-4 py-2 bg-theme-primary border border-theme rounded-lg text-theme-primary placeholder:text-theme-tertiary focus:outline-none focus:ring-2 focus:ring-purple-500/50"})]}),X.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-4 h-4 text-theme-tertiary"}),e.jsxs("select",{value:C,onChange:t=>re(t.target.value),className:"px-3 py-2 bg-theme-primary border border-theme rounded-lg text-theme-primary focus:outline-none focus:ring-2 focus:ring-purple-500/50",children:[e.jsx("option",{value:"all",children:"All Lots"}),X.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx("button",{onClick:I,disabled:A,className:"flex items-center gap-2 px-4 py-2 bg-theme-hover hover:bg-theme-primary text-theme-secondary hover:text-theme-primary disabled:opacity-50 font-medium rounded-lg transition-colors",title:"Refresh items from database",children:e.jsx(ve,{className:`w-4 h-4 ${A?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>{R([]),S(null),f(null)},className:"flex items-center gap-2 px-4 py-2 bg-theme-hover hover:bg-theme-primary text-theme-secondary hover:text-theme-primary font-medium rounded-lg transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"New Import"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-theme-primary text-theme-secondary text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-10 px-4 py-3"}),e.jsxs("th",{className:"px-4 py-3 text-left cursor-pointer hover:text-theme-primary",onClick:()=>y("asin"),children:["ASIN ",e.jsx(j,{column:"asin"})]}),e.jsxs("th",{className:"px-4 py-3 text-left cursor-pointer hover:text-theme-primary",onClick:()=>y("title"),children:["Title ",e.jsx(j,{column:"title"})]}),e.jsxs("th",{className:"px-4 py-3 text-center cursor-pointer hover:text-theme-primary",onClick:()=>y("quantity"),children:["Qty ",e.jsx(j,{column:"quantity"})]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:text-theme-primary",onClick:()=>y("manifest_price"),children:["Manifest ",e.jsx(j,{column:"manifest_price"})]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:text-theme-primary",onClick:()=>y("amazon_price"),children:["Amazon ",e.jsx(j,{column:"amazon_price"})]}),e.jsxs("th",{className:"px-4 py-3 text-right cursor-pointer hover:text-theme-primary",onClick:()=>y("sales_rank"),children:["Rank ",e.jsx(j,{column:"sales_rank"})]}),e.jsxs("th",{className:"px-4 py-3 text-left cursor-pointer hover:text-theme-primary",onClick:()=>y("category"),children:["Category ",e.jsx(j,{column:"category"})]})]})}),e.jsx("tbody",{className:"divide-y divide-theme",children:Z.map(t=>{const s=Le(t.sales_rank,t.enriched),r=ee.has(t.id);return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:`${s.bg} hover:bg-theme-hover/50 transition-colors`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>he(t.id),className:"p-1 rounded text-theme-tertiary hover:text-theme-primary",children:r?e.jsx(we,{className:"w-4 h-4"}):e.jsx(ke,{className:"w-4 h-4"})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`https://www.amazon.com/dp/${t.asin}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-sm text-purple-600 dark:text-purple-400 hover:underline flex items-center gap-1",children:[t.asin,e.jsx(Se,{className:"w-3 h-3"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.image_url&&e.jsx("img",{src:t.image_url,alt:"",className:"w-8 h-8 object-contain bg-white rounded"}),e.jsx("span",{className:"text-sm text-theme-primary truncate max-w-[200px]",children:t.title||"—"})]})}),e.jsx("td",{className:"px-4 py-3 text-center text-sm text-theme-primary",children:t.quantity}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-theme-primary",children:k(t.manifest_price)}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-theme-primary",children:t.enriched?k(t.amazon_price):"—"}),e.jsx("td",{className:`px-4 py-3 text-right text-sm font-medium ${s.text}`,children:t.enriched?T(t.sales_rank):"—"}),e.jsx("td",{className:"px-4 py-3 text-left text-sm text-theme-secondary truncate max-w-[150px]",children:t.enriched&&t.category||"—"})]},t.id),r&&e.jsx("tr",{className:"bg-theme-primary/50",children:e.jsx("td",{colSpan:"7",className:"px-4 py-4",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"Brand:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.brand||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"Condition:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.condition||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"Lot ID:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.lot_id||"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"Total Cost:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:k((t.manifest_price||0)*(t.quantity||1))})]}),t.enriched&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"FBA Sellers:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.fba_sellers??"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"FBM Sellers:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.fbm_sellers??"—"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-theme-tertiary",children:"90-Day Avg Rank:"}),e.jsx("span",{className:"ml-2 text-theme-primary",children:t.sales_rank_90_avg?T(t.sales_rank_90_avg):"—"})]})]})]})})},`${t.id}-expanded`)]})})})]})}),e.jsxs("div",{className:"px-4 py-3 border-t border-theme text-sm text-theme-secondary",children:["Showing ",Z.length," of ",n.length," items",C!=="all"&&` (filtered by lot: ${C})`]})]})]})}export{Ge as default};
//# sourceMappingURL=WhatNotAnalysis-12add06e.js.map
