import{d as E,j as e}from"./index-0231291c.js";import{r as n}from"./vendor-react-4c62d1cf.js";import{a as p}from"./api-0ba7f9da.js";import"./vendor-supabase-5edd3635.js";import"./vendor-query-4b12add6.js";function O(){E();const[h,m]=n.useState(!0),[y,b]=n.useState(!1),[g,d]=n.useState(null),[a,u]=n.useState({}),[o,P]=n.useState({fulfillment:[],payment:[],return:[]}),[i,c]=n.useState({addressLine1:"",city:"",stateOrProvince:"",postalCode:"",country:"US"}),[v,j]=n.useState(""),[N,S]=n.useState(!1),[l,s]=n.useState({});n.useEffect(()=>{C()},[]);const C=async()=>{var t,x,f;try{m(!0),d(null);const r=await p.get("/listing-settings");u(r.currentSettings||{}),P(r.availablePolicies||{}),S(r.ebayConnected||!1),(x=(t=r.currentSettings)==null?void 0:t.defaultLocation)!=null&&x.address&&c(r.currentSettings.defaultLocation.address),(f=r.currentSettings)!=null&&f.skuPrefix&&j(r.currentSettings.skuPrefix)}catch(r){console.error("Error fetching settings:",r),d("Unable to load settings. Please try again.")}finally{m(!1)}},I=async()=>{try{b(!0),d(null),s({});const t={defaultFulfillmentPolicyId:a.defaultFulfillmentPolicyId,defaultPaymentPolicyId:a.defaultPaymentPolicyId,defaultReturnPolicyId:a.defaultReturnPolicyId,defaultCondition:a.defaultCondition||"NEW_OTHER",skuPrefix:v||"",defaultLocation:{address:i}};await p.put("/listing-settings",t),alert("Settings saved successfully!")}catch(t){console.error("Error saving settings:",t),t.validationErrors?(s(t.validationErrors),d("Please fix the validation errors below.")):d("Failed to save settings. Please try again.")}finally{b(!1)}},L=async()=>{try{m(!0),d(null);const t=await p.get("/listing-settings/validate");if(t.valid)alert("All settings are valid!");else{const x=Object.entries(t.errors).map(([f,r])=>`- ${f}: ${r}`).join(`
`);d(`Validation failed:
${x}`)}}catch(t){console.error("Error validating settings:",t),d("Failed to validate settings. Please try again.")}finally{m(!1)}};return h?e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-theme-secondary",children:"Loading settings..."})]})})}):e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Listing Creation Settings"}),!N&&e.jsx("div",{className:"mb-6 bg-accent/10 border border-accent/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm text-accent",children:"You can configure your listing settings manually. Connect your eBay account to see available policies for reference."}),e.jsx("a",{href:"/account?tab=integrations",className:"text-sm text-accent underline mt-2 inline-block",children:"Go to Account → Integrations to connect eBay"})]})]})}),g&&e.jsx("div",{className:"mb-6 bg-error/10 border border-error/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-red-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-error",children:g})})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Payment Policy ID"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultPaymentPolicyId?"border-red-500":""}`,value:a.defaultPaymentPolicyId||"",onChange:t=>{u({...a,defaultPaymentPolicyId:t.target.value}),s({...l,defaultPaymentPolicyId:void 0})},placeholder:"e.g., 123456789012"}),l.defaultPaymentPolicyId&&e.jsx("p",{className:"text-sm text-error mt-1",children:l.defaultPaymentPolicyId}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-1",children:"Find your policy IDs in eBay Seller Hub → Business Policies → Payment Policies"}),o.payment.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-accent cursor-pointer",children:"Available policies"}),e.jsx("ul",{className:"text-xs text-theme-secondary mt-1 ml-4 list-disc",children:o.payment.map(t=>e.jsxs("li",{children:[t.name,": ",e.jsx("code",{className:"bg-theme-hover px-1 rounded",children:t.paymentPolicyId})]},t.paymentPolicyId))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Shipping Policy ID"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultFulfillmentPolicyId?"border-red-500":""}`,value:a.defaultFulfillmentPolicyId||"",onChange:t=>{u({...a,defaultFulfillmentPolicyId:t.target.value}),s({...l,defaultFulfillmentPolicyId:void 0})},placeholder:"e.g., 123456789012"}),l.defaultFulfillmentPolicyId&&e.jsx("p",{className:"text-sm text-error mt-1",children:l.defaultFulfillmentPolicyId}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-1",children:"Find your policy IDs in eBay Seller Hub → Business Policies → Shipping Policies"}),o.fulfillment.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-accent cursor-pointer",children:"Available policies"}),e.jsx("ul",{className:"text-xs text-theme-secondary mt-1 ml-4 list-disc",children:o.fulfillment.map(t=>e.jsxs("li",{children:[t.name,": ",e.jsx("code",{className:"bg-theme-hover px-1 rounded",children:t.fulfillmentPolicyId})]},t.fulfillmentPolicyId))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Return Policy ID"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultReturnPolicyId?"border-red-500":""}`,value:a.defaultReturnPolicyId||"",onChange:t=>{u({...a,defaultReturnPolicyId:t.target.value}),s({...l,defaultReturnPolicyId:void 0})},placeholder:"e.g., 123456789012"}),l.defaultReturnPolicyId&&e.jsx("p",{className:"text-sm text-error mt-1",children:l.defaultReturnPolicyId}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-1",children:"Find your policy IDs in eBay Seller Hub → Business Policies → Return Policies"}),o.return.length>0&&e.jsxs("details",{className:"mt-2",children:[e.jsx("summary",{className:"text-xs text-accent cursor-pointer",children:"Available policies"}),e.jsx("ul",{className:"text-xs text-theme-secondary mt-1 ml-4 list-disc",children:o.return.map(t=>e.jsxs("li",{children:[t.name,": ",e.jsx("code",{className:"bg-theme-hover px-1 rounded",children:t.returnPolicyId})]},t.returnPolicyId))})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Condition"}),e.jsxs("select",{className:`w-full border rounded px-3 py-2 ${l.defaultCondition?"border-red-500":""}`,value:a.defaultCondition||"NEW_OTHER",onChange:t=>{u({...a,defaultCondition:t.target.value}),s({...l,defaultCondition:void 0})},children:[e.jsx("option",{value:"NEW_OTHER",children:"New Open Box"}),e.jsx("option",{value:"NEW",children:"New"}),e.jsx("option",{value:"LIKE_NEW",children:"Like New"}),e.jsx("option",{value:"USED_EXCELLENT",children:"Used - Excellent"}),e.jsx("option",{value:"USED_VERY_GOOD",children:"Used - Very Good"}),e.jsx("option",{value:"USED_GOOD",children:"Used - Good"})]}),l.defaultCondition&&e.jsx("p",{className:"text-sm text-error mt-1",children:l.defaultCondition})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"SKU Prefix (Optional)"}),e.jsx("input",{type:"text",value:v,onChange:t=>{j(t.target.value.toUpperCase()),s({...l,skuPrefix:void 0})},placeholder:"PETE-",maxLength:20,className:`w-full max-w-xs border rounded px-3 py-2 ${l.skuPrefix?"border-red-500":""}`}),l.skuPrefix&&e.jsx("p",{className:"text-sm text-error mt-1",children:l.skuPrefix}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-1",children:'This prefix will appear at the beginning of all auto-generated SKUs. Example: "PETE-a7b3c4d5-3f2a1b4c"'}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-1",children:'Leave blank to use default "SKU-" prefix.'})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Default Shipping Location"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address Line 1"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultLocation?"border-red-500":""}`,value:i.addressLine1,onChange:t=>{c({...i,addressLine1:t.target.value}),s({...l,defaultLocation:void 0})},placeholder:"123 Main St"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultLocation?"border-red-500":""}`,value:i.city,onChange:t=>{c({...i,city:t.target.value}),s({...l,defaultLocation:void 0})},placeholder:"San Francisco"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"State"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultLocation?"border-red-500":""}`,value:i.stateOrProvince,onChange:t=>{c({...i,stateOrProvince:t.target.value}),s({...l,defaultLocation:void 0})},placeholder:"CA"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultLocation?"border-red-500":""}`,value:i.postalCode,onChange:t=>{c({...i,postalCode:t.target.value}),s({...l,defaultLocation:void 0})},placeholder:"94105"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),e.jsx("input",{type:"text",className:`w-full border rounded px-3 py-2 ${l.defaultLocation?"border-red-500":""}`,value:i.country,onChange:t=>{c({...i,country:t.target.value}),s({...l,defaultLocation:void 0})},placeholder:"US",maxLength:"2"})]})]}),l.defaultLocation&&e.jsx("p",{className:"text-sm text-error mt-2",children:l.defaultLocation})]}),e.jsxs("div",{className:"flex gap-3",children:[N&&e.jsx("button",{onClick:L,disabled:h,className:"bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700 disabled:bg-gray-400",children:h?"Checking...":"Validate Settings"}),e.jsx("button",{onClick:I,disabled:y,className:"bg-accent text-white px-6 py-2 rounded hover:bg-accent-hover disabled:bg-gray-400",children:y?"Saving...":"Save Settings"})]})]})}export{O as default};
//# sourceMappingURL=ListingSettings-d02ca192.js.map
