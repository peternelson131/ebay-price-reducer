import{j as e,s as we,l as ke}from"./index-0231291c.js";import{r as u}from"./vendor-react-4c62d1cf.js";import{u as Ee}from"./vendor-forms-45c7a11a.js";import{r as Ce,u as Pe}from"./vendor-utils-04f2268f.js";import{c as Ie}from"./vendor-query-4b12add6.js";import"./vendor-supabase-5edd3635.js";function Te(){const[P,I]=u.useState([]),[A,_]=u.useState([]),[j,U]=u.useState(new Set),[O,W]=u.useState(!1),[N,$]=u.useState(null),[y,x]=u.useState(1),[D,K]=u.useState(null),[T,te]=u.useState(""),[z,E]=u.useState(!1),[v,re]=u.useState(""),[H,F]=u.useState(!1),[ae,q]=u.useState({}),[V,Q]=u.useState({}),[le,Y]=u.useState({}),[ne,J]=u.useState({}),[S,X]=u.useState(null),ie=[{value:"NEW",label:"Brand New"},{value:"NEW_OTHER",label:"New - Open Box"},{value:"NEW_WITH_DEFECTS",label:"New with Defects"},{value:"MANUFACTURER_REFURBISHED",label:"Manufacturer Refurbished"},{value:"CERTIFIED_REFURBISHED",label:"Certified Refurbished"},{value:"SELLER_REFURBISHED",label:"Seller Refurbished"},{value:"USED_EXCELLENT",label:"Used - Excellent"},{value:"USED_VERY_GOOD",label:"Used - Very Good"},{value:"USED_GOOD",label:"Used - Good"},{value:"USED_ACCEPTABLE",label:"Used - Acceptable"},{value:"FOR_PARTS_OR_NOT_WORKING",label:"For Parts or Not Working"}],h=(s,t)=>{K({type:s,message:t}),setTimeout(()=>K(null),5e3)},oe=async()=>{E(!0);try{const s=T.split(`
`).map(r=>r.trim()).filter(r=>r&&r.length===10);if(s.length===0){h("error","Please enter at least one valid ASIN"),E(!1);return}h("info",`Processing ${s.length} ASINs...`);const{data:{session:t}}=await we.auth.getSession();if(!t){h("error","Please log in to use this feature"),E(!1);return}const i=s.map(async(r,b)=>{var c,l,p,o,g,w,k,se;try{const C=await fetch("/.netlify/functions/keepa-fetch-product",{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({asin:r})});if(!C.ok)throw new Error(`Failed to fetch data for ASIN ${r}`);const R=await C.json();if(!R.success)throw new Error(R.message||`No data found for ASIN ${r}`);const f=R.keepaData,m=R.ebayDraft;console.log("ðŸ” KEEPA FETCH RESPONSE:",{asin:r,hasEbayDraft:!!m,ebayDraftKeys:m?Object.keys(m):[],hasImages:!!(m!=null&&m.images),imagesCount:((c=m==null?void 0:m.images)==null?void 0:c.length)||0,images:(m==null?void 0:m.images)||[],firstImage:(l=m==null?void 0:m.images)==null?void 0:l[0],descriptionLength:((p=m==null?void 0:m.description)==null?void 0:p.length)||0,hasKeepaDataImages:!!f.images,keepaImagesCount:((o=f.images)==null?void 0:o.length)||0});let B=0;if((g=f.stats)!=null&&g.current){const G=f.stats.current[4],M=f.stats.current[1];G&&G>0?B=G/100:M&&M>0&&(B=M/100)}return{id:`asin-${b}`,asin:r,fnsku:"",title:f.title||`Product ${r}`,quantity:1,condition:"NEW",originalPrice:B,suggestedPrice:null,category:((k=(w=f.categoryTree)==null?void 0:w[0])==null?void 0:k.name)||"Unknown",brand:f.brand||"",imageUrl:((se=f.imagesCSV)==null?void 0:se.split(",")[0])||"",ebayDraft:m}}catch(C){return console.error(`Error processing ASIN ${r}:`,C),{id:`asin-${b}`,asin:r,sku:r,fnsku:"",title:`Product ${r} (Data unavailable)`,quantity:1,condition:"NEW",originalPrice:0,suggestedPrice:null,category:"Unknown",brand:"",imageUrl:"",error:C.message}}}),d=(await Promise.all(i)).filter(r=>r.asin);if(d.length===0){h("error","Failed to process any ASINs. Please check your Keepa API connection."),E(!1);return}const a=s.length-d.length;a>0?h("warning",`Processed ${d.length} ASINs successfully. ${a} failed.`):h("success",`Successfully processed ${d.length} ASINs`),I(d),x(3)}catch(s){console.error("Error processing manual ASINs:",s),h("error",`Failed to process ASINs: ${s.message}`)}E(!1)},ce=async()=>{F(!0);try{if(!v.trim()){h("error","Please enter a Google Sheets URL"),F(!1);return}let s=v;if(v.includes("docs.google.com/spreadsheets")){const c=v.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);if(c)s=`https://docs.google.com/spreadsheets/d/${c[1]}/export?format=csv`;else throw new Error("Invalid Google Sheets URL format")}h("info","Connecting to Google Sheets...");const t=await fetch(s);if(!t.ok)throw new Error(`Failed to fetch Google Sheets data: ${t.status} ${t.statusText}`);const n=(await t.text()).split(`
`).filter(c=>c.trim());if(n.length<2)throw new Error("Google Sheet appears to be empty or has no data rows");const d=n[0].split(",").map(c=>c.replace(/"/g,"").trim().toLowerCase()),a=n.slice(1);h("info",`Processing ${a.length} rows from Google Sheets...`);const r=a.map((c,l)=>{const p=c.split(",").map(g=>g.replace(/"/g,"").trim()),o={};return d.forEach((g,w)=>{o[g]=p[w]||""}),{id:`sheets-${l}`,asin:o.asin||o["amazon asin"]||"",sku:o.sku||o["merchant sku"]||o.asin||"",fnsku:o.fnsku||"",title:o["product name"]||o.title||o.product||"",quantity:parseInt(o.quantity||o.qty||1),condition:o.condition||"NEW",originalPrice:parseFloat(o.price||o["your price"]||0),suggestedPrice:null,category:o.category||o["product category"]||"",brand:o.brand||"",imageUrl:o["image url"]||o["main image"]||""}}).filter(c=>c.asin||c.sku);if(r.length===0)throw new Error("No valid product data found in Google Sheets. Please check your column headers.");const b=a.length-r.length;b>0?h("warning",`Processed ${r.length} rows successfully. ${b} rows skipped due to missing ASIN/SKU.`):h("success",`Successfully imported ${r.length} products from Google Sheets`),I(r),x(3)}catch(s){console.error("Error processing Google Sheets:",s),h("error",`Failed to process Google Sheets: ${s.message}`)}F(!1)},de=s=>{const t=new FileReader;t.onload=i=>{try{const n=new Uint8Array(i.target.result),d=Ce(n,{type:"array"}),a=d.SheetNames[0],r=d.Sheets[a],c=Pe.sheet_to_json(r).map((l,p)=>({id:`row-${p}`,asin:l.ASIN||l.asin||"",sku:l.SKU||l.sku||l["Merchant SKU"]||"",fnsku:l.FNSKU||l.fnsku||"",title:l["Product Name"]||l.Title||l.Product||"",quantity:parseInt(l.Quantity||l.quantity||l.Qty||1),condition:l.Condition||l.condition||"NEW",originalPrice:parseFloat(l.Price||l["Your Price"]||0),suggestedPrice:null,category:l.Category||l["Product Category"]||"",brand:l.Brand||"",imageUrl:l["Image URL"]||l["Main Image"]||""})).filter(l=>l.asin||l.sku);I(c),x(3),h("success",`Loaded ${c.length} items from Excel`)}catch(n){h("error","Failed to parse Excel file. Please ensure it contains the correct columns."),console.error("Excel parsing error:",n)}},t.readAsArrayBuffer(s)},me=u.useCallback(s=>{s.length>0&&de(s[0])},[]),{getRootProps:he,getInputProps:ue,isDragActive:Z}=Ee({onDrop:me,accept:{"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"text/csv":[".csv"]},maxFiles:1}),xe=async()=>{W(!0);const s=Array.from(j),i=P.filter(n=>s.includes(n.id)).map(n=>({...n,suggestedPrice:ee(n.originalPrice,n.condition),listingTitle:ge(n),listingDescription:pe(n)}));_(i),x(4),W(!1)},ee=(s,t)=>{const n={New:1.2,"Like New":1.1,"Very Good":.95,Good:.85,Acceptable:.75}[t]||1;return(s*n).toFixed(2)},ge=s=>{let t=s.title;if(s.condition&&s.condition!=="NEW_OTHER"&&s.condition!=="New"&&(t+=` - ${s.condition}`),t.length>80){t=t.substring(0,80);const i=t.lastIndexOf(" ");i>60&&(t=t.substring(0,i))}return t},pe=s=>`
      <h3>${s.title}</h3>
      <p><strong>Condition:</strong> ${s.condition}</p>
    `,be=s=>{const t=new Set(j);t.has(s)?t.delete(s):t.add(s),U(t)},fe=()=>{U(new Set(P.map(s=>s.id)))},ye=()=>{U(new Set)},L=Ie(async s=>{var i,n,d;const t=[];for(const a of s)try{const r=ae[a.id]||a.suggestedPrice,b=V[a.id]||a.listingTitle,c=le[a.id]||a.quantity,l=ne[a.id]||"NEW_OTHER",p=(i=a.ebayDraft)!=null&&i.images&&a.ebayDraft.images.length>0?a.ebayDraft.images:a.imageUrl?a.imageUrl.split(",").map(k=>k.startsWith("http")?k:`https://images-na.ssl-images-amazon.com/images/I/${k.trim()}`):[],o=((n=a.ebayDraft)==null?void 0:n.description)||a.listingDescription,g=((d=a.ebayDraft)==null?void 0:d.aspects)||{};!g.Brand&&a.brand&&(g.Brand=[a.brand]),console.log("ðŸ“¦ Creating listing with data:",{asin:a.asin,sku:a.sku,title:b,quantity:c,condition:l,price:r,hasEbayDraft:!!a.ebayDraft,imageCount:p.length,images:p,descriptionLength:(o==null?void 0:o.length)||0,aspectsKeys:Object.keys(g)});const w=await ke.createListing({asin:a.asin,title:b,description:o,price:r,quantity:c,condition:l,images:p,aspects:g});t.push({id:a.id,sku:a.sku,title:a.listingTitle,success:!0,result:w})}catch(r){t.push({id:a.id,sku:a.sku,title:a.listingTitle,success:!1,error:r.message||"Unknown error"})}return t},{onSuccess:s=>{const t=s.filter(n=>n.success).length,i=s.filter(n=>!n.success).length;X(s),i===0?h("success",`Successfully created all ${t} eBay listings!`):h("warning",`Created ${t} listings, ${i} failed. See details below.`)},onError:s=>{h("error",`Failed to create listings: ${s.message}`)}}),je=(s,t)=>{q(i=>({...i,[s]:parseFloat(t)}))},Ne=(s,t)=>{Q(i=>({...i,[s]:t}))},ve=(s,t)=>{Y(i=>({...i,[s]:parseInt(t,10)}))},Se=(s,t)=>{J(i=>({...i,[s]:t}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-theme-primary",children:"Auto-List"}),e.jsx("p",{className:"text-theme-secondary mt-2",children:"Create eBay listings automatically using file uploads, manual ASIN entry, or Google Sheets integration"})]}),e.jsx("div",{className:"bg-theme-surface rounded-lg border border-theme p-4 sm:p-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row items-center sm:justify-between gap-4",children:[{num:1,label:"Select Method"},{num:2,label:"Input Data"},{num:3,label:"Review & Select"},{num:4,label:"Create Listings"}].map((s,t)=>e.jsxs("div",{className:"flex items-center w-full sm:w-auto",children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full flex-shrink-0 ${y>=s.num?"bg-accent text-white":"bg-gray-200 dark:bg-gray-700 text-theme-secondary"}`,children:y>s.num?"âœ“":s.num}),e.jsx("div",{className:`ml-3 text-sm sm:text-base ${y>=s.num?"text-theme-primary":"text-theme-tertiary"}`,children:s.label}),t<3&&e.jsx("div",{className:`ml-4 w-full sm:w-20 h-1 hidden sm:block ${y>s.num?"bg-accent":"bg-gray-200 dark:bg-gray-700"}`})]},s.num))})}),D&&e.jsx("div",{className:`rounded-lg p-3 ${D.type==="success"?"bg-success/10 border border-success/30 text-success":"bg-error/10 border border-error/30 text-error"}`,children:D.message}),y===1&&e.jsx("div",{className:"bg-theme-surface rounded-lg border border-theme",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-theme-primary mb-6",children:"Choose Your Input Method"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{onClick:()=>{$("file"),x(2)},className:"border-2 border-theme rounded-lg p-6 hover:border-blue-500 hover:bg-accent/10 cursor-pointer transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h3",{className:"text-lg font-medium text-theme-primary mt-4",children:"File Upload"}),e.jsx("p",{className:"text-sm text-theme-tertiary mt-2",children:"Upload Excel/CSV files with product data"}),e.jsx("div",{className:"mt-4 text-xs text-theme-tertiary",children:"â€¢ Amazon removal orders â€¢ Custom product lists â€¢ Inventory exports"})]})}),e.jsx("div",{onClick:()=>{$("manual"),x(2)},className:"border-2 border-theme rounded-lg p-6 hover:border-green-500 hover:bg-success/10 cursor-pointer transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("h3",{className:"text-lg font-medium text-theme-primary mt-4",children:"Manual Entry"}),e.jsx("p",{className:"text-sm text-theme-tertiary mt-2",children:"Enter ASINs manually for quick listing"}),e.jsx("div",{className:"mt-4 text-xs text-theme-tertiary",children:"â€¢ Single or batch ASIN entry â€¢ Keepa data lookup â€¢ Immediate processing"})]})}),e.jsx("div",{onClick:()=>{$("sheets"),x(2)},className:"border-2 border-theme rounded-lg p-6 hover:border-purple-500 hover:bg-purple-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"text-lg font-medium text-theme-primary mt-4",children:"Google Sheets"}),e.jsx("p",{className:"text-sm text-theme-tertiary mt-2",children:"Connect to your Google Sheets"}),e.jsx("div",{className:"mt-4 text-xs text-theme-tertiary",children:"â€¢ Live sync with sheets â€¢ Collaborative editing â€¢ Real-time updates"})]})})]})]})}),y===2&&e.jsx("div",{className:"bg-theme-surface rounded-lg border border-theme",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-medium text-theme-primary",children:[N==="file"&&"Upload File",N==="manual"&&"Enter ASINs Manually",N==="sheets"&&"Connect Google Sheets"]}),e.jsx("button",{onClick:()=>{x(1),$(null)},className:"text-sm text-theme-tertiary hover:text-theme-secondary",children:"â† Change Method"})]}),N==="file"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{...he(),className:`border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-colors ${Z?"border-blue-500 bg-accent/10":"border-theme hover:border-gray-400"}`,children:[e.jsx("input",{...ue()}),e.jsx("svg",{className:"mx-auto h-12 w-12 text-theme-tertiary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-sm text-theme-secondary",children:Z?"Drop your Excel file here...":"Drag and drop your Excel file here, or click to browse"}),e.jsx("p",{className:"mt-1 text-xs text-theme-tertiary",children:"Supports .xls, .xlsx, and .csv files"})]}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-theme-primary mb-2",children:"Expected Excel Columns:"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs text-theme-secondary",children:[e.jsx("div",{children:"â€¢ ASIN"}),e.jsx("div",{children:"â€¢ SKU"}),e.jsx("div",{children:"â€¢ FNSKU"}),e.jsx("div",{children:"â€¢ Product Name"}),e.jsx("div",{children:"â€¢ Quantity"}),e.jsx("div",{children:"â€¢ Condition"}),e.jsx("div",{children:"â€¢ Price"}),e.jsx("div",{children:"â€¢ Category"})]})]})]}),N==="manual"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-theme-secondary mb-2",children:"Enter ASINs (one per line)"}),e.jsx("textarea",{rows:8,value:T,onChange:s=>te(s.target.value),className:"w-full border border-theme rounded-lg p-3 focus:ring-blue-500 focus:border-blue-500",placeholder:`B0123456789
B0987654321
B0555666777

Enter multiple ASINs, one per line`})]}),e.jsxs("div",{className:"bg-accent/10 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"How it works:"}),e.jsxs("ul",{className:"text-sm text-accent space-y-1",children:[e.jsx("li",{children:"â€¢ Enter Amazon ASINs (10-character product IDs)"}),e.jsx("li",{children:"â€¢ Product data will be fetched from Keepa API"}),e.jsx("li",{children:"â€¢ Pricing will be calculated automatically"}),e.jsx("li",{children:"â€¢ eBay categories will be determined via taxonomy"})]})]}),e.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",onClick:oe,disabled:z||!T.trim(),children:z?"Processing ASINs...":"Process ASINs"})]}),N==="sheets"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-theme-secondary mb-2",children:"Google Sheets URL"}),e.jsx("input",{type:"url",value:v,onChange:s=>re(s.target.value),className:"w-full border border-theme rounded-lg p-3 focus:ring-purple-500 focus:border-purple-500",placeholder:"https://docs.google.com/spreadsheets/d/..."})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-purple-900 mb-2",children:"Setup Instructions:"}),e.jsxs("ol",{className:"text-sm text-purple-800 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Make your Google Sheet publicly viewable"}),e.jsx("li",{children:"Ensure column headers match our expected format"}),e.jsx("li",{children:"Paste the shareable link above"}),e.jsx("li",{children:'Click "Connect Sheet" to import data'})]})]}),e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-amber-900 mb-2",children:"Expected Columns:"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs text-amber-800",children:[e.jsx("div",{children:"â€¢ ASIN"}),e.jsx("div",{children:"â€¢ SKU"}),e.jsx("div",{children:"â€¢ Product Name"}),e.jsx("div",{children:"â€¢ Quantity"}),e.jsx("div",{children:"â€¢ Condition"}),e.jsx("div",{children:"â€¢ Price"})]})]}),e.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",onClick:ce,disabled:H||!v.trim(),children:H?"Connecting...":"Connect Sheet"})]})]})}),y===3&&e.jsx("div",{className:"bg-theme-surface rounded-lg border border-theme",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4",children:[e.jsxs("h2",{className:"text-lg font-medium text-theme-primary",children:["Review Items (",P.length," total, ",j.size," selected)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:fe,className:"px-3 py-1 text-sm bg-theme-hover text-theme-secondary rounded hover:bg-gray-200 dark:bg-gray-700",children:"Select All"}),e.jsx("button",{onClick:ye,className:"px-3 py-1 text-sm bg-theme-hover text-theme-secondary rounded hover:bg-gray-200 dark:bg-gray-700",children:"Deselect All"})]})]}),e.jsx("div",{className:"space-y-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 350px)"},children:P.map(s=>{var i,n,d;const t=((n=(i=s.ebayDraft)==null?void 0:i.images)==null?void 0:n[0])||((d=s.imageUrl)==null?void 0:d.split(",")[0])||(s.imageUrl?`https://images-na.ssl-images-amazon.com/images/I/${s.imageUrl.trim()}`:null);return e.jsx("div",{className:"border rounded-lg p-3 bg-theme-primary hover:bg-theme-hover transition-colors",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 flex items-start pt-1",children:e.jsx("input",{type:"checkbox",checked:j.has(s.id),onChange:()=>be(s.id),className:"rounded border-theme w-4 h-4"})}),e.jsx("div",{className:"flex-shrink-0",children:t?e.jsx("img",{src:t,alt:s.title,className:"w-20 h-20 object-cover rounded border border-theme",onError:a=>{a.target.style.display="none"}}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded border border-theme flex items-center justify-center",children:e.jsx("span",{className:"text-theme-tertiary text-xs",children:"No image"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"font-medium text-sm text-theme-primary truncate",title:s.title,children:s.title}),e.jsxs("div",{className:"flex gap-3 text-xs text-theme-tertiary mt-0.5",children:[e.jsxs("span",{children:["SKU: ",s.sku]}),s.asin&&e.jsxs("span",{children:["ASIN: ",s.asin]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-theme-tertiary",children:"Qty:"})," ",e.jsx("span",{className:"font-medium",children:s.quantity})]}),e.jsx("div",{children:e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${s.condition==="New"||s.condition==="NEW"?"bg-success/10 text-success":"bg-yellow-100 text-yellow-800"}`,children:s.condition})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-theme-tertiary",children:"Original:"})," ",e.jsxs("span",{className:"font-medium",children:["$",s.originalPrice]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-theme-tertiary",children:"eBay:"})," ",s.originalPrice>0?e.jsxs("span",{className:"text-success font-semibold",children:["$",ee(s.originalPrice,s.condition)]}):e.jsx("span",{className:"text-amber-600 text-xs",children:"âš ï¸ No price"})]})]})]})]})},s.id)})}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-between gap-3",children:[e.jsx("button",{onClick:()=>x(2),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-theme-secondary rounded hover:bg-gray-300 w-full sm:w-auto",children:"Back"}),e.jsx("button",{onClick:xe,disabled:j.size===0||O,className:"px-6 py-2 bg-accent text-white rounded hover:bg-accent-hover disabled:opacity-50 w-full sm:w-auto",children:O?"Processing...":`Process ${j.size} Items`})]})]})}),y===4&&e.jsx("div",{className:"bg-theme-surface rounded-lg border border-theme",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-theme-primary mb-4",children:["Review eBay Listings (",A.length," items)"]}),!S&&e.jsx("div",{className:"space-y-3 overflow-y-auto",style:{maxHeight:"calc(100vh - 300px)"},children:A.map(s=>{var i,n,d,a;const t=((n=(i=s.ebayDraft)==null?void 0:i.images)==null?void 0:n[0])||((d=s.imageUrl)==null?void 0:d.split(",")[0])||(s.imageUrl?`https://images-na.ssl-images-amazon.com/images/I/${s.imageUrl.trim()}`:null);return e.jsx("div",{className:"border rounded-lg p-3 bg-theme-primary hover:bg-theme-hover transition-colors",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:t?e.jsx("img",{src:t,alt:s.title,className:"w-20 h-20 object-cover rounded border border-theme",onError:r=>{r.target.style.display="none"}}):e.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded border border-theme flex items-center justify-center",children:e.jsx("span",{className:"text-theme-tertiary text-xs",children:"No image"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("input",{type:"text",maxLength:"80",defaultValue:s.listingTitle,onChange:r=>Ne(s.id,r.target.value),className:"w-full px-2 py-1 text-sm border border-theme rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter listing title"}),e.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[e.jsxs("span",{className:"text-xs text-theme-tertiary",children:["SKU: ",s.sku]}),e.jsxs("span",{className:"text-xs text-theme-tertiary",children:[((a=V[s.id])==null?void 0:a.length)||s.listingTitle.length,"/80"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-theme-secondary mb-0.5",children:"Qty"}),e.jsx("input",{type:"number",min:"1",max:"10000",defaultValue:s.quantity,onChange:r=>ve(s.id,r.target.value),className:"w-full px-2 py-1 text-sm border border-theme rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs text-theme-secondary mb-0.5",children:"Condition"}),e.jsx("select",{defaultValue:"NEW_OTHER",onChange:r=>Se(s.id,r.target.value),className:"w-full px-2 py-1 text-sm border border-theme rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:ie.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-theme-secondary mb-0.5",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-theme-tertiary text-sm",children:"$"}),e.jsx("input",{type:"number",step:"0.01",min:"0",defaultValue:s.suggestedPrice,onChange:r=>je(s.id,r.target.value),className:"w-full pl-6 pr-2 py-1 text-sm border border-theme rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]})]})},s.id)})}),S&&e.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"bg-accent/10 border border-accent/30 rounded-lg p-4 mb-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Creation Summary"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["âœ… Successful: ",S.filter(s=>s.success).length," listings",e.jsx("br",{}),"âŒ Failed: ",S.filter(s=>!s.success).length," listings"]})]}),S.map(s=>e.jsx("div",{className:`border rounded-lg p-4 ${s.success?"bg-success/10 border-success/30":"bg-error/10 border-error/30"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.success?e.jsx("span",{className:"text-success font-bold",children:"âœ“"}):e.jsx("span",{className:"text-error font-bold",children:"âœ—"}),e.jsx("h3",{className:`font-medium ${s.success?"text-green-900":"text-red-900"}`,children:s.title})]}),e.jsxs("p",{className:`text-sm mt-1 ${s.success?"text-green-700":"text-red-700"}`,children:["SKU: ",s.sku]}),!s.success&&e.jsxs("p",{className:"text-sm text-red-700 mt-2 bg-error/10 p-2 rounded",children:["Error: ",s.error]})]})})},s.id))]}),e.jsx("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-between gap-3",children:S?e.jsx("button",{onClick:()=>{X(null),q({}),Q({}),Y({}),J({}),I([]),_([]),U(new Set),x(1)},className:"px-6 py-2 bg-accent text-white rounded hover:bg-accent-hover w-full sm:w-auto",children:"Start Over"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x(3),disabled:L.isLoading,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-theme-secondary rounded hover:bg-gray-300 disabled:opacity-50 w-full sm:w-auto",children:"Back"}),e.jsx("button",{onClick:()=>L.mutate(A),disabled:L.isLoading,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 w-full sm:w-auto",children:L.isLoading?"Creating Listings...":`Create ${A.length} eBay Listings`})]})})]})})]})}export{Te as default};
//# sourceMappingURL=AutoList-080f05ac.js.map
