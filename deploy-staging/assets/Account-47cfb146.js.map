{"version":3,"file":"Account-47cfb146.js","sources":["../../src/pages/Account.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useSearchParams } from 'react-router-dom'\nimport { userAPI, authAPI, supabase } from '../lib/supabase'\n\nexport default function Account() {\n  const [searchParams, setSearchParams] = useSearchParams()\n  const [activeTab, setActiveTab] = useState('profile')\n  const [isEditing, setIsEditing] = useState(false)\n  const [profileData, setProfileData] = useState({})\n  const [isEditingPreferences, setIsEditingPreferences] = useState(false)\n  const [preferencesData, setPreferencesData] = useState({})\n  const [passwordData, setPasswordData] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  })\n  const [feedbackData, setFeedbackData] = useState({\n    category: '',\n    description: '',\n    screenshot: null\n  })\n  const [feedbackStatus, setFeedbackStatus] = useState({ type: '', message: '' })\n  const [isSubmittingFeedback, setIsSubmittingFeedback] = useState(false)\n  const queryClient = useQueryClient()\n\n  const { data: profile, isLoading } = useQuery(\n    ['profile'],\n    () => userAPI.getProfile(),\n    {\n      refetchOnWindowFocus: false\n    }\n  )\n\n  // Initialize form states when profile data loads\n  useEffect(() => {\n    if (profile && !isEditing) {\n      setProfileData({\n        name: profile.name || '',\n        default_reduction_strategy: profile.default_reduction_strategy || 'fixed_percentage',\n        default_reduction_percentage: profile.default_reduction_percentage || 5,\n        default_reduction_interval: profile.default_reduction_interval || 7\n      })\n    }\n  }, [profile, isEditing])\n\n  useEffect(() => {\n    if (profile && !isEditingPreferences) {\n      setPreferencesData({\n        email_notifications: profile.email_notifications ?? true,\n        price_reduction_alerts: profile.price_reduction_alerts ?? true\n      })\n    }\n  }, [profile, isEditingPreferences])\n\n  // Handle URL parameter for tab selection\n  useEffect(() => {\n    const tab = searchParams.get('tab')\n    if (tab && ['profile', 'preferences', 'security', 'feedback'].includes(tab)) {\n      setActiveTab(tab)\n    }\n  }, [searchParams])\n\n  const updateProfileMutation = useMutation({\n    mutationFn: (data) => userAPI.updateProfile(data),\n    onSuccess: () => {\n      queryClient.invalidateQueries(['profile'])\n      setIsEditing(false)\n    }\n  })\n\n  const handleProfileSave = async () => {\n    updateProfileMutation.mutate(profileData)\n  }\n\n  const handlePreferencesSave = async () => {\n    try {\n      await userAPI.updateProfile(preferencesData)\n      queryClient.invalidateQueries(['profile'])\n      setIsEditingPreferences(false)\n    } catch (error) {\n      console.error('Failed to update preferences:', error)\n      alert('Failed to update preferences. Please try again.')\n    }\n  }\n\n  const handlePasswordChange = async (e) => {\n    e.preventDefault()\n    if (passwordData.newPassword !== passwordData.confirmPassword) {\n      alert('New passwords do not match')\n      return\n    }\n    if (passwordData.newPassword.length < 8) {\n      alert('Password must be at least 8 characters')\n      return\n    }\n\n    try {\n      await authAPI.updatePassword(passwordData.newPassword)\n      alert('Password updated successfully!')\n      setPasswordData({ currentPassword: '', newPassword: '', confirmPassword: '' })\n    } catch (error) {\n      console.error('Password update failed:', error)\n      alert('Failed to update password. Please try again.')\n    }\n  }\n\n  const handleDeleteAccount = async () => {\n    if (window.confirm('Are you sure you want to delete your account? This action cannot be undone.')) {\n      if (window.confirm('This will permanently delete all your listings and data. Are you absolutely sure?')) {\n        alert('Account deletion would be processed. In demo mode, this is simulated.')\n      }\n    }\n  }\n\n  const handleExportData = () => {\n    const exportData = {\n      profile: profile,\n      exportDate: new Date().toISOString(),\n      listings: 'Available',\n      priceHistory: 'Available'\n    }\n\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement('a')\n    a.href = url\n    a.download = 'ebay-price-reducer-data.json'\n    a.click()\n    URL.revokeObjectURL(url)\n  }\n\n  const handleFeedbackSubmit = async (e) => {\n    e.preventDefault()\n    setFeedbackStatus({ type: '', message: '' })\n\n    // Validate required fields\n    if (!feedbackData.category) {\n      setFeedbackStatus({ type: 'error', message: 'Please select a category.' })\n      return\n    }\n    if (!feedbackData.description.trim()) {\n      setFeedbackStatus({ type: 'error', message: 'Please provide a description.' })\n      return\n    }\n    // Screenshot required for Bug reports\n    if (feedbackData.category === 'bug' && !feedbackData.screenshot) {\n      setFeedbackStatus({ type: 'error', message: 'Screenshot is required for bug reports.' })\n      return\n    }\n\n    setIsSubmittingFeedback(true)\n\n    try {\n      // Get auth token\n      const { data: { session } } = await supabase.auth.getSession()\n      if (!session?.access_token) {\n        throw new Error('Not authenticated')\n      }\n\n      const formData = new FormData()\n      formData.append('category', feedbackData.category)\n      formData.append('description', feedbackData.description)\n      if (feedbackData.screenshot) {\n        formData.append('screenshot', feedbackData.screenshot)\n      }\n\n      const response = await fetch('/.netlify/functions/submit-feedback', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`\n        },\n        body: formData\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to submit feedback')\n      }\n\n      setFeedbackStatus({ type: 'success', message: 'Thank you! Your feedback has been submitted successfully.' })\n      setFeedbackData({ category: '', description: '', screenshot: null })\n      // Reset file input\n      const fileInput = document.getElementById('screenshot-input')\n      if (fileInput) fileInput.value = ''\n    } catch (error) {\n      console.error('Feedback submission failed:', error)\n      setFeedbackStatus({ type: 'error', message: 'Failed to submit feedback. Please try again.' })\n    } finally {\n      setIsSubmittingFeedback(false)\n    }\n  }\n\n  if (isLoading) {\n    return <div className=\"text-center py-8\">Loading...</div>\n  }\n\n  const tabs = [\n    { id: 'profile', name: 'Profile', icon: 'üë§' },\n    { id: 'preferences', name: 'Preferences', icon: '‚öôÔ∏è' },\n    { id: 'security', name: 'Security', icon: 'üîí' },\n    { id: 'feedback', name: 'Feedback', icon: 'üí¨' }\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold text-theme-primary\">Account Settings</h1>\n        <p className=\"text-theme-secondary mt-2\">Manage your account settings and preferences</p>\n      </div>\n\n      <div className=\"bg-theme-surface rounded-lg border border-theme overflow-hidden\">\n        {/* Mobile Tab Selector */}\n        <div className=\"sm:hidden\">\n          <select\n            value={activeTab}\n            onChange={(e) => setActiveTab(e.target.value)}\n            className=\"w-full px-4 py-3 text-base border-b border-theme focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            {tabs.map((tab) => (\n              <option key={tab.id} value={tab.id}>\n                {tab.icon} {tab.name}\n              </option>\n            ))}\n          </select>\n        </div>\n\n        {/* Desktop Tab Navigation */}\n        <div className=\"hidden sm:block border-b border-theme\">\n          <nav className=\"flex flex-wrap\" aria-label=\"Tabs\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`${\n                  activeTab === tab.id\n                    ? 'border-blue-500 text-accent bg-accent/10'\n                    : 'border-transparent text-theme-tertiary hover:text-theme-secondary hover:border-theme'\n                } whitespace-nowrap py-4 px-4 sm:px-6 border-b-2 font-medium text-sm flex items-center space-x-2 transition-colors`}\n              >\n                <span className=\"text-lg\">{tab.icon}</span>\n                <span className=\"hidden md:inline\">{tab.name}</span>\n              </button>\n            ))}\n          </nav>\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"p-4 sm:p-6\">\n          {activeTab === 'profile' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-medium text-theme-primary\">Profile Information</h3>\n                <p className=\"text-sm text-theme-secondary\">Update your account profile information.</p>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Full Name</label>\n                  {isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={profileData.name || profile?.name || ''}\n                      onChange={(e) => setProfileData(prev => ({ ...prev, name: e.target.value }))}\n                      className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                    />\n                  ) : (\n                    <div className=\"text-theme-primary\">{profile?.name || 'Not set'}</div>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Email</label>\n                  <div className=\"text-theme-primary\">{profile?.email || 'Not set'}</div>\n                </div>\n              </div>\n\n              <div className=\"border-t border-theme pt-4\">\n                <h4 className=\"text-md font-medium text-theme-primary mb-3\">Default Reduction Settings</h4>\n                <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Strategy</label>\n                    {isEditing ? (\n                      <select\n                        value={profileData.default_reduction_strategy || 'fixed_percentage'}\n                        onChange={(e) => setProfileData(prev => ({ ...prev, default_reduction_strategy: e.target.value }))}\n                        className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                      >\n                        <option value=\"fixed_percentage\">Fixed Percentage</option>\n                        <option value=\"fixed_amount\">Fixed Amount</option>\n                      </select>\n                    ) : (\n                      <div className=\"text-theme-primary capitalize\">\n                        {(profile?.default_reduction_strategy || 'fixed_percentage').replace('_', ' ')}\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Reduction %</label>\n                    {isEditing ? (\n                      <input\n                        type=\"number\"\n                        value={profileData.default_reduction_percentage || 5}\n                        onChange={(e) => setProfileData(prev => ({ ...prev, default_reduction_percentage: parseFloat(e.target.value) }))}\n                        className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                        min=\"0\"\n                        max=\"100\"\n                        step=\"0.5\"\n                      />\n                    ) : (\n                      <div className=\"text-theme-primary\">{profile?.default_reduction_percentage || 5}%</div>\n                    )}\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Interval (days)</label>\n                    {isEditing ? (\n                      <input\n                        type=\"number\"\n                        value={profileData.default_reduction_interval || 7}\n                        onChange={(e) => setProfileData(prev => ({ ...prev, default_reduction_interval: parseInt(e.target.value) }))}\n                        className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                        min=\"1\"\n                        max=\"365\"\n                      />\n                    ) : (\n                      <div className=\"text-theme-primary\">{profile?.default_reduction_interval || 7} days</div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex gap-3\">\n                {isEditing ? (\n                  <>\n                    <button\n                      onClick={handleProfileSave}\n                      disabled={updateProfileMutation.isLoading}\n                      className=\"bg-accent text-white px-4 py-2 rounded hover:bg-accent-hover disabled:opacity-50\"\n                    >\n                      {updateProfileMutation.isLoading ? 'Saving...' : 'Save Changes'}\n                    </button>\n                    <button\n                      onClick={() => setIsEditing(false)}\n                      className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700\"\n                    >\n                      Cancel\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={() => setIsEditing(true)}\n                    className=\"bg-accent text-white px-4 py-2 rounded hover:bg-accent-hover\"\n                  >\n                    Edit Profile\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'preferences' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-medium text-theme-primary\">Notification Preferences</h3>\n                <p className=\"text-sm text-theme-secondary\">Manage how you receive notifications.</p>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <label className=\"text-sm font-medium text-theme-primary\">Email Notifications</label>\n                    <p className=\"text-sm text-theme-secondary\">Receive email updates about your account</p>\n                  </div>\n                  <input\n                    type=\"checkbox\"\n                    checked={isEditingPreferences ? preferencesData.email_notifications : (profile?.email_notifications ?? true)}\n                    onChange={(e) => setPreferencesData(prev => ({ ...prev, email_notifications: e.target.checked }))}\n                    disabled={!isEditingPreferences}\n                    className=\"h-4 w-4 text-accent focus:ring-accent border-theme rounded\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <label className=\"text-sm font-medium text-theme-primary\">Price Reduction Alerts</label>\n                    <p className=\"text-sm text-theme-secondary\">Get notified when prices are automatically reduced</p>\n                  </div>\n                  <input\n                    type=\"checkbox\"\n                    checked={isEditingPreferences ? preferencesData.price_reduction_alerts : (profile?.price_reduction_alerts ?? true)}\n                    onChange={(e) => setPreferencesData(prev => ({ ...prev, price_reduction_alerts: e.target.checked }))}\n                    disabled={!isEditingPreferences}\n                    className=\"h-4 w-4 text-accent focus:ring-accent border-theme rounded\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-3\">\n                {isEditingPreferences ? (\n                  <>\n                    <button\n                      onClick={handlePreferencesSave}\n                      className=\"bg-accent text-white px-4 py-2 rounded hover:bg-accent-hover\"\n                    >\n                      Save Preferences\n                    </button>\n                    <button\n                      onClick={() => setIsEditingPreferences(false)}\n                      className=\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700\"\n                    >\n                      Cancel\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={() => setIsEditingPreferences(true)}\n                    className=\"bg-accent text-white px-4 py-2 rounded hover:bg-accent-hover\"\n                  >\n                    Edit Preferences\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'security' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-medium text-theme-primary\">Security Settings</h3>\n                <p className=\"text-sm text-theme-secondary\">Manage your password and security options.</p>\n              </div>\n\n              <form onSubmit={handlePasswordChange} className=\"space-y-4 max-w-md\">\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Current Password</label>\n                  <input\n                    type=\"password\"\n                    value={passwordData.currentPassword}\n                    onChange={(e) => setPasswordData(prev => ({ ...prev, currentPassword: e.target.value }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">New Password</label>\n                  <input\n                    type=\"password\"\n                    value={passwordData.newPassword}\n                    onChange={(e) => setPasswordData(prev => ({ ...prev, newPassword: e.target.value }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">Confirm New Password</label>\n                  <input\n                    type=\"password\"\n                    value={passwordData.confirmPassword}\n                    onChange={(e) => setPasswordData(prev => ({ ...prev, confirmPassword: e.target.value }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2\"\n                  />\n                </div>\n                <button\n                  type=\"submit\"\n                  className=\"bg-accent text-white px-4 py-2 rounded hover:bg-accent-hover\"\n                >\n                  Update Password\n                </button>\n              </form>\n\n              <div className=\"border-t border-theme pt-6 space-y-4\">\n                <div>\n                  <h4 className=\"text-md font-medium text-theme-primary\">Data Management</h4>\n                  <p className=\"text-sm text-theme-secondary\">Export or delete your account data.</p>\n                </div>\n                <div className=\"flex flex-wrap gap-3\">\n                  <button\n                    onClick={handleExportData}\n                    className=\"bg-theme-hover text-theme-primary border border-theme px-4 py-2 rounded hover:bg-gray-200 dark:bg-gray-700\"\n                  >\n                    Export Data\n                  </button>\n                  <button\n                    onClick={handleDeleteAccount}\n                    className=\"bg-error/10 text-error border border-error/30 px-4 py-2 rounded hover:bg-error/20\"\n                  >\n                    Delete Account\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'feedback' && (\n            <div className=\"space-y-6\">\n              <div>\n                <h3 className=\"text-lg font-medium text-theme-primary\">Submit Feedback</h3>\n                <p className=\"text-sm text-theme-secondary\">Help us improve by sharing your feedback, reporting bugs, or requesting new features.</p>\n              </div>\n\n              {feedbackStatus.message && (\n                <div className={`p-4 rounded-lg ${\n                  feedbackStatus.type === 'success' \n                    ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-800' \n                    : 'bg-error/10 text-error border border-error/30'\n                }`}>\n                  {feedbackStatus.message}\n                </div>\n              )}\n\n              <form onSubmit={handleFeedbackSubmit} className=\"space-y-4 max-w-lg\">\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">\n                    Category <span className=\"text-error\">*</span>\n                  </label>\n                  <select\n                    value={feedbackData.category}\n                    onChange={(e) => setFeedbackData(prev => ({ ...prev, category: e.target.value }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2 bg-theme-surface text-theme-primary\"\n                    required\n                  >\n                    <option value=\"\">Select a category...</option>\n                    <option value=\"feature_request\">New Feature Request</option>\n                    <option value=\"bug\">Bug</option>\n                    <option value=\"other\">Other</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">\n                    Description <span className=\"text-error\">*</span>\n                  </label>\n                  <textarea\n                    value={feedbackData.description}\n                    onChange={(e) => setFeedbackData(prev => ({ ...prev, description: e.target.value }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2 bg-theme-surface text-theme-primary min-h-[120px] resize-y\"\n                    placeholder=\"Please describe your feedback in detail...\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-theme-secondary mb-1\">\n                    Screenshot {feedbackData.category === 'bug' && <span className=\"text-error\">* (required for bugs)</span>}\n                  </label>\n                  <input\n                    id=\"screenshot-input\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => setFeedbackData(prev => ({ ...prev, screenshot: e.target.files?.[0] || null }))}\n                    className=\"w-full border border-theme rounded-lg px-3 py-2 bg-theme-surface text-theme-primary file:mr-4 file:py-1 file:px-3 file:rounded file:border-0 file:text-sm file:bg-accent file:text-white hover:file:bg-accent-hover\"\n                  />\n                  {feedbackData.screenshot && (\n                    <p className=\"mt-1 text-sm text-theme-tertiary\">\n                      Selected: {feedbackData.screenshot.name}\n                    </p>\n                  )}\n                </div>\n\n                <button\n                  type=\"submit\"\n                  disabled={isSubmittingFeedback}\n                  className=\"bg-accent text-white px-6 py-2 rounded hover:bg-accent-hover disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {isSubmittingFeedback ? 'Submitting...' : 'Submit Feedback'}\n                </button>\n              </form>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["Account","searchParams","setSearchParams","useSearchParams","activeTab","setActiveTab","useState","isEditing","setIsEditing","profileData","setProfileData","isEditingPreferences","setIsEditingPreferences","preferencesData","setPreferencesData","passwordData","setPasswordData","feedbackData","setFeedbackData","feedbackStatus","setFeedbackStatus","isSubmittingFeedback","setIsSubmittingFeedback","queryClient","useQueryClient","profile","isLoading","useQuery","userAPI","useEffect","tab","updateProfileMutation","useMutation","data","handleProfileSave","handlePreferencesSave","error","handlePasswordChange","e","authAPI","handleDeleteAccount","handleExportData","exportData","blob","url","a","handleFeedbackSubmit","session","supabase","formData","fileInput","jsx","tabs","jsxs","prev","Fragment","_a"],"mappings":"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"}