{"version":3,"file":"ProductCRM-8d13df7c.js","sources":["../../node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js","../../node_modules/lucide-react/dist/esm/icons/grip-vertical.js","../../node_modules/lucide-react/dist/esm/icons/inbox.js","../../node_modules/lucide-react/dist/esm/icons/list-todo.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-down.js","../../node_modules/lucide-react/dist/esm/icons/thumbs-up.js","../../node_modules/lucide-react/dist/esm/icons/truck.js","../../src/components/crm/CustomizableDropdown.jsx","../../src/pages/ProductCRM.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n];\nconst EllipsisVertical = createLucideIcon(\"ellipsis-vertical\", __iconNode);\n\nexport { __iconNode, EllipsisVertical as default };\n//# sourceMappingURL=ellipsis-vertical.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"9\", cy: \"12\", r: \"1\", key: \"1vctgf\" }],\n  [\"circle\", { cx: \"9\", cy: \"5\", r: \"1\", key: \"hp0tcf\" }],\n  [\"circle\", { cx: \"9\", cy: \"19\", r: \"1\", key: \"fkjjf6\" }],\n  [\"circle\", { cx: \"15\", cy: \"12\", r: \"1\", key: \"1tmaij\" }],\n  [\"circle\", { cx: \"15\", cy: \"5\", r: \"1\", key: \"19l28e\" }],\n  [\"circle\", { cx: \"15\", cy: \"19\", r: \"1\", key: \"f4zoj3\" }]\n];\nconst GripVertical = createLucideIcon(\"grip-vertical\", __iconNode);\n\nexport { __iconNode, GripVertical as default };\n//# sourceMappingURL=grip-vertical.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"polyline\", { points: \"22 12 16 12 14 15 10 15 8 12 2 12\", key: \"o97t9d\" }],\n  [\n    \"path\",\n    {\n      d: \"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z\",\n      key: \"oot6mr\"\n    }\n  ]\n];\nconst Inbox = createLucideIcon(\"inbox\", __iconNode);\n\nexport { __iconNode, Inbox as default };\n//# sourceMappingURL=inbox.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 5h8\", key: \"a7qcls\" }],\n  [\"path\", { d: \"M13 12h8\", key: \"h98zly\" }],\n  [\"path\", { d: \"M13 19h8\", key: \"c3s6r1\" }],\n  [\"path\", { d: \"m3 17 2 2 4-4\", key: \"1jhpwq\" }],\n  [\"rect\", { x: \"3\", y: \"4\", width: \"6\", height: \"6\", rx: \"1\", key: \"cif1o7\" }]\n];\nconst ListTodo = createLucideIcon(\"list-todo\", __iconNode);\n\nexport { __iconNode, ListTodo as default };\n//# sourceMappingURL=list-todo.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z\",\n      key: \"m61m77\"\n    }\n  ],\n  [\"path\", { d: \"M17 14V2\", key: \"8ymqnk\" }]\n];\nconst ThumbsDown = createLucideIcon(\"thumbs-down\", __iconNode);\n\nexport { __iconNode, ThumbsDown as default };\n//# sourceMappingURL=thumbs-down.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z\",\n      key: \"emmmcr\"\n    }\n  ],\n  [\"path\", { d: \"M7 10v12\", key: \"1qc93n\" }]\n];\nconst ThumbsUp = createLucideIcon(\"thumbs-up\", __iconNode);\n\nexport { __iconNode, ThumbsUp as default };\n//# sourceMappingURL=thumbs-up.js.map\n","/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2\", key: \"wrbu53\" }],\n  [\"path\", { d: \"M15 18H9\", key: \"1lyqi6\" }],\n  [\n    \"path\",\n    {\n      d: \"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14\",\n      key: \"lysw3i\"\n    }\n  ],\n  [\"circle\", { cx: \"17\", cy: \"18\", r: \"2\", key: \"332jqn\" }],\n  [\"circle\", { cx: \"7\", cy: \"18\", r: \"2\", key: \"19iecd\" }]\n];\nconst Truck = createLucideIcon(\"truck\", __iconNode);\n\nexport { __iconNode, Truck as default };\n//# sourceMappingURL=truck.js.map\n","/**\n * CustomizableDropdown Component\n * \n * A reusable dropdown that fetches options from Supabase and allows \n * users to add custom options with a \"+\" button.\n * \n * Supports: crm_statuses, crm_collaboration_types, crm_contact_sources, crm_marketplaces\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { userAPI, supabase } from '../../lib/supabase';\nimport { Plus, X, Check, Loader, ChevronDown } from 'lucide-react';\n\n// Predefined color options for status-type endpoints\nconst COLOR_OPTIONS = [\n  { name: 'Blue', value: '#3B82F6' },\n  { name: 'Purple', value: '#8B5CF6' },\n  { name: 'Green', value: '#22C55E' },\n  { name: 'Orange', value: '#F97316' },\n  { name: 'Cyan', value: '#06B6D4' },\n  { name: 'Yellow', value: '#EAB308' },\n  { name: 'Red', value: '#EF4444' },\n  { name: 'Pink', value: '#EC4899' },\n  { name: 'Indigo', value: '#6366F1' },\n  { name: 'Teal', value: '#14B8A6' },\n  { name: 'Gray', value: '#6B7280' },\n];\n\n// Endpoint configuration\nconst ENDPOINT_CONFIG = {\n  crm_statuses: {\n    hasColor: true,\n    hasSortOrder: true,\n    nameField: 'name',\n    defaultColor: '#6B7280',\n  },\n  crm_collaboration_types: {\n    hasColor: false,\n    hasSortOrder: false,\n    nameField: 'name',\n  },\n  crm_contact_sources: {\n    hasColor: false,\n    hasSortOrder: false,\n    nameField: 'name',\n  },\n  crm_marketplaces: {\n    hasColor: false,\n    hasSortOrder: false,\n    nameField: 'name',\n  },\n};\n\n/**\n * Add Option Modal Component\n */\nconst AddOptionModal = ({ \n  isOpen, \n  onClose, \n  onSave, \n  endpoint,\n  isSaving \n}) => {\n  const [name, setName] = useState('');\n  const [color, setColor] = useState('#3B82F6');\n  const [error, setError] = useState('');\n  \n  const config = ENDPOINT_CONFIG[endpoint] || {};\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    if (!name.trim()) {\n      setError('Name is required');\n      return;\n    }\n    \n    try {\n      await onSave({ \n        name: name.trim(), \n        color: config.hasColor ? color : undefined \n      });\n      setName('');\n      setColor('#3B82F6');\n      onClose();\n    } catch (err) {\n      setError(err.message || 'Failed to save option');\n    }\n  };\n  \n  const handleClose = () => {\n    setName('');\n    setColor('#3B82F6');\n    setError('');\n    onClose();\n  };\n  \n  if (!isOpen) return null;\n  \n  return (\n    <div \n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n      onClick={handleClose}\n    >\n      <div \n        className=\"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-sm p-5 mx-4\"\n        onClick={e => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Add New Option\n          </h3>\n          <button \n            onClick={handleClose} \n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-4\">\n            {/* Name Input */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Name\n              </label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={e => setName(e.target.value)}\n                placeholder=\"Enter name...\"\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                autoFocus\n              />\n            </div>\n            \n            {/* Color Picker (for status-type endpoints) */}\n            {config.hasColor && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Color\n                </label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {COLOR_OPTIONS.map(({ name: colorName, value }) => (\n                    <button\n                      key={value}\n                      type=\"button\"\n                      onClick={() => setColor(value)}\n                      className={`w-8 h-8 rounded-full border-2 transition-all ${\n                        color === value \n                          ? 'border-gray-900 dark:border-white scale-110' \n                          : 'border-transparent hover:scale-105'\n                      }`}\n                      style={{ backgroundColor: value }}\n                      title={colorName}\n                    />\n                  ))}\n                </div>\n                {/* Preview */}\n                <div className=\"mt-3 flex items-center gap-2\">\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">Preview:</span>\n                  <span \n                    className=\"px-2.5 py-0.5 rounded-full text-xs font-medium text-white\"\n                    style={{ backgroundColor: color }}\n                  >\n                    {name || 'New Status'}\n                  </span>\n                </div>\n              </div>\n            )}\n            \n            {/* Error */}\n            {error && (\n              <p className=\"text-red-500 text-sm\">{error}</p>\n            )}\n          </div>\n          \n          {/* Buttons */}\n          <div className=\"flex justify-end gap-3 mt-6\">\n            <button\n              type=\"button\"\n              onClick={handleClose}\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSaving || !name.trim()}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors\"\n            >\n              {isSaving ? (\n                <Loader className=\"w-4 h-4 animate-spin\" />\n              ) : (\n                <Check className=\"w-4 h-4\" />\n              )}\n              Save\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n/**\n * CustomizableDropdown Component\n * \n * @param {object} props\n * @param {string} props.endpoint - Supabase table name (e.g., 'crm_statuses')\n * @param {string} [props.table] - Alias for endpoint (for compatibility)\n * @param {string} props.value - Current selected value (ID)\n * @param {function} props.onChange - Callback when value changes\n * @param {string} [props.label] - Label text\n * @param {string} [props.placeholder] - Placeholder text\n * @param {boolean} [props.allowEmpty] - Allow empty selection\n * @param {string} [props.emptyLabel] - Label for empty option\n * @param {boolean} [props.showColor] - Force show color indicator\n * @param {string} [props.className] - Additional CSS classes\n */\nexport default function CustomizableDropdown({\n  endpoint,\n  table,\n  value,\n  onChange,\n  label,\n  placeholder = 'Select...',\n  allowEmpty = true,\n  emptyLabel = 'None',\n  showColor,\n  className = '',\n}) {\n  // Support both 'endpoint' and 'table' prop names\n  const tableName = endpoint || table;\n  const [options, setOptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  \n  const config = ENDPOINT_CONFIG[tableName] || {};\n  // Allow showColor prop to override config\n  const displayColor = showColor !== undefined ? showColor : config.hasColor;\n  \n  // Fetch options from Supabase\n  const fetchOptions = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      \n      // Get current user\n      const { data: userData } = await supabase.auth.getUser();\n      const userId = userData?.user?.id;\n      \n      // Query: get system defaults (user_id = NULL) and user's custom options\n      let query = supabase.from(tableName).select('*');\n      \n      // Order by sort_order if available, otherwise by name\n      if (config.hasSortOrder) {\n        query = query.order('sort_order', { ascending: true });\n      } else {\n        query = query.order('name', { ascending: true });\n      }\n      \n      const { data, error } = await query;\n      \n      if (error) throw error;\n      \n      // Filter to show system defaults (user_id = null) + user's custom options\n      const filtered = (data || []).filter(item => \n        item.user_id === null || item.user_id === userId\n      );\n      \n      setOptions(filtered);\n    } catch (err) {\n      console.error(`Error fetching ${tableName} options:`, err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [tableName, config.hasSortOrder]);\n  \n  useEffect(() => {\n    fetchOptions();\n  }, [fetchOptions]);\n  \n  // Save new option\n  const handleSaveOption = async ({ name, color }) => {\n    setIsSaving(true);\n    try {\n      const { data: userData } = await supabase.auth.getUser();\n      const userId = userData?.user?.id;\n      \n      if (!userId) {\n        throw new Error('Not authenticated');\n      }\n      \n      // Build insert data\n      const insertData = {\n        name,\n        user_id: userId,\n      };\n      \n      if (config.hasColor && color) {\n        insertData.color = color;\n      }\n      \n      if (config.hasSortOrder) {\n        // Get max sort_order and add 1\n        const maxSort = options.reduce((max, opt) => \n          Math.max(max, opt.sort_order || 0), 0\n        );\n        insertData.sort_order = maxSort + 1;\n      }\n      \n      const { data, error } = await supabase\n        .from(tableName)\n        .insert(insertData)\n        .select()\n        .single();\n      \n      if (error) throw error;\n      \n      // Refresh options\n      await fetchOptions();\n      \n      // Select the newly created option\n      if (data?.id) {\n        onChange(data.id);\n      }\n      \n      return data;\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  // Get display value\n  const selectedOption = options.find(opt => opt.id === value);\n  const displayValue = selectedOption?.name || placeholder;\n  \n  return (\n    <div className={`relative ${className}`}>\n      {/* Label */}\n      {label && (\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {label}\n        </label>\n      )}\n      \n      {/* Custom Dropdown */}\n      <div className=\"relative\">\n        <button\n          type=\"button\"\n          onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n          disabled={isLoading}\n          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-left flex items-center justify-between focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50\"\n        >\n          <div className=\"flex items-center gap-2 truncate\">\n            {/* Color indicator for statuses */}\n            {displayColor && selectedOption?.color && (\n              <span \n                className=\"w-3 h-3 rounded-full flex-shrink-0\"\n                style={{ backgroundColor: selectedOption.color }}\n              />\n            )}\n            <span className={!selectedOption ? 'text-gray-400' : ''}>\n              {isLoading ? 'Loading...' : displayValue}\n            </span>\n          </div>\n          <ChevronDown className={`w-4 h-4 text-gray-400 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} />\n        </button>\n        \n        {/* Dropdown Menu */}\n        {isDropdownOpen && (\n          <>\n            {/* Backdrop to close dropdown */}\n            <div \n              className=\"fixed inset-0 z-10\" \n              onClick={() => setIsDropdownOpen(false)}\n            />\n            \n            <div className=\"absolute z-20 mt-1 w-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-auto\">\n              {/* Empty option */}\n              {allowEmpty && (\n                <button\n                  type=\"button\"\n                  onClick={() => { onChange(''); setIsDropdownOpen(false); }}\n                  className={`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                    !value ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                  }`}\n                >\n                  <span className=\"text-gray-400\">{emptyLabel}</span>\n                </button>\n              )}\n              \n              {/* Options */}\n              {options.map(option => (\n                <button\n                  key={option.id}\n                  type=\"button\"\n                  onClick={() => { onChange(option.id); setIsDropdownOpen(false); }}\n                  className={`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 ${\n                    value === option.id ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                  }`}\n                >\n                  {/* Color indicator */}\n                  {displayColor && option.color && (\n                    <span \n                      className=\"w-3 h-3 rounded-full flex-shrink-0\"\n                      style={{ backgroundColor: option.color }}\n                    />\n                  )}\n                  <span className=\"text-gray-900 dark:text-white\">{option.name}</span>\n                  {/* Show badge if user-created */}\n                  {option.user_id && (\n                    <span className=\"ml-auto text-xs text-gray-400\">Custom</span>\n                  )}\n                </button>\n              ))}\n              \n              {/* Divider */}\n              <div className=\"border-t border-gray-200 dark:border-gray-600 my-1\" />\n              \n              {/* Add Button */}\n              <button\n                type=\"button\"\n                onClick={() => { setIsDropdownOpen(false); setIsModalOpen(true); }}\n                className=\"w-full px-3 py-2 text-left text-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 flex items-center gap-2\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Add New Option\n              </button>\n            </div>\n          </>\n        )}\n      </div>\n      \n      {/* Add Option Modal */}\n      <AddOptionModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        onSave={handleSaveOption}\n        endpoint={tableName}\n        isSaving={isSaving}\n      />\n    </div>\n  );\n}\n\n/**\n * Helper hook to load dropdown options externally\n */\nexport const useDropdownOptions = (endpoint) => {\n  const [options, setOptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  \n  useEffect(() => {\n    const fetchOptions = async () => {\n      try {\n        const { data: userData } = await supabase.auth.getUser();\n        const userId = userData?.user?.id;\n        \n        const { data, error } = await supabase\n          .from(endpoint)\n          .select('*')\n          .order('name', { ascending: true });\n        \n        if (error) throw error;\n        \n        const filtered = (data || []).filter(item => \n          item.user_id === null || item.user_id === userId\n        );\n        \n        setOptions(filtered);\n      } catch (err) {\n        console.error(`Error fetching ${endpoint}:`, err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    fetchOptions();\n  }, [endpoint]);\n  \n  return { options, isLoading };\n};\n","/**\n * ProductCRM Component\n * \n * Product Sourcing CRM for tracking sourced products from ASIN to listing.\n * Supports multi-owner collaboration, shipping tracking, and quick listing.\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { userAPI, supabase } from '../lib/supabase';\nimport CustomizableDropdown from '../components/crm/CustomizableDropdown';\nimport {\n  Package,\n  Search,\n  Plus,\n  Filter,\n  ChevronRight,\n  ChevronDown,\n  ExternalLink,\n  Users,\n  Truck,\n  CheckCircle,\n  Clock,\n  AlertCircle,\n  X,\n  RefreshCw,\n  MoreVertical,\n  Edit,\n  Trash2,\n  ShoppingBag,\n  Zap,\n  ThumbsUp,\n  ThumbsDown,\n  Eye,\n  Inbox,\n  Loader,\n  ListTodo,\n  Check,\n  MessageSquare,\n  GripVertical\n} from 'lucide-react';\n\n// Status configuration with colors matching the database seed\nconst STATUS_CONFIG = {\n  'Sourcing': { color: '#3B82F6', bgClass: 'bg-blue-100 dark:bg-blue-900/30', textClass: 'text-blue-700 dark:text-blue-300' },\n  'Review': { color: '#8B5CF6', bgClass: 'bg-purple-100 dark:bg-purple-900/30', textClass: 'text-purple-700 dark:text-purple-300' },\n  'Negotiating': { color: '#F97316', bgClass: 'bg-orange-100 dark:bg-orange-900/30', textClass: 'text-orange-700 dark:text-orange-300' },\n  'Committed': { color: '#06B6D4', bgClass: 'bg-cyan-100 dark:bg-cyan-900/30', textClass: 'text-cyan-700 dark:text-cyan-300' },\n  'Ordered': { color: '#6366F1', bgClass: 'bg-indigo-100 dark:bg-indigo-900/30', textClass: 'text-indigo-700 dark:text-indigo-300' },\n  'Shipped': { color: '#EAB308', bgClass: 'bg-yellow-100 dark:bg-yellow-900/30', textClass: 'text-yellow-700 dark:text-yellow-300' },\n  'In Transit': { color: '#FBBF24', bgClass: 'bg-amber-100 dark:bg-amber-900/30', textClass: 'text-amber-700 dark:text-amber-300' },\n  'Delivered': { color: '#10B981', bgClass: 'bg-emerald-100 dark:bg-emerald-900/30', textClass: 'text-emerald-700 dark:text-emerald-300' },\n  'To Receive': { color: '#F97316', bgClass: 'bg-orange-100 dark:bg-orange-900/30', textClass: 'text-orange-700 dark:text-orange-300' },\n  'Completed': { color: '#22C55E', bgClass: 'bg-green-100 dark:bg-green-900/30', textClass: 'text-green-700 dark:text-green-300' },\n  'Returned': { color: '#EF4444', bgClass: 'bg-red-100 dark:bg-red-900/30', textClass: 'text-red-700 dark:text-red-300' },\n  'Cancelled': { color: '#9CA3AF', bgClass: 'bg-gray-100 dark:bg-gray-700/30', textClass: 'text-gray-700 dark:text-gray-300' },\n  'Problem': { color: '#DC2626', bgClass: 'bg-red-100 dark:bg-red-900/30', textClass: 'text-red-700 dark:text-red-300' }\n};\n\n// Shipping status configuration\nconst SHIPPING_STATUS_CONFIG = {\n  'pending': { icon: Clock, label: 'Pending', color: 'text-gray-500' },\n  'label_created': { icon: Package, label: 'Label Created', color: 'text-blue-500' },\n  'picked_up': { icon: Truck, label: 'Picked Up', color: 'text-blue-500' },\n  'in_transit': { icon: Truck, label: 'In Transit', color: 'text-yellow-500' },\n  'out_for_delivery': { icon: Truck, label: 'Out for Delivery', color: 'text-orange-500' },\n  'delivered': { icon: CheckCircle, label: 'Delivered', color: 'text-green-500' },\n  'exception': { icon: AlertCircle, label: 'Exception', color: 'text-red-500' },\n  'returned': { icon: Package, label: 'Returned', color: 'text-red-500' }\n};\n\n// Status Badge Component\nconst StatusBadge = ({ status }) => {\n  const config = STATUS_CONFIG[status] || STATUS_CONFIG['Sourcing'];\n  return (\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.bgClass} ${config.textClass}`}>\n      {status}\n    </span>\n  );\n};\n\n// Shipping Status Badge\nconst ShippingBadge = ({ status }) => {\n  const config = SHIPPING_STATUS_CONFIG[status] || SHIPPING_STATUS_CONFIG['pending'];\n  const Icon = config.icon;\n  return (\n    <span className={`inline-flex items-center gap-1 text-xs ${config.color}`}>\n      <Icon className=\"w-3 h-3\" />\n      {config.label}\n    </span>\n  );\n};\n\n// Owner Avatars Component\nconst OwnerAvatars = ({ owners, max = 3 }) => {\n  if (!owners || owners.length === 0) return <span className=\"text-gray-400 text-sm\">No owner</span>;\n  \n  const displayed = owners.slice(0, max);\n  const remaining = owners.length - max;\n  \n  return (\n    <div className=\"flex items-center -space-x-2\">\n      {displayed.map((owner, i) => (\n        <div\n          key={owner.id || i}\n          className=\"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs font-medium border-2 border-white dark:border-gray-800\"\n          title={owner.name || owner.email}\n        >\n          {(owner.name || owner.email || '?')[0].toUpperCase()}\n        </div>\n      ))}\n      {remaining > 0 && (\n        <div className=\"w-7 h-7 rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center text-gray-600 dark:text-gray-300 text-xs font-medium border-2 border-white dark:border-gray-800\">\n          +{remaining}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Product Row Component\nconst ProductRow = ({ product, isSelected, onSelect, onEdit }) => {\n  const amazonUrl = `https://amazon.com/dp/${product.asin}`;\n  \n  return (\n    <tr \n      className={`border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer transition-colors ${\n        isSelected ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n      }`}\n      onClick={() => onSelect(product)}\n    >\n      {/* Image */}\n      <td className=\"py-3 px-4\">\n        <div className=\"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700 flex items-center justify-center\">\n          {product.image_url ? (\n            <img src={product.image_url} alt={product.asin} className=\"w-full h-full object-cover\" />\n          ) : (\n            <Package className=\"w-6 h-6 text-gray-400\" />\n          )}\n        </div>\n      </td>\n      \n      {/* ASIN */}\n      <td className=\"py-3 px-4\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"font-mono text-sm\">{product.asin}</span>\n          <a\n            href={amazonUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            onClick={e => e.stopPropagation()}\n            className=\"text-gray-400 hover:text-blue-500\"\n          >\n            <ExternalLink className=\"w-3.5 h-3.5\" />\n          </a>\n        </div>\n        {product.title && (\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs mt-0.5\">\n            {product.title}\n          </p>\n        )}\n      </td>\n      \n      {/* Status */}\n      <td className=\"py-3 px-4\">\n        <StatusBadge status={product.status?.name || 'Sourcing'} />\n      </td>\n      \n      {/* Owners */}\n      <td className=\"py-3 px-4\">\n        <OwnerAvatars owners={product.owners} />\n      </td>\n      \n      {/* Decision */}\n      <td className=\"py-3 px-4\">\n        <span className={`text-sm ${product.decision === 'sell' ? 'text-green-600' : product.decision === 'keep' ? 'text-blue-600' : 'text-gray-400'}`}>\n          {product.decision ? product.decision.charAt(0).toUpperCase() + product.decision.slice(1) : '-'}\n        </span>\n      </td>\n      \n      {/* Shipping */}\n      <td className=\"py-3 px-4\">\n        {product.tracking_number ? (\n          <ShippingBadge status={product.shipping_status} />\n        ) : (\n          <span className=\"text-gray-400 text-sm\">-</span>\n        )}\n      </td>\n      \n      {/* Actions */}\n      <td className=\"py-3 px-4\">\n        <button\n          onClick={e => { e.stopPropagation(); onEdit(product); }}\n          className=\"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n        >\n          <MoreVertical className=\"w-4 h-4\" />\n        </button>\n      </td>\n    </tr>\n  );\n};\n\n// Add Product Modal\nconst AddProductModal = ({ isOpen, onClose, onAdd, statuses }) => {\n  const [asin, setAsin] = useState('');\n  const [statusId, setStatusId] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (statuses?.length && !statusId) {\n      // Default to \"Initial Contact\" (first status in the list)\n      const defaultStatus = statuses.find(s => s.name === 'Initial Contact') || statuses[0];\n      if (defaultStatus) setStatusId(defaultStatus.id);\n    }\n  }, [statuses, statusId]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    \n    // Validate ASIN\n    const cleanAsin = asin.trim().toUpperCase();\n    if (!/^B[0-9A-Z]{9}$/.test(cleanAsin)) {\n      setError('Invalid ASIN format. Should be like B0XXXXXXXXX');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    try {\n      await onAdd({ asin: cleanAsin, status_id: statusId });\n      setAsin('');\n      onClose();\n    } catch (err) {\n      setError(err.message || 'Failed to add product');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Add Product</h3>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                ASIN\n              </label>\n              <input\n                type=\"text\"\n                value={asin}\n                onChange={e => setAsin(e.target.value)}\n                placeholder=\"B0XXXXXXXXX\"\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n            \n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                Initial Status\n              </label>\n              <select\n                value={statusId}\n                onChange={e => setStatusId(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                {statuses?.map(status => (\n                  <option key={status.id} value={status.id}>{status.name}</option>\n                ))}\n              </select>\n            </div>\n            \n            {error && (\n              <p className=\"text-red-500 text-sm\">{error}</p>\n            )}\n          </div>\n          \n          <div className=\"flex justify-end gap-3 mt-6\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\n            >\n              {isSubmitting ? <RefreshCw className=\"w-4 h-4 animate-spin\" /> : <Plus className=\"w-4 h-4\" />}\n              Add Product\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\n// Decline Task Dialog\nconst DeclineTaskDialog = ({ isOpen, onClose, onConfirm, isSubmitting }) => {\n  const [reason, setReason] = useState('');\n  \n  if (!isOpen) return null;\n  \n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" onClick={onClose}>\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-sm p-5 mx-4\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Decline Task</h3>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n        <div className=\"space-y-4\">\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            Optionally provide a reason for declining this task.\n          </p>\n          <textarea\n            value={reason}\n            onChange={e => setReason(e.target.value)}\n            placeholder=\"Reason (optional)...\"\n            rows={3}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none\"\n          />\n        </div>\n        <div className=\"flex justify-end gap-3 mt-6\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={() => onConfirm(reason)}\n            disabled={isSubmitting}\n            className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2\"\n          >\n            {isSubmitting ? <Loader className=\"w-4 h-4 animate-spin\" /> : <X className=\"w-4 h-4\" />}\n            Decline\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Product Detail Panel\nconst ProductDetailPanel = ({ product, onClose, onUpdate, statuses, collaborationTypes, contactSources, marketplaces }) => {\n  // Task state\n  const [tasks, setTasks] = useState([]);\n  const [tasksLoading, setTasksLoading] = useState(false);\n  const [taskActionLoading, setTaskActionLoading] = useState({});\n  const [declineDialogOpen, setDeclineDialogOpen] = useState(false);\n  const [taskToDecline, setTaskToDecline] = useState(null);\n  const [toastMessage, setToastMessage] = useState(null);\n  \n  // ACF (ASIN Correlation Finder) inline state\n  const [acfExpanded, setAcfExpanded] = useState(false);\n  const [acfLoading, setAcfLoading] = useState(false);\n  const [acfResults, setAcfResults] = useState(null);\n  const [acfFeedback, setAcfFeedback] = useState({});\n  const [acfSavingFeedback, setAcfSavingFeedback] = useState({});\n  \n  // Resizable panel state\n  const [panelWidth, setPanelWidth] = useState(() => {\n    const saved = localStorage.getItem('crm-panel-width');\n    return saved ? parseInt(saved, 10) : 672; // 672px = max-w-2xl default\n  });\n  const [isResizing, setIsResizing] = useState(false);\n  const panelRef = useRef(null);\n  \n  // Handle panel resize\n  useEffect(() => {\n    if (!isResizing) return;\n    \n    const handleMouseMove = (e) => {\n      const newWidth = window.innerWidth - e.clientX;\n      const clampedWidth = Math.min(800, Math.max(400, newWidth));\n      setPanelWidth(clampedWidth);\n    };\n    \n    const handleMouseUp = () => {\n      setIsResizing(false);\n      localStorage.setItem('crm-panel-width', panelWidth.toString());\n    };\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [isResizing, panelWidth]);\n  \n  // Handle ESC key to close panel\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape' && product) {\n        onClose();\n      }\n    };\n    \n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [product, onClose]);\n  \n  // Fetch tasks for this product's ASIN\n  const fetchTasks = useCallback(async () => {\n    if (!product?.asin) return;\n    \n    setTasksLoading(true);\n    try {\n      const token = await userAPI.getAuthToken();\n      const response = await fetch(`/.netlify/functions/influencer-tasks?asin=${product.asin}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      if (data.success) {\n        // Filter to only pending tasks\n        const pendingTasks = (data.tasks || []).filter(t => t.status === 'pending');\n        setTasks(pendingTasks);\n      }\n    } catch (err) {\n      console.error('Failed to load tasks:', err);\n    } finally {\n      setTasksLoading(false);\n    }\n  }, [product?.asin]);\n  \n  // Fetch tasks when product changes\n  useEffect(() => {\n    if (product?.asin) {\n      fetchTasks();\n      // Reset ACF state when product changes\n      setAcfResults(null);\n      setAcfFeedback({});\n      setAcfExpanded(false);\n    } else {\n      setTasks([]);\n    }\n  }, [product?.asin, fetchTasks]);\n  \n  // Show toast notification\n  const showToast = (message, type = 'success') => {\n    setToastMessage({ message, type });\n    setTimeout(() => setToastMessage(null), 3000);\n  };\n  \n  // ACF: Run correlation search\n  const runAcfCorrelation = async () => {\n    if (!product?.asin) return;\n    \n    setAcfLoading(true);\n    setAcfExpanded(true);\n    \n    try {\n      const token = await userAPI.getAuthToken();\n      // Use the correct correlation check endpoint\n      const response = await fetch('/.netlify/functions/trigger-asin-correlation-v2', {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}` \n        },\n        body: JSON.stringify({ asin: product.asin, action: 'check' })\n      });\n      const data = await response.json();\n      \n      if (data.exists && data.correlations?.length > 0) {\n        setAcfResults(data);\n        // Load existing feedback\n        const feedbackResponse = await fetch(`/.netlify/functions/correlation-feedback?action=get&search_asin=${product.asin}`, {\n          headers: { 'Authorization': `Bearer ${token}` }\n        });\n        const feedbackData = await feedbackResponse.json();\n        if (feedbackData.success && feedbackData.feedback) {\n          const feedbackMap = {};\n          feedbackData.feedback.forEach(f => {\n            feedbackMap[f.similar_asin] = { decision: f.decision };\n          });\n          setAcfFeedback(feedbackMap);\n        }\n      } else {\n        setAcfResults({ asin: product.asin, correlations: [], notFound: true });\n      }\n    } catch (err) {\n      console.error('ACF correlation error:', err);\n      showToast('Failed to fetch correlations', 'error');\n    } finally {\n      setAcfLoading(false);\n    }\n  };\n  \n  // ACF: Save feedback (accept/decline)\n  const saveAcfFeedback = async (candidateAsin, decision) => {\n    if (!product?.asin) return;\n    \n    setAcfSavingFeedback(prev => ({ ...prev, [candidateAsin]: true }));\n    \n    try {\n      const token = await userAPI.getAuthToken();\n      const response = await fetch('/.netlify/functions/correlation-feedback', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          action: 'save',\n          search_asin: product.asin,\n          candidate_asin: candidateAsin,\n          decision\n        })\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        setAcfFeedback(prev => ({\n          ...prev,\n          [candidateAsin]: { decision }\n        }));\n        showToast(decision === 'accepted' ? 'Correlation accepted!' : 'Correlation declined');\n      }\n    } catch (err) {\n      console.error('Failed to save ACF feedback:', err);\n      showToast('Failed to save feedback', 'error');\n    } finally {\n      setAcfSavingFeedback(prev => ({ ...prev, [candidateAsin]: false }));\n    }\n  };\n  \n  // Accept task handler\n  const handleAcceptTask = async (taskId) => {\n    setTaskActionLoading(prev => ({ ...prev, [taskId]: 'accepting' }));\n    try {\n      const token = await userAPI.getAuthToken();\n      await fetch('/.netlify/functions/influencer-tasks', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ taskId, action: 'complete' })\n      });\n      showToast('Task completed successfully!');\n      fetchTasks();\n    } catch (err) {\n      console.error('Failed to accept task:', err);\n      showToast('Failed to complete task', 'error');\n    } finally {\n      setTaskActionLoading(prev => ({ ...prev, [taskId]: null }));\n    }\n  };\n  \n  // Decline task handler\n  const handleDeclineTask = async (reason) => {\n    if (!taskToDecline) return;\n    \n    const taskId = taskToDecline.id;\n    setTaskActionLoading(prev => ({ ...prev, [taskId]: 'declining' }));\n    try {\n      const token = await userAPI.getAuthToken();\n      await fetch('/.netlify/functions/influencer-tasks', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({ taskId, action: 'dismiss', reason })\n      });\n      showToast('Task declined');\n      setDeclineDialogOpen(false);\n      setTaskToDecline(null);\n      fetchTasks();\n    } catch (err) {\n      console.error('Failed to decline task:', err);\n      showToast('Failed to decline task', 'error');\n    } finally {\n      setTaskActionLoading(prev => ({ ...prev, [taskId]: null }));\n    }\n  };\n  \n  if (!product) return null;\n\n  const amazonUrl = `https://amazon.com/dp/${product.asin}`;\n\n  return (\n    <>\n      {/* Overlay for click-outside-to-close */}\n      <div \n        className=\"fixed inset-0 bg-black/30 z-30\"\n        onClick={onClose}\n      />\n      \n      <div \n        ref={panelRef}\n        style={{ width: `${panelWidth}px` }}\n        className=\"fixed inset-y-0 right-0 bg-white dark:bg-gray-800 shadow-xl border-l border-gray-200 dark:border-gray-700 overflow-y-auto z-40\"\n      >\n        {/* Drag handle for resizing */}\n        <div\n          className=\"absolute left-0 top-0 bottom-0 w-1.5 cursor-ew-resize bg-transparent hover:bg-blue-500/30 transition-colors z-50\"\n          onMouseDown={(e) => {\n            e.preventDefault();\n            setIsResizing(true);\n          }}\n        >\n          <div className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-12 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity\">\n            <GripVertical className=\"w-3 h-3 text-gray-400\" />\n          </div>\n        </div>\n        \n        {/* Header with prominent close button */}\n        <div className=\"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between z-10\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Product Details</h3>\n          <button \n            onClick={onClose} \n            className=\"w-8 h-8 flex items-center justify-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n            title=\"Close panel (ESC)\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n      \n      <div className=\"p-6 space-y-5\">\n        {/* Compact Product Info Row - Image + ASIN side by side */}\n        <div className=\"flex gap-4 items-start\">\n          {/* Small Image */}\n          <div className=\"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700\">\n            {product.image_url ? (\n              <img src={product.image_url} alt={product.asin} className=\"w-full h-full object-contain\" />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <Package className=\"w-8 h-8 text-gray-400\" />\n              </div>\n            )}\n          </div>\n          \n          {/* ASIN Info */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <span className=\"font-mono text-sm font-medium\">{product.asin}</span>\n              <a\n                href={amazonUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-700\"\n                title=\"View on Amazon\"\n              >\n                <ExternalLink className=\"w-4 h-4\" />\n              </a>\n            </div>\n            {product.title && (\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\">{product.title}</p>\n            )}\n          </div>\n        </div>\n        \n        {/* Status */}\n        <CustomizableDropdown\n          table=\"crm_statuses\"\n          value={product.status_id}\n          onChange={id => onUpdate({ status_id: id })}\n          label=\"Status\"\n          showColor={true}\n          placeholder=\"Select status...\"\n        />\n        \n        {/* Decision */}\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Decision</h4>\n          <select\n            value={product.decision || ''}\n            onChange={e => onUpdate({ decision: e.target.value || null })}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n          >\n            <option value=\"\">Undecided</option>\n            <option value=\"keep\">Keep</option>\n            <option value=\"sell\">Sell</option>\n          </select>\n        </div>\n        \n        {/* Marketplace (when Sell) */}\n        {product.decision === 'sell' && (\n          <div className=\"space-y-4\">\n            <CustomizableDropdown\n              table=\"crm_marketplaces\"\n              value={product.marketplace_id}\n              onChange={id => onUpdate({ marketplace_id: id })}\n              label=\"Marketplace\"\n              placeholder=\"Select marketplace...\"\n            />\n            {/* Quick List Section - Shows when eBay is selected */}\n            {product.marketplace?.name === 'eBay' && (\n              <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 space-y-3 border border-green-200 dark:border-green-800\">\n                <div className=\"flex items-center gap-2\">\n                  <ShoppingBag className=\"w-5 h-5 text-green-600\" />\n                  <h4 className=\"text-sm font-medium text-green-800 dark:text-green-200\">Quick List to eBay</h4>\n                </div>\n                <p className=\"text-xs text-green-700 dark:text-green-300\">\n                  Create an eBay listing for this product with one click.\n                </p>\n                <a \n                  href={`/auto-list?asin=${product.asin}`}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2\"\n                >\n                  <ShoppingBag className=\"w-4 h-4\" />\n                  Open Quick List\n                </a>\n              </div>\n            )}\n          </div>\n        )}\n        \n        {/* Task Review Section - Shows for Delivered products */}\n        {product.status?.name === 'Delivered' && !product.decision && (\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n               Product Delivered - Take Action\n            </h4>\n            <div className=\"bg-emerald-50 dark:bg-emerald-900/20 rounded-lg p-4 space-y-3\">\n              <p className=\"text-sm text-emerald-800 dark:text-emerald-200\">\n                This product has been delivered! What would you like to do with it?\n              </p>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => onUpdate({ decision: 'sell' })}\n                  className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2\"\n                >\n                  <ThumbsUp className=\"w-4 h-4\" />\n                  Sell It\n                </button>\n                <button\n                  onClick={() => onUpdate({ decision: 'keep' })}\n                  className=\"flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center justify-center gap-2\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  Keep It\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Owners */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Owners</h4>\n            <button className=\"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1\">\n              <Plus className=\"w-3.5 h-3.5\" /> Add\n            </button>\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            {product.owners?.map((owner, i) => (\n              <span \n                key={owner.id || i}\n                className=\"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-sm\"\n              >\n                <span className=\"w-5 h-5 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white text-xs\">\n                  {(owner.name || owner.email || '?')[0].toUpperCase()}\n                </span>\n                {owner.name || owner.email}\n                {owner.is_primary && <span className=\"text-xs text-blue-600\">(Primary)</span>}\n              </span>\n            ))}\n            {(!product.owners || product.owners.length === 0) && (\n              <span className=\"text-gray-400 text-sm\">No owners assigned</span>\n            )}\n          </div>\n        </div>\n        \n        {/* Collaboration Type */}\n        <CustomizableDropdown\n          table=\"crm_collaboration_types\"\n          value={product.collaboration_type_id}\n          onChange={id => onUpdate({ collaboration_type_id: id })}\n          label=\"Collaboration Type\"\n          placeholder=\"Select type...\"\n        />\n        \n        {/* Contact Source */}\n        <CustomizableDropdown\n          table=\"crm_contact_sources\"\n          value={product.contact_source_id}\n          onChange={id => onUpdate({ contact_source_id: id })}\n          label=\"Contact Source\"\n          placeholder=\"Select source...\"\n        />\n        \n        {/* Requirements */}\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Requirements</h4>\n          <textarea\n            value={product.requirements || ''}\n            onChange={e => onUpdate({ requirements: e.target.value })}\n            placeholder=\"Enter brand requirements, notes...\"\n            rows={4}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none\"\n          />\n        </div>\n        \n        {/* Shipping */}\n        {product.tracking_number && (\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Shipping</h4>\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-500\">Tracking</span>\n                <span className=\"font-mono text-sm\">{product.tracking_number}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-500\">Carrier</span>\n                <span className=\"text-sm uppercase\">{product.carrier || 'Auto-detect'}</span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-gray-500\">Status</span>\n                <ShippingBadge status={product.shipping_status} />\n              </div>\n              {product.shipping_eta && (\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-500\">ETA</span>\n                  <span className=\"text-sm\">{new Date(product.shipping_eta).toLocaleDateString()}</span>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        \n        {/* Add Tracking (if no tracking) */}\n        {!product.tracking_number && (\n          <div className=\"space-y-2\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Shipping</h4>\n            <button className=\"w-full px-4 py-2 border border-dashed border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 rounded-lg hover:border-gray-400 hover:text-gray-700 flex items-center justify-center gap-2\">\n              <Truck className=\"w-4 h-4\" />\n              Add Tracking Number\n            </button>\n          </div>\n        )}\n        \n        {/* ACF Inline Section */}\n        <div className=\"space-y-2 pt-4 border-t border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">ASIN Correlation Finder</h4>\n            {acfResults && (\n              <button\n                onClick={() => setAcfExpanded(!acfExpanded)}\n                className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n              >\n                {acfExpanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronRight className=\"w-4 h-4\" />}\n              </button>\n            )}\n          </div>\n          \n          {/* Run Correlation Button */}\n          <button\n            onClick={runAcfCorrelation}\n            disabled={acfLoading}\n            className=\"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center justify-center gap-2\"\n          >\n            {acfLoading ? (\n              <>\n                <Loader className=\"w-4 h-4 animate-spin\" />\n                Finding correlations...\n              </>\n            ) : (\n              <>\n                <Zap className=\"w-4 h-4\" />\n                {acfResults ? 'Refresh Correlations' : 'Find Similar Products'}\n              </>\n            )}\n          </button>\n          \n          {/* ACF Results */}\n          {acfExpanded && acfResults && (\n            <div className=\"mt-3 space-y-2\">\n              {acfResults.notFound ? (\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center\">\n                  <p className=\"text-sm text-gray-500\">No correlations found for this ASIN.</p>\n                  <p className=\"text-xs text-gray-400 mt-1\">Try syncing from the full ACF page for fresh data.</p>\n                </div>\n              ) : acfResults.correlations?.length > 0 ? (\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg divide-y divide-gray-200 dark:divide-gray-600 max-h-64 overflow-y-auto\">\n                  {acfResults.correlations.map((item, idx) => (\n                    <div key={item.asin || idx} className=\"p-3 flex items-center gap-3\">\n                      {/* Thumbnail */}\n                      <div className=\"w-10 h-10 flex-shrink-0 rounded overflow-hidden bg-gray-100 dark:bg-gray-600\">\n                        {item.imageUrl ? (\n                          <img src={item.imageUrl} alt=\"\" className=\"w-full h-full object-contain\" />\n                        ) : (\n                          <div className=\"w-full h-full flex items-center justify-center\">\n                            <Package className=\"w-4 h-4 text-gray-400\" />\n                          </div>\n                        )}\n                      </div>\n                      \n                      {/* Info */}\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-xs font-mono text-gray-600 dark:text-gray-400\">{item.asin}</p>\n                        <p className=\"text-xs text-gray-500 truncate\">{item.title || 'No title'}</p>\n                        {item.suggestedType && (\n                          <span className={`inline-block mt-0.5 text-xs px-1.5 py-0.5 rounded ${\n                            item.suggestedType === 'variation'\n                              ? 'bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300'\n                              : 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'\n                          }`}>\n                            {item.suggestedType}\n                          </span>\n                        )}\n                      </div>\n                      \n                      {/* Actions */}\n                      <div className=\"flex items-center gap-1\">\n                        {acfFeedback[item.asin]?.decision ? (\n                          <span className={`text-xs px-2 py-1 rounded-full ${\n                            acfFeedback[item.asin].decision === 'accepted'\n                              ? 'bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300'\n                              : 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300'\n                          }`}>\n                            {acfFeedback[item.asin].decision === 'accepted' ? '' : ''}\n                          </span>\n                        ) : (\n                          <>\n                            <button\n                              onClick={() => saveAcfFeedback(item.asin, 'accepted')}\n                              disabled={acfSavingFeedback[item.asin]}\n                              className=\"p-1.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded hover:bg-green-200 dark:hover:bg-green-900/50 disabled:opacity-50\"\n                              title=\"Accept\"\n                            >\n                              {acfSavingFeedback[item.asin] ? (\n                                <Loader className=\"w-3.5 h-3.5 animate-spin\" />\n                              ) : (\n                                <ThumbsUp className=\"w-3.5 h-3.5\" />\n                              )}\n                            </button>\n                            <button\n                              onClick={() => saveAcfFeedback(item.asin, 'declined')}\n                              disabled={acfSavingFeedback[item.asin]}\n                              className=\"p-1.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50 disabled:opacity-50\"\n                              title=\"Decline\"\n                            >\n                              {acfSavingFeedback[item.asin] ? (\n                                <Loader className=\"w-3.5 h-3.5 animate-spin\" />\n                              ) : (\n                                <ThumbsDown className=\"w-3.5 h-3.5\" />\n                              )}\n                            </button>\n                          </>\n                        )}\n                        <a\n                          href={`https://amazon.com/dp/${item.asin}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"p-1.5 text-gray-400 hover:text-blue-500\"\n                          title=\"View on Amazon\"\n                        >\n                          <ExternalLink className=\"w-3.5 h-3.5\" />\n                        </a>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center\">\n                  <p className=\"text-sm text-gray-500\">No correlations found.</p>\n                </div>\n              )}\n              \n              {/* Link to full ACF page */}\n              <a\n                href={`/asin-lookup?asin=${product.asin}`}\n                className=\"text-xs text-purple-600 hover:text-purple-700 flex items-center gap-1\"\n              >\n                <ExternalLink className=\"w-3 h-3\" />\n                Open full ACF page\n              </a>\n            </div>\n          )}\n        </div>\n        \n        {/* Pending Tasks Section */}\n        <div className=\"space-y-2\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2\">\n              <ListTodo className=\"w-4 h-4\" />\n              Pending Tasks\n              {tasks.length > 0 && (\n                <span className=\"px-1.5 py-0.5 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 text-xs font-medium rounded-full\">\n                  {tasks.length}\n                </span>\n              )}\n            </h4>\n            <button \n              onClick={fetchTasks}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n              title=\"Refresh tasks\"\n            >\n              <RefreshCw className={`w-4 h-4 ${tasksLoading ? 'animate-spin' : ''}`} />\n            </button>\n          </div>\n          \n          {tasksLoading && tasks.length === 0 ? (\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center\">\n              <Loader className=\"w-5 h-5 animate-spin mx-auto text-gray-400\" />\n              <p className=\"text-sm text-gray-500 mt-2\">Loading tasks...</p>\n            </div>\n          ) : tasks.length === 0 ? (\n            <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 text-center\">\n              <CheckCircle className=\"w-6 h-6 mx-auto text-green-500 mb-2\" />\n              <p className=\"text-sm text-gray-500\">No pending tasks</p>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {tasks.map(task => (\n                <div \n                  key={task.id}\n                  className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 flex items-center gap-3\"\n                >\n                  {/* Task info */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-lg\">{task.marketplace === 'US' ? '' : task.marketplace === 'CA' ? '' : task.marketplace === 'UK' ? '' : task.marketplace === 'DE' ? '' : ''}</span>\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-white\">{task.marketplace || 'Upload'} Task</span>\n                    </div>\n                    <p className=\"text-xs text-gray-500 truncate mt-0.5\">\n                      {task.product_title || task.asin}\n                    </p>\n                  </div>\n                  \n                  {/* Action buttons */}\n                  <div className=\"flex items-center gap-1.5\">\n                    {/* Accept button */}\n                    <button\n                      onClick={() => handleAcceptTask(task.id)}\n                      disabled={!!taskActionLoading[task.id]}\n                      className=\"p-2 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 disabled:opacity-50 transition-colors\"\n                      title=\"Accept task\"\n                    >\n                      {taskActionLoading[task.id] === 'accepting' ? (\n                        <Loader className=\"w-4 h-4 animate-spin\" />\n                      ) : (\n                        <Check className=\"w-4 h-4\" />\n                      )}\n                    </button>\n                    \n                    {/* Decline button */}\n                    <button\n                      onClick={() => { setTaskToDecline(task); setDeclineDialogOpen(true); }}\n                      disabled={!!taskActionLoading[task.id]}\n                      className=\"p-2 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 disabled:opacity-50 transition-colors\"\n                      title=\"Decline task\"\n                    >\n                      {taskActionLoading[task.id] === 'declining' ? (\n                        <Loader className=\"w-4 h-4 animate-spin\" />\n                      ) : (\n                        <X className=\"w-4 h-4\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n        \n        {/* Done button at bottom */}\n        <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={onClose}\n            className=\"w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium\"\n          >\n            Done\n          </button>\n        </div>\n      </div>\n      \n      {/* Decline Task Dialog */}\n      <DeclineTaskDialog\n        isOpen={declineDialogOpen}\n        onClose={() => { setDeclineDialogOpen(false); setTaskToDecline(null); }}\n        onConfirm={handleDeclineTask}\n        isSubmitting={taskToDecline ? !!taskActionLoading[taskToDecline.id] : false}\n      />\n      \n      {/* Toast Notification */}\n      {toastMessage && (\n        <div className={`fixed bottom-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 ${\n          toastMessage.type === 'error' \n            ? 'bg-red-600 text-white' \n            : 'bg-green-600 text-white'\n        }`}>\n          {toastMessage.type === 'error' ? (\n            <AlertCircle className=\"w-4 h-4\" />\n          ) : (\n            <CheckCircle className=\"w-4 h-4\" />\n          )}\n          {toastMessage.message}\n        </div>\n      )}\n    </div>\n    </>\n  );\n};\n\n// Main ProductCRM Component\nexport default function ProductCRM() {\n  const [searchParams] = useSearchParams();\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [isAddModalOpen, setIsAddModalOpen] = useState(false);\n  \n  // View mode: 'all' or 'delivered'\n  const [viewMode, setViewMode] = useState(searchParams.get('view') === 'delivered' ? 'delivered' : 'all');\n  \n  // Lookup data\n  const [statuses, setStatuses] = useState([]);\n  const [collaborationTypes, setCollaborationTypes] = useState([]);\n  const [contactSources, setContactSources] = useState([]);\n  const [marketplaces, setMarketplaces] = useState([]);\n\n  // Fetch products\n  const fetchProducts = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      \n      // Build query - note: can't join auth.users directly, get owners separately\n      let query = supabase\n        .from('sourced_products')\n        .select(`\n          *,\n          status:crm_statuses(id, name, color),\n          collaboration_type:crm_collaboration_types(id, name),\n          contact_source:crm_contact_sources(id, name),\n          marketplace:crm_marketplaces(id, name, has_quick_list),\n          owners:product_owners(owner_id, is_primary)\n        `)\n        .order('created_at', { ascending: false });\n      \n      if (searchQuery) {\n        query = query.ilike('asin', `%${searchQuery}%`);\n      }\n      \n      if (statusFilter) {\n        query = query.eq('status_id', statusFilter);\n      }\n      \n      const { data, error } = await query;\n      \n      if (error) throw error;\n      \n      // Transform owners data - we'll show owner_id for now\n      // In production, you'd want a users lookup table or Edge Function\n      const transformedData = data?.map(product => ({\n        ...product,\n        owners: product.owners?.map(po => ({\n          id: po.owner_id,\n          is_primary: po.is_primary,\n          // Use first 8 chars of ID as placeholder name\n          name: `User ${po.owner_id?.slice(0, 8) || '?'}`,\n          email: null\n        })) || []\n      }));\n      \n      setProducts(transformedData || []);\n    } catch (err) {\n      console.error('Error fetching products:', err);\n      setError(err.message);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [searchQuery, statusFilter]);\n\n  // Fetch lookup data\n  const fetchLookups = useCallback(async () => {\n    try {\n      const [statusRes, collabRes, sourceRes, marketRes] = await Promise.all([\n        supabase.from('crm_statuses').select('*').order('sort_order'),\n        supabase.from('crm_collaboration_types').select('*').order('name'),\n        supabase.from('crm_contact_sources').select('*').order('name'),\n        supabase.from('crm_marketplaces').select('*').order('name')\n      ]);\n      \n      setStatuses(statusRes.data || []);\n      setCollaborationTypes(collabRes.data || []);\n      setContactSources(sourceRes.data || []);\n      setMarketplaces(marketRes.data || []);\n    } catch (err) {\n      console.error('Error fetching lookups:', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchProducts();\n    fetchLookups();\n  }, [fetchProducts, fetchLookups]);\n\n  // Fetch product data from Keepa (with fallback to direct image URL)\n  const fetchKeepaData = async (asin) => {\n    try {\n      const token = await userAPI.getAuthToken();\n      const response = await fetch(`/.netlify/functions/keepa-lookup?asin=${asin}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      // Check if response is JSON (not HTML error page)\n      const contentType = response.headers.get('content-type');\n      if (!response.ok || !contentType?.includes('application/json')) {\n        console.log('Keepa function unavailable, using direct image URL');\n        return null;\n      }\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.log('Keepa fetch failed, using direct image URL:', err.message);\n      return null;\n    }\n  };\n\n  // Add product\n  const handleAddProduct = async (productData) => {\n    const { data: userData } = await supabase.auth.getUser();\n    \n    // Try to fetch Keepa data for image and title (falls back to direct Keepa URL)\n    const keepaData = await fetchKeepaData(productData.asin);\n    \n    // Use Keepa's direct image URL - works without API call\n    // Format: https://images.keepa.com/600/{ASIN}.jpg\n    const enrichedData = {\n      ...productData,\n      user_id: userData.user.id,\n      image_url: keepaData?.imageUrl || `https://images.keepa.com/600/${productData.asin}.jpg`,\n      title: keepaData?.title || null\n    };\n    \n    const { data, error } = await supabase\n      .from('sourced_products')\n      .insert(enrichedData)\n      .select()\n      .single();\n    \n    if (error) throw error;\n    \n    // Note: Owners are intentionally left empty - user can add owners manually\n    \n    fetchProducts();\n  };\n\n  // Update product\n  const handleUpdateProduct = async (updates) => {\n    if (!selectedProduct) return;\n    \n    const { error } = await supabase\n      .from('sourced_products')\n      .update(updates)\n      .eq('id', selectedProduct.id);\n    \n    if (error) {\n      console.error('Error updating product:', error);\n      return;\n    }\n    \n    // Update local state\n    setSelectedProduct(prev => ({ ...prev, ...updates }));\n    fetchProducts();\n  };\n\n  // Filtered products - apply view mode filter\n  const filteredProducts = products.filter(product => {\n    // If in delivered view, only show products with \"Delivered\" status\n    if (viewMode === 'delivered') {\n      return product.status?.name === 'Delivered';\n    }\n    return true;\n  });\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"px-4 sm:px-6 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {viewMode === 'delivered' ? 'Delivered Items' : 'Product CRM'}\n              </h1>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                {viewMode === 'delivered' \n                  ? 'Products ready for listing - review and create eBay listings'\n                  : 'Track your sourced products from discovery to listing'\n                }\n              </p>\n            </div>\n            <button\n              onClick={() => setIsAddModalOpen(true)}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Add Product\n            </button>\n          </div>\n        </div>\n      </div>\n      \n      {/* Filters */}\n      <div className=\"px-4 sm:px-6 py-4\">\n        <div className=\"flex items-center gap-4 flex-wrap\">\n          {/* View Mode Toggle */}\n          <div className=\"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1\">\n            <button\n              onClick={() => setViewMode('all')}\n              className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${\n                viewMode === 'all' \n                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm' \n                  : 'text-gray-600 dark:text-gray-300 hover:text-gray-900'\n              }`}\n            >\n              All Products\n            </button>\n            <button\n              onClick={() => setViewMode('delivered')}\n              className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${\n                viewMode === 'delivered' \n                  ? 'bg-white dark:bg-gray-600 text-gray-900 dark:text-white shadow-sm' \n                  : 'text-gray-600 dark:text-gray-300 hover:text-gray-900'\n              }`}\n            >\n              <Inbox className=\"w-4 h-4\" />\n              Delivered\n            </button>\n          </div>\n          \n          {/* Search */}\n          <div className=\"relative flex-1 max-w-sm\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={e => setSearchQuery(e.target.value)}\n              placeholder=\"Search by ASIN...\"\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            />\n          </div>\n          \n          {/* Status Filter */}\n          <select\n            value={statusFilter}\n            onChange={e => setStatusFilter(e.target.value)}\n            className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            disabled={viewMode === 'delivered'}\n          >\n            <option value=\"\">All Statuses</option>\n            {statuses.map(status => (\n              <option key={status.id} value={status.id}>{status.name}</option>\n            ))}\n          </select>\n          \n          {/* Refresh */}\n          <button\n            onClick={fetchProducts}\n            className=\"p-2 text-gray-400 hover:text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg\"\n          >\n            <RefreshCw className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 sm:px-6 pb-8\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\">\n          {isLoading ? (\n            <div className=\"p-12 text-center\">\n              <RefreshCw className=\"w-8 h-8 text-gray-400 animate-spin mx-auto\" />\n              <p className=\"text-gray-500 mt-2\">Loading products...</p>\n            </div>\n          ) : error ? (\n            <div className=\"p-12 text-center\">\n              <AlertCircle className=\"w-8 h-8 text-red-400 mx-auto\" />\n              <p className=\"text-red-500 mt-2\">{error}</p>\n              <button onClick={fetchProducts} className=\"mt-4 text-blue-600 hover:text-blue-700\">\n                Try again\n              </button>\n            </div>\n          ) : filteredProducts.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <Package className=\"w-12 h-12 text-gray-300 mx-auto\" />\n              <p className=\"text-gray-500 mt-2\">No products found</p>\n              <button\n                onClick={() => setIsAddModalOpen(true)}\n                className=\"mt-4 text-blue-600 hover:text-blue-700 flex items-center gap-1 mx-auto\"\n              >\n                <Plus className=\"w-4 h-4\" /> Add your first product\n              </button>\n            </div>\n          ) : (\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50 dark:bg-gray-700/50\">\n                <tr>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">Image</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">ASIN</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">Status</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">Owners</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">Decision</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4\">Shipping</th>\n                  <th className=\"text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider py-3 px-4 w-12\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredProducts.map(product => (\n                  <ProductRow\n                    key={product.id}\n                    product={product}\n                    isSelected={selectedProduct?.id === product.id}\n                    onSelect={setSelectedProduct}\n                    onEdit={setSelectedProduct}\n                  />\n                ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n      \n      {/* Add Product Modal */}\n      <AddProductModal\n        isOpen={isAddModalOpen}\n        onClose={() => setIsAddModalOpen(false)}\n        onAdd={handleAddProduct}\n        statuses={statuses}\n      />\n      \n      {/* Detail Panel */}\n      <ProductDetailPanel\n        product={selectedProduct}\n        onClose={() => setSelectedProduct(null)}\n        onUpdate={handleUpdateProduct}\n        statuses={statuses}\n        collaborationTypes={collaborationTypes}\n        contactSources={contactSources}\n        marketplaces={marketplaces}\n      />\n    </div>\n  );\n}\n"],"names":["__iconNode","EllipsisVertical","createLucideIcon","GripVertical","Inbox","ListTodo","ThumbsDown","ThumbsUp","Truck","COLOR_OPTIONS","ENDPOINT_CONFIG","AddOptionModal","isOpen","onClose","onSave","endpoint","isSaving","name","setName","useState","color","setColor","error","setError","config","handleSubmit","e","err","handleClose","jsx","jsxs","X","colorName","value","Loader","Check","CustomizableDropdown","table","onChange","label","placeholder","allowEmpty","emptyLabel","showColor","className","tableName","options","setOptions","isLoading","setIsLoading","isModalOpen","setIsModalOpen","setIsSaving","isDropdownOpen","setIsDropdownOpen","displayColor","fetchOptions","useCallback","userData","supabase","userId","_a","query","data","filtered","item","useEffect","handleSaveOption","insertData","maxSort","max","opt","selectedOption","displayValue","ChevronDown","Fragment","option","Plus","STATUS_CONFIG","SHIPPING_STATUS_CONFIG","Clock","Package","CheckCircle","AlertCircle","StatusBadge","status","ShippingBadge","Icon","OwnerAvatars","owners","displayed","remaining","owner","i","ProductRow","product","isSelected","onSelect","onEdit","amazonUrl","ExternalLink","MoreVertical","AddProductModal","onAdd","statuses","asin","setAsin","statusId","setStatusId","isSubmitting","setIsSubmitting","defaultStatus","s","cleanAsin","RefreshCw","DeclineTaskDialog","onConfirm","reason","setReason","ProductDetailPanel","onUpdate","collaborationTypes","contactSources","marketplaces","tasks","setTasks","tasksLoading","setTasksLoading","taskActionLoading","setTaskActionLoading","declineDialogOpen","setDeclineDialogOpen","taskToDecline","setTaskToDecline","toastMessage","setToastMessage","acfExpanded","setAcfExpanded","acfLoading","setAcfLoading","acfResults","setAcfResults","acfFeedback","setAcfFeedback","acfSavingFeedback","setAcfSavingFeedback","panelWidth","setPanelWidth","saved","isResizing","setIsResizing","panelRef","useRef","handleMouseMove","newWidth","clampedWidth","handleMouseUp","handleKeyDown","fetchTasks","token","userAPI","pendingTasks","t","showToast","message","type","runAcfCorrelation","feedbackData","feedbackMap","f","saveAcfFeedback","candidateAsin","decision","prev","handleAcceptTask","taskId","handleDeclineTask","id","ShoppingBag","_b","Eye","_c","ChevronRight","Zap","_d","idx","task","ProductCRM","searchParams","useSearchParams","products","setProducts","searchQuery","setSearchQuery","statusFilter","setStatusFilter","selectedProduct","setSelectedProduct","isAddModalOpen","setIsAddModalOpen","viewMode","setViewMode","setStatuses","setCollaborationTypes","setContactSources","setMarketplaces","fetchProducts","transformedData","po","fetchLookups","statusRes","collabRes","sourceRes","marketRes","fetchKeepaData","response","contentType","handleAddProduct","productData","keepaData","enrichedData","handleUpdateProduct","updates","filteredProducts","Search"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}