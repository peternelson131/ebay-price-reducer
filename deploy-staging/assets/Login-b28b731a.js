import{j as e,a as b}from"./index-0231291c.js";import{r as f}from"./vendor-react-4c62d1cf.js";import"./vendor-supabase-5edd3635.js";import"./vendor-query-4b12add6.js";function V({onLogin:v}){const[c,m]=f.useState("login"),[t,P]=f.useState({username:"",email:"",password:"",confirmPassword:"",name:""}),[d,y]=f.useState({email:"",username:""}),[u,g]=f.useState({code:"",newPassword:"",confirmPassword:""}),[x,h]=f.useState(!1),[r,n]=f.useState({}),[w,N]=f.useState(null),j=(s,a)=>{N({type:s,message:a}),setTimeout(()=>N(null),5e3)},p=s=>{P(a=>({...a,[s.target.name]:s.target.value}))},C=()=>{const s={};return t.username.trim()||(s.username="Username is required"),t.password?t.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",n(s),Object.keys(s).length===0},S=()=>{const s={};return t.name.trim()||(s.name="Full name is required"),t.username.trim()||(s.username="Username is required"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(s.email="Please enter a valid email address"):s.email="Email is required",t.password?t.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",t.password!==t.confirmPassword&&(s.confirmPassword="Passwords do not match"),n(s),Object.keys(s).length===0},F=()=>{const s={};return!d.email.trim()&&!d.username.trim()&&(s.general="Please provide either email or username"),d.email&&!/\S+@\S+\.\S+/.test(d.email)&&(s.email="Please enter a valid email address"),n(s),Object.keys(s).length===0},k=()=>{const s={};return u.code.trim()||(s.code="Reset code is required"),u.newPassword?u.newPassword.length<6&&(s.newPassword="Password must be at least 6 characters"):s.newPassword="New password is required",u.newPassword!==u.confirmPassword&&(s.confirmPassword="Passwords do not match"),n(s),Object.keys(s).length===0},R=async s=>{var a;if(s.preventDefault(),!!C()){h(!0),n({});try{const i=await b.signIn(t.email||t.username,t.password);if(i.error)n({general:i.error.message});else{const O={username:i.data.user.email,name:((a=i.data.user.user_metadata)==null?void 0:a.name)||i.data.user.email,email:i.data.user.email,id:i.data.user.id};j("success","Login successful! Redirecting..."),setTimeout(()=>v(O),1e3)}}catch(i){n({general:i.message||"Login failed. Please try again."})}finally{h(!1)}}},E=async s=>{if(s.preventDefault(),!!S()){h(!0),n({});try{const a=await b.signUp(t.email,t.password,{name:t.name,username:t.username});a.error?n({general:a.error.message}):(j("success","Account created successfully! Please check your email to verify your account."),m("login"))}catch(a){n({general:a.message||"An error occurred during signup"})}finally{h(!1)}}},D=async s=>{if(s.preventDefault(),!!F()){h(!0),n({});try{await new Promise(a=>setTimeout(a,1500)),d.email&&await b.resetPassword(d.email),j("success","Reset code sent! Check your email."),m("reset")}catch{n({general:"Failed to send reset code. Please try again."})}finally{h(!1)}}},A=async s=>{if(s.preventDefault(),!!k()){h(!0),n({});try{await new Promise(a=>setTimeout(a,1500)),j("success","Password reset successful! You can now login."),m("login"),g({code:"",newPassword:"",confirmPassword:""})}catch{n({general:"Password reset failed. Please try again."})}finally{h(!1)}}},o=s=>`
    w-full px-3 py-2.5 bg-theme-primary border rounded-lg text-theme-primary placeholder-text-tertiary
    focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent transition-colors
    ${s?"border-error":"border-theme"}
  `,l="block text-sm font-medium text-theme-secondary mb-1.5",L=()=>e.jsxs("form",{onSubmit:R,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:l,children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",value:t.username,onChange:p,className:o(r.username),placeholder:"Enter your username"}),r.username&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.username})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:l,children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",value:t.password,onChange:p,className:o(r.password),placeholder:"Enter your password"}),r.password&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.password})]}),r.general&&e.jsx("div",{className:"bg-error/10 border border-error/30 rounded-lg p-3",children:e.jsx("p",{className:"text-error text-sm",children:r.general})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 bg-theme-primary border-theme rounded text-accent focus:ring-accent"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-theme-secondary",children:"Remember me"})]}),e.jsx("button",{type:"button",onClick:()=>m("forgot"),className:"text-sm text-accent hover:text-accent-hover transition-colors",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-accent text-white py-2.5 px-4 rounded-lg hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:x?"Signing In...":"Sign In"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm text-theme-tertiary",children:"Don't have an account? "}),e.jsx("button",{type:"button",onClick:()=>m("signup"),className:"text-accent hover:text-accent-hover text-sm font-medium transition-colors",children:"Sign up"})]})]}),q=()=>e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:l,children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:t.name,onChange:p,className:o(r.name),placeholder:"Enter your full name"}),r.name&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-username",className:l,children:"Username"}),e.jsx("input",{id:"signup-username",name:"username",type:"text",value:t.username,onChange:p,className:o(r.username),placeholder:"Choose a username"}),r.username&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.username})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:l,children:"Email Address"}),e.jsx("input",{id:"email",name:"email",type:"email",value:t.email,onChange:p,className:o(r.email),placeholder:"Enter your email address"}),r.email&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signup-password",className:l,children:"Password"}),e.jsx("input",{id:"signup-password",name:"password",type:"password",value:t.password,onChange:p,className:o(r.password),placeholder:"Create a password"}),r.password&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:l,children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:t.confirmPassword,onChange:p,className:o(r.confirmPassword),placeholder:"Confirm your password"}),r.confirmPassword&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.confirmPassword})]}),r.general&&e.jsx("div",{className:"bg-error/10 border border-error/30 rounded-lg p-3",children:e.jsx("p",{className:"text-error text-sm",children:r.general})}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-accent text-white py-2.5 px-4 rounded-lg hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:x?"Creating Account...":"Create Account"}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm text-theme-tertiary",children:"Already have an account? "}),e.jsx("button",{type:"button",onClick:()=>m("login"),className:"text-accent hover:text-accent-hover text-sm font-medium transition-colors",children:"Sign in"})]})]}),I=()=>e.jsxs("form",{onSubmit:D,className:"space-y-5",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-theme-primary",children:"Reset Your Credentials"}),e.jsx("p",{className:"text-sm text-theme-tertiary mt-1",children:"Enter your email or username and we'll send you a reset code"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"forgot-email",className:l,children:"Email Address"}),e.jsx("input",{id:"forgot-email",type:"email",value:d.email,onChange:s=>y(a=>({...a,email:s.target.value})),className:o(r.email),placeholder:"Enter your email address"}),r.email&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.email})]}),e.jsx("div",{className:"text-center text-sm text-theme-tertiary",children:"— OR —"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"forgot-username",className:l,children:"Username"}),e.jsx("input",{id:"forgot-username",type:"text",value:d.username,onChange:s=>y(a=>({...a,username:s.target.value})),className:o(!1),placeholder:"Enter your username"})]}),r.general&&e.jsx("div",{className:"bg-error/10 border border-error/30 rounded-lg p-3",children:e.jsx("p",{className:"text-error text-sm",children:r.general})}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-accent text-white py-2.5 px-4 rounded-lg hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:x?"Sending Reset Code...":"Send Reset Code"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>m("login"),className:"text-accent hover:text-accent-hover text-sm transition-colors",children:"Back to Login"})})]}),U=()=>e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-theme-primary",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-theme-tertiary mt-1",children:"Enter the reset code sent to your email and create a new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-code",className:l,children:"Reset Code"}),e.jsx("input",{id:"reset-code",type:"text",value:u.code,onChange:s=>g(a=>({...a,code:s.target.value})),className:o(r.code),placeholder:"Enter reset code"}),r.code&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.code})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"new-password",className:l,children:"New Password"}),e.jsx("input",{id:"new-password",type:"password",value:u.newPassword,onChange:s=>g(a=>({...a,newPassword:s.target.value})),className:o(r.newPassword),placeholder:"Enter new password"}),r.newPassword&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.newPassword})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirm-new-password",className:l,children:"Confirm Password"}),e.jsx("input",{id:"confirm-new-password",type:"password",value:u.confirmPassword,onChange:s=>g(a=>({...a,confirmPassword:s.target.value})),className:o(r.confirmPassword),placeholder:"Confirm new password"}),r.confirmPassword&&e.jsx("p",{className:"text-error text-sm mt-1",children:r.confirmPassword})]}),r.general&&e.jsx("div",{className:"bg-error/10 border border-error/30 rounded-lg p-3",children:e.jsx("p",{className:"text-error text-sm",children:r.general})}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-accent text-white py-2.5 px-4 rounded-lg hover:bg-accent-hover focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:x?"Resetting Password...":"Reset Password"}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"button",onClick:()=>m("forgot"),className:"text-accent hover:text-accent-hover text-sm transition-colors",children:"Back to Reset"})})]});return e.jsxs("div",{className:"min-h-screen bg-theme-primary flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold text-theme-primary",children:"eBay Price Reducer"}),e.jsxs("p",{className:"mt-2 text-sm text-theme-tertiary",children:[c==="login"&&"Sign in to your account",c==="signup"&&"Create your account",c==="forgot"&&"Reset your credentials",c==="reset"&&"Create new password"]})]})}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-theme-surface py-8 px-4 border border-theme rounded-xl sm:px-10",children:[w&&e.jsx("div",{className:`rounded-lg p-3 mb-6 ${w.type==="success"?"bg-success/10 border border-success/30":"bg-error/10 border border-error/30"}`,children:e.jsx("div",{className:`text-sm ${w.type==="success"?"text-success":"text-error"}`,children:w.message})}),c==="login"&&L(),c==="signup"&&q(),c==="forgot"&&I(),c==="reset"&&U(),e.jsxs("div",{className:"mt-8 pt-6 border-t border-theme",children:[e.jsx("h3",{className:"text-sm font-medium text-theme-secondary mb-3",children:"Features:"}),e.jsxs("ul",{className:"text-xs text-theme-tertiary space-y-1.5",children:[e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Automated price reduction strategies"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Real-time market analysis"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Custom minimum price protection"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Multiple pricing algorithms"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Detailed price history tracking"]}),e.jsxs("li",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-1 bg-accent rounded-full mr-2"}),"Bulk listing management"]})]})]})]})})]})}export{V as default};
//# sourceMappingURL=Login-b28b731a.js.map
