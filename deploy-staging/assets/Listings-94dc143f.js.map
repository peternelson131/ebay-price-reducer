{"version":3,"file":"Listings-94dc143f.js","sources":["../../node_modules/lucide-react/dist/esm/icons/tree-palm.js","../../src/data/strategies.js","../../src/pages/Listings.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.562.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4\", key: \"foxbe7\" }],\n  [\n    \"path\",\n    { d: \"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3\", key: \"18arnh\" }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35\",\n      key: \"ywahnh\"\n    }\n  ],\n  [\"path\", { d: \"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14\", key: \"ft0feo\" }]\n];\nconst TreePalm = createLucideIcon(\"tree-palm\", __iconNode);\n\nexport { __iconNode, TreePalm as default };\n//# sourceMappingURL=tree-palm.js.map\n","// Strategy helper functions for the application\n// Strategies are now persisted in the database via strategiesAPI\n\nimport { strategiesAPI } from '../lib/supabase'\n\n// Helper function to get active strategies for use in listings\nexport const getActiveStrategies = async () => {\n  const strategies = await strategiesAPI.getStrategies()\n  return strategies\n}\n\n// Helper function to get strategy by ID\nexport const getStrategyById = async (id) => {\n  try {\n    return await strategiesAPI.getStrategy(id)\n  } catch (error) {\n    console.error('Error fetching strategy:', error)\n    return null\n  }\n}\n\n// Helper function to get strategy display name\nexport const getStrategyDisplayName = (strategy) => {\n  if (!strategy) return 'No strategy'\n  const amount = strategy.strategy_type === 'percentage'\n    ? `${strategy.reduction_percentage}%`\n    : `$${strategy.reduction_amount}`\n  return `${strategy.name} (${amount} every ${strategy.interval_days} days)`\n}\n\n// Get all strategies (alias for consistency)\nexport const getAllStrategies = async () => {\n  return await strategiesAPI.getStrategies()\n}\n\n// Legacy strategy mapping for backward compatibility\nconst LEGACY_STRATEGIES = {\n  'fixed_percentage': {\n    name: 'Fixed Percentage',\n    strategy_type: 'percentage',\n    reduction_percentage: 10,\n    reduction_amount: 0,\n    interval_days: 7\n  },\n  'market_based': {\n    name: 'Market Based',\n    strategy_type: 'percentage',\n    reduction_percentage: 5,\n    reduction_amount: 0,\n    interval_days: 14\n  },\n  'time_based': {\n    name: 'Time Based',\n    strategy_type: 'percentage',\n    reduction_percentage: 15,\n    reduction_amount: 0,\n    interval_days: 30\n  }\n}\n\n// Backward compatible strategy display info helper\n// Accepts listing object and strategies array\n// Returns strategy object or null\n// SYNCHRONOUS - no async calls\nexport const getStrategyDisplayInfo = (listing, strategies = []) => {\n  if (!listing) return null\n\n  // Try new system first: listing.strategy_id (UUID reference)\n  if (listing.strategy_id) {\n    const strategy = strategies.find(s => s.id === listing.strategy_id)\n    if (strategy) return strategy\n  }\n\n  // Fall back to old system: listing.reduction_strategy (string value)\n  if (listing.reduction_strategy) {\n    // Check if it's a UUID (new system value stored in old column)\n    const strategyById = strategies.find(s => s.id === listing.reduction_strategy)\n    if (strategyById) return strategyById\n\n    // Fall back to legacy string mapping\n    const legacyStrategy = LEGACY_STRATEGIES[listing.reduction_strategy]\n    if (legacyStrategy) return legacyStrategy\n  }\n\n  return null\n}","import { useState, useMemo, useEffect } from 'react'\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { Link, useNavigate } from 'react-router-dom'\nimport { listingsAPI, userAPI, supabase } from '../lib/supabase'\nimport apiService from '../services/api'\nimport { getActiveStrategies, getStrategyById, getStrategyDisplayName, getStrategyDisplayInfo } from '../data/strategies'\nimport { Search, X, AlertCircle, Plus, Filter, RefreshCw, Palmtree } from 'lucide-react'\n\n// Helper functions for localStorage\nconst VALID_COLUMNS = [\n  'image', 'title', 'quantity', 'currentPrice', 'minimumPrice',\n  'priceReductionEnabled', 'strategy', 'listingAge', 'actions'\n]\n\nconst getStoredColumnOrder = () => {\n  try {\n    const stored = localStorage.getItem('listings-column-order')\n    if (stored) {\n      const parsed = JSON.parse(stored)\n      // Filter out invalid columns (like viewCount, watchCount, suggestedPrice)\n      const filtered = parsed.filter(col => VALID_COLUMNS.includes(col))\n      // If filtering removed columns, return default to ensure all valid columns are present\n      if (filtered.length !== parsed.length || filtered.length !== VALID_COLUMNS.length) {\n        return VALID_COLUMNS\n      }\n      return filtered\n    }\n  } catch (error) {\n    console.warn('Failed to load column order from localStorage:', error)\n  }\n  return VALID_COLUMNS\n}\n\nconst getStoredVisibleColumns = () => {\n  try {\n    const stored = localStorage.getItem('listings-visible-columns')\n    if (stored) {\n      const parsed = JSON.parse(stored)\n      // Filter out invalid columns and create new object with only valid columns\n      const filtered = {}\n      let hasInvalidColumns = false\n\n      for (const col of VALID_COLUMNS) {\n        if (col in parsed) {\n          filtered[col] = parsed[col]\n        } else {\n          filtered[col] = true // Default to visible if not in stored config\n        }\n      }\n\n      // Check if there were any invalid columns in the stored config\n      for (const col in parsed) {\n        if (!VALID_COLUMNS.includes(col)) {\n          hasInvalidColumns = true\n          break\n        }\n      }\n\n      // If we found invalid columns, clean up localStorage\n      if (hasInvalidColumns) {\n        localStorage.setItem('listings-visible-columns', JSON.stringify(filtered))\n      }\n\n      return filtered\n    }\n  } catch (error) {\n    console.warn('Failed to load visible columns from localStorage:', error)\n  }\n  return {\n    image: true,\n    title: true,\n    quantity: true,\n    currentPrice: true,\n    minimumPrice: true,\n    priceReductionEnabled: true,\n    strategy: true,\n    listingAge: true,\n    actions: true\n  }\n}\n\nconst getStoredItemsPerPage = () => {\n  try {\n    const stored = localStorage.getItem('listings-items-per-page')\n    if (stored) {\n      const value = parseInt(stored, 10)\n      if ([10, 25, 50, 100].includes(value)) {\n        return value\n      }\n    }\n  } catch (error) {\n    console.warn('Failed to load items per page from localStorage:', error)\n  }\n  return 25 // Default to 25 items per page\n}\n\nexport default function Listings() {\n  const navigate = useNavigate()\n  const [status, setStatus] = useState('Active')\n  const [searchTerm, setSearchTerm] = useState('')\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' })\n  const [visibleColumns, setVisibleColumns] = useState(getStoredVisibleColumns())\n  const [columnOrder, setColumnOrder] = useState(getStoredColumnOrder())\n  const [draggedColumn, setDraggedColumn] = useState(null)\n  const [filters, setFilters] = useState([])\n  const [notification, setNotification] = useState(null)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [itemsPerPage, setItemsPerPage] = useState(getStoredItemsPerPage())\n  const [isSyncing, setIsSyncing] = useState(false)\n  const queryClient = useQueryClient()\n\n  const showNotification = (type, message) => {\n    setNotification({ type, message })\n    setTimeout(() => setNotification(null), 5000)\n  }\n\n  const handleSyncEbay = async () => {\n    setIsSyncing(true)\n    try {\n      const { data: { session } } = await supabase.auth.getSession()\n      if (!session?.access_token) {\n        showNotification('error', 'Please log in to sync listings')\n        return\n      }\n\n      const response = await fetch('/.netlify/functions/sync-ebay-listings', {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${session.access_token}`,\n          'Content-Type': 'application/json'\n        }\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || data.message || 'Sync failed')\n      }\n\n      if (data.success && data.summary) {\n        const { totalImported, totalUpdated } = data.summary\n        showNotification('success', `Synced ${totalImported} listings (${totalUpdated} updated)`)\n        // Refresh the listings data\n        queryClient.invalidateQueries(['listings'])\n      } else {\n        showNotification('success', 'Sync completed')\n        queryClient.invalidateQueries(['listings'])\n      }\n    } catch (error) {\n      console.error('Sync error:', error)\n      showNotification('error', `Sync failed: ${error.message}`)\n    } finally {\n      setIsSyncing(false)\n    }\n  }\n\n  // Save column order to localStorage when it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem('listings-column-order', JSON.stringify(columnOrder))\n    } catch (error) {\n      console.warn('Failed to save column order to localStorage:', error)\n    }\n  }, [columnOrder])\n\n  // Save visible columns to localStorage when they change\n  useEffect(() => {\n    try {\n      localStorage.setItem('listings-visible-columns', JSON.stringify(visibleColumns))\n    } catch (error) {\n      console.warn('Failed to save visible columns to localStorage:', error)\n    }\n  }, [visibleColumns])\n\n  // Save items per page to localStorage when it changes\n  useEffect(() => {\n    try {\n      localStorage.setItem('listings-items-per-page', itemsPerPage.toString())\n    } catch (error) {\n      console.warn('Failed to save items per page to localStorage:', error)\n    }\n  }, [itemsPerPage])\n\n  // Reset to page 1 when filters, search, or status changes\n  useEffect(() => {\n    setCurrentPage(1)\n  }, [searchTerm, filters, status])\n\n  const { data: listings, isLoading, error, refetch } = useQuery(\n    ['listings', { status }],\n    () => listingsAPI.getListings({ status }),\n    {\n      keepPreviousData: true,\n      refetchOnWindowFocus: false,\n      refetchOnMount: false, // Don't refetch on mount if data exists\n      staleTime: 6 * 60 * 60 * 1000, // Consider data fresh for 6 hours (matches scheduled sync interval)\n      cacheTime: 12 * 60 * 60 * 1000, // Keep cached data for 12 hours\n      retry: 1, // Only retry once on failure\n      refetchInterval: false, // Disable automatic polling (use scheduled sync instead)\n      refetchIntervalInBackground: false,\n      refetchOnReconnect: 'always' // Refetch when network reconnects\n    }\n  )\n\n  const { data: userProfile, isLoading: isUserLoading } = useQuery(\n    ['userProfile'],\n    () => userAPI.getProfile(),\n    {\n      retry: 1,\n      refetchOnWindowFocus: false\n    }\n  )\n\n  // Fetch active strategies\n  const { data: strategies = [], isLoading: isStrategiesLoading } = useQuery(\n    ['strategies', 'active'],\n    () => getActiveStrategies(),\n    {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // Consider data fresh for 5 minutes\n      cacheTime: 30 * 60 * 1000 // Keep cached data for 30 minutes\n    }\n  )\n\n  // Fetch vacation mode status\n  const { data: vacationMode, isLoading: isVacationLoading } = useQuery(\n    ['vacationMode'],\n    async () => {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) return false\n      const { data } = await supabase\n        .from('users')\n        .select('vacation_mode')\n        .eq('id', user.id)\n        .single()\n      return data?.vacation_mode || false\n    },\n    {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 60 * 1000\n    }\n  )\n\n  // Toggle vacation mode mutation\n  const toggleVacationMutation = useMutation(\n    async (newValue) => {\n      const { data: { user } } = await supabase.auth.getUser()\n      if (!user) throw new Error('Not logged in')\n      const { error } = await supabase\n        .from('users')\n        .update({ \n          vacation_mode: newValue,\n          vacation_mode_since: newValue ? new Date().toISOString() : null\n        })\n        .eq('id', user.id)\n      if (error) throw error\n      return newValue\n    },\n    {\n      onSuccess: (newValue) => {\n        queryClient.setQueryData(['vacationMode'], newValue)\n        showNotification('success', newValue \n          ? 'ðŸ–ï¸ Vacation mode ON - price reductions paused'\n          : 'âœ… Vacation mode OFF - price reductions will resume'\n        )\n      },\n      onError: (error) => {\n        showNotification('error', `Failed to toggle vacation mode: ${error.message}`)\n      }\n    }\n  )\n\n  // Removed: Manual price reduction feature\n  // const reducePriceMutation = useMutation(...)\n\n  const endListingMutation = useMutation(listingsAPI.endListing, {\n    onSuccess: () => {\n      showNotification('success', 'Listing closed successfully')\n      queryClient.invalidateQueries('listings')\n    },\n    onError: (error) => {\n      showNotification('error', error.message || 'Failed to close listing')\n    }\n  })\n\n  const updateMinimumPriceMutation = useMutation(\n    ({ listingId, minimumPrice }) => listingsAPI.updateListing(listingId, { minimum_price: minimumPrice }),\n    {\n      onMutate: async ({ listingId, minimumPrice }) => {\n        // Cancel outgoing refetches\n        await queryClient.cancelQueries(['listings', { status }])\n\n        // Snapshot previous value\n        const previousListings = queryClient.getQueryData(['listings', { status }])\n\n        // Optimistically update\n        queryClient.setQueryData(['listings', { status }], (old) => {\n          if (!old) return old\n          return old.map(listing =>\n            listing.id === listingId\n              ? { ...listing, minimum_price: minimumPrice }\n              : listing\n          )\n        })\n\n        return { previousListings }\n      },\n      onSuccess: () => {\n        showNotification('success', 'Minimum price updated')\n      },\n      onError: (error, variables, context) => {\n        // Rollback on error\n        if (context?.previousListings) {\n          queryClient.setQueryData(['listings', { status }], context.previousListings)\n        }\n        showNotification('error', error.message || 'Failed to update minimum price')\n      },\n      onSettled: () => {\n        // Refetch in background to ensure data consistency\n        queryClient.invalidateQueries(['listings', { status }])\n      }\n    }\n  )\n\n  const updateStrategyMutation = useMutation(\n    ({ listingId, strategyId }) => listingsAPI.updateListing(listingId, {\n      strategy_id: strategyId || null\n    }),\n    {\n      onMutate: async ({ listingId, strategyId }) => {\n        await queryClient.cancelQueries(['listings', { status }])\n        const previousListings = queryClient.getQueryData(['listings', { status }])\n\n        queryClient.setQueryData(['listings', { status }], (old) => {\n          if (!old) return old\n          return old.map(listing =>\n            listing.id === listingId\n              ? { ...listing, strategy_id: strategyId }\n              : listing\n          )\n        })\n\n        return { previousListings }\n      },\n      onSuccess: (data) => {\n        const strategyName = data.strategy_id\n          ? strategies.find(s => s.id === data.strategy_id)?.name || 'selected strategy'\n          : 'No strategy';\n        showNotification('success', `Strategy updated to ${strategyName}`)\n      },\n      onError: (error, variables, context) => {\n        if (context?.previousListings) {\n          queryClient.setQueryData(['listings', { status }], context.previousListings)\n        }\n        showNotification('error', error.message || 'Failed to update strategy')\n      },\n      onSettled: () => {\n        queryClient.invalidateQueries(['listings', { status }])\n      }\n    }\n  )\n\n  const togglePriceReductionMutation = useMutation(\n    ({ listingId, enabled }) => listingsAPI.updateListing(listingId, { enable_auto_reduction: enabled }),\n    {\n      onMutate: async ({ listingId, enabled }) => {\n        await queryClient.cancelQueries(['listings', { status }])\n        const previousListings = queryClient.getQueryData(['listings', { status }])\n\n        queryClient.setQueryData(['listings', { status }], (old) => {\n          if (!old) return old\n          return old.map(listing =>\n            listing.id === listingId\n              ? { ...listing, enable_auto_reduction: enabled }\n              : listing\n          )\n        })\n\n        return { previousListings }\n      },\n      onSuccess: (data, { enabled }) => {\n        showNotification('success', `Price reduction ${enabled ? 'enabled' : 'disabled'}`)\n      },\n      onError: (error, variables, context) => {\n        if (context?.previousListings) {\n          queryClient.setQueryData(['listings', { status }], context.previousListings)\n        }\n        showNotification('error', error.message || 'Failed to update price reduction status')\n      },\n      onSettled: () => {\n        queryClient.invalidateQueries(['listings', { status }])\n      }\n    }\n  )\n\n\n  const handleDeleteListing = (listingId) => {\n    if (window.confirm('Are you sure you want to close this listing? This will mark it as closed in your local database.')) {\n      endListingMutation.mutate(listingId)\n    }\n  }\n\n  const handleBulkCloseSoldOut = async () => {\n    // In \"Ended\" view: close all ended listings\n    // In other views: close only sold-out listings (quantity = 0)\n    const listingsToClose = status === 'Ended'\n      ? sortedAndFilteredListings\n      : sortedAndFilteredListings.filter(listing => listing.quantity_available === 0)\n\n    if (listingsToClose.length === 0) {\n      showNotification('info', 'No listings to close')\n      return\n    }\n\n    const listingType = status === 'Ended' ? 'ended' : 'sold-out'\n    const confirmMessage = `Close ${listingsToClose.length} ${listingType} listing(s)? This will mark them as closed in your local database.`\n    if (!window.confirm(confirmMessage)) {\n      return\n    }\n\n    setNotification({ type: 'info', message: `Closing ${listingsToClose.length} listings...` })\n\n    let successCount = 0\n    let alreadyClosedCount = 0\n    let failCount = 0\n    const errors = []\n\n    for (const listing of listingsToClose) {\n      try {\n        const response = await listingsAPI.endListing(listing.id)\n\n        // Check if it was already closed\n        if (response?.message?.toLowerCase().includes('already')) {\n          alreadyClosedCount++\n        } else {\n          successCount++\n        }\n      } catch (error) {\n        console.error(`Failed to close listing ${listing.id}:`, error)\n        failCount++\n\n        // Store error details for reporting\n        const errorMsg = error.message || 'Unknown error'\n        errors.push({\n          sku: listing.ebay_sku || listing.ebay_item_id,\n          error: errorMsg\n        })\n      }\n    }\n\n    // Refetch listings to update UI\n    queryClient.invalidateQueries('listings')\n\n    // Show final notification with detailed results\n    const totalProcessed = successCount + alreadyClosedCount\n    if (failCount === 0) {\n      if (alreadyClosedCount > 0) {\n        showNotification('success',\n          `Successfully processed ${totalProcessed} listing(s) (${successCount} closed, ${alreadyClosedCount} already closed on eBay)`\n        )\n      } else {\n        showNotification('success', `Successfully closed ${successCount} listing(s)`)\n      }\n    } else {\n      const failedSkus = errors.slice(0, 3).map(e => e.sku).join(', ')\n      const moreText = errors.length > 3 ? ` and ${errors.length - 3} more` : ''\n      showNotification('warning',\n        `Closed ${totalProcessed} listing(s), ${failCount} failed. Failed: ${failedSkus}${moreText}. Check console for details.`\n      )\n      console.error('Failed listings:', errors)\n    }\n  }\n\n  const handleMinimumPriceUpdate = (listingId, value) => {\n    const minimumPrice = parseFloat(value)\n    if (!isNaN(minimumPrice) && minimumPrice >= 0) {\n      updateMinimumPriceMutation.mutate({ listingId, minimumPrice })\n    }\n  }\n\n  const handleStrategyUpdate = (listingId, strategyId) => {\n    updateStrategyMutation.mutate({\n      listingId,\n      strategyId: strategyId || null\n    })\n  }\n\n  const handleTogglePriceReduction = (listing) => {\n    // Prevent enabling price reduction if minimum price is not set\n    if (!listing.enable_auto_reduction && (!listing.minimum_price || listing.minimum_price <= 0)) {\n      showNotification('error', 'Please set a minimum price before enabling price reduction')\n      return\n    }\n\n    if (!userProfile?.id) {\n      showNotification('error', 'User not authenticated')\n      return\n    }\n\n    togglePriceReductionMutation.mutate({\n      listingId: listing.id,\n      enabled: !listing.enable_auto_reduction\n    })\n  }\n\n\n  const handleSort = (key) => {\n    let direction = 'asc'\n    if (sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc'\n    }\n    setSortConfig({ key, direction })\n  }\n\n  const toggleColumnVisibility = (column) => {\n    setVisibleColumns(prev => ({\n      ...prev,\n      [column]: !prev[column]\n    }))\n  }\n\n  const handleDragStart = (e, column) => {\n    setDraggedColumn(column)\n    e.dataTransfer.effectAllowed = 'move'\n  }\n\n  const handleDragOver = (e) => {\n    e.preventDefault()\n    e.dataTransfer.dropEffect = 'move'\n  }\n\n  const handleDrop = (e, targetColumn) => {\n    e.preventDefault()\n\n    if (draggedColumn && draggedColumn !== targetColumn) {\n      const newOrder = [...columnOrder]\n      const draggedIndex = newOrder.indexOf(draggedColumn)\n      const targetIndex = newOrder.indexOf(targetColumn)\n\n      newOrder.splice(draggedIndex, 1)\n      newOrder.splice(targetIndex, 0, draggedColumn)\n\n      setColumnOrder(newOrder)\n    }\n    setDraggedColumn(null)\n  }\n\n  const handleDragEnd = () => {\n    setDraggedColumn(null)\n  }\n\n  const calculateListingAge = (createdAt) => {\n    const now = new Date()\n    const created = new Date(createdAt)\n    const diffTime = Math.abs(now - created)\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n    return `${diffDays} days`\n  }\n\n  // First, filter listings without sorting\n  const filteredListings = useMemo(() => {\n    let filtered = listings || []\n\n    // Use empty array if no listings\n    if (!filtered) {\n      filtered = []\n    }\n\n    // Apply search filter\n    if (searchTerm.trim()) {\n      const searchLower = searchTerm.toLowerCase()\n      filtered = filtered.filter(listing => {\n        const strategy = getStrategyDisplayInfo(listing, strategies)\n        const strategyName = strategy ? strategy.name : ''\n\n        return (\n          listing.title?.toLowerCase().includes(searchLower) ||\n          listing.ebay_sku?.toLowerCase().includes(searchLower) ||\n          listing.current_price?.toString().includes(searchLower) ||\n          listing.original_price?.toString().includes(searchLower) ||\n          listing.quantity_available?.toString().includes(searchLower) ||\n          listing.minimum_price?.toString().includes(searchLower) ||\n          strategyName.toLowerCase().includes(searchLower) ||\n          listing.id?.toLowerCase().includes(searchLower)\n        )\n      })\n    }\n\n    // Apply filters\n    if (filters.length > 0) {\n      filtered = filtered.filter(listing => {\n        return filters.every(filter => {\n          if (!filter.field || !filter.value) return true\n\n          let listingValue\n          if (filter.field === 'strategy') {\n            // Handle \"No Strategy\" filter\n            if (filter.value === 'none') {\n              return !listing.strategy_id\n            }\n            listingValue = listing.strategy_id\n          } else if (filter.field === 'listing_age') {\n            const created = new Date(listing.created_at || new Date())\n            const now = new Date()\n            listingValue = Math.ceil((now - created) / (1000 * 60 * 60 * 24))\n          } else if (filter.field === 'enable_auto_reduction') {\n            listingValue = listing.enable_auto_reduction?.toString()\n          } else {\n            listingValue = listing[filter.field]\n          }\n\n          const filterValue = filter.value\n          const numericListingValue = parseFloat(listingValue)\n          const numericFilterValue = parseFloat(filterValue)\n\n          switch (filter.operator) {\n            case 'equals':\n              return filter.field === 'sku'\n                ? listingValue?.toLowerCase().includes(filterValue.toLowerCase())\n                : listingValue?.toString() === filterValue\n            case 'contains':\n              return listingValue?.toLowerCase().includes(filterValue.toLowerCase())\n            case 'greater_than':\n              return !isNaN(numericListingValue) && !isNaN(numericFilterValue) && numericListingValue > numericFilterValue\n            case 'less_than':\n              return !isNaN(numericListingValue) && !isNaN(numericFilterValue) && numericListingValue < numericFilterValue\n            case 'greater_than_equal':\n              return !isNaN(numericListingValue) && !isNaN(numericFilterValue) && numericListingValue >= numericFilterValue\n            case 'less_than_equal':\n              return !isNaN(numericListingValue) && !isNaN(numericFilterValue) && numericListingValue <= numericFilterValue\n            default:\n              return true\n          }\n        })\n      })\n    }\n\n    return filtered\n  }, [listings, searchTerm, filters, strategies])\n\n  // Then, apply sorting ONLY when sortConfig changes (user clicks column header)\n  const sortedAndFilteredListings = useMemo(() => {\n    // If no sort is active, return filtered listings as-is (preserve original order)\n    if (!sortConfig.key) return filteredListings\n\n    // Apply sorting only when user explicitly sorts via column header click\n    return [...filteredListings].sort((a, b) => {\n      let aValue = a[sortConfig.key]\n      let bValue = b[sortConfig.key]\n\n      if (sortConfig.key === 'current_price' || sortConfig.key === 'original_price') {\n        aValue = parseFloat(aValue)\n        bValue = parseFloat(bValue)\n      }\n\n      if (aValue < bValue) {\n        return sortConfig.direction === 'asc' ? -1 : 1\n      }\n      if (aValue > bValue) {\n        return sortConfig.direction === 'asc' ? 1 : -1\n      }\n      return 0\n    })\n  }, [filteredListings, sortConfig])\n\n  // Pagination calculations\n  const totalItems = sortedAndFilteredListings.length\n  const totalPages = Math.ceil(totalItems / itemsPerPage)\n  const startIndex = (currentPage - 1) * itemsPerPage\n  const endIndex = startIndex + itemsPerPage\n  const paginatedListings = sortedAndFilteredListings.slice(startIndex, endIndex)\n\n  // Generate page numbers to display\n  const getPageNumbers = () => {\n    const pages = []\n    const maxPagesToShow = 5\n\n    if (totalPages <= maxPagesToShow) {\n      // Show all pages if total is less than max\n      for (let i = 1; i <= totalPages; i++) {\n        pages.push(i)\n      }\n    } else {\n      // Always show first page\n      pages.push(1)\n\n      // Calculate range around current page\n      let start = Math.max(2, currentPage - 1)\n      let end = Math.min(totalPages - 1, currentPage + 1)\n\n      // Adjust if at the beginning\n      if (currentPage <= 3) {\n        end = 4\n      }\n\n      // Adjust if at the end\n      if (currentPage >= totalPages - 2) {\n        start = totalPages - 3\n      }\n\n      // Add ellipsis if needed\n      if (start > 2) {\n        pages.push('...')\n      }\n\n      // Add middle pages\n      for (let i = start; i <= end; i++) {\n        pages.push(i)\n      }\n\n      // Add ellipsis if needed\n      if (end < totalPages - 1) {\n        pages.push('...')\n      }\n\n      // Always show last page\n      pages.push(totalPages)\n    }\n\n    return pages\n  }\n\n  const handlePageChange = (page) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page)\n      // Scroll to top of listings\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n    }\n  }\n\n  const handleItemsPerPageChange = (value) => {\n    const newValue = parseInt(value, 10)\n    setItemsPerPage(newValue)\n    setCurrentPage(1) // Reset to first page when changing items per page\n  }\n\n  // Filter configuration\n  const filterOptions = [\n    { key: 'strategy', label: 'Strategy', type: 'select', options: [\n      { value: 'none', label: 'No Strategy' },\n      ...strategies.map(s => ({ value: s.id, label: s.name }))\n    ]},\n    { key: 'current_price', label: 'Current Price', type: 'number' },\n    { key: 'original_price', label: 'Original Price', type: 'number' },\n    { key: 'quantity', label: 'Quantity', type: 'number' },\n    { key: 'minimum_price', label: 'Minimum Price', type: 'number' },\n    { key: 'listing_age', label: 'Listing Age (days)', type: 'number' },\n    { key: 'sku', label: 'SKU', type: 'text' },\n    { key: 'enable_auto_reduction', label: 'Monitoring Status', type: 'select', options: [\n      { value: 'true', label: 'Active' },\n      { value: 'false', label: 'Paused' }\n    ]}\n  ]\n\n  const addFilter = () => {\n    const newFilter = {\n      id: Date.now(),\n      field: '',\n      operator: 'equals',\n      value: ''\n    }\n    setFilters([...filters, newFilter])\n  }\n\n  const updateFilter = (id, updates) => {\n    setFilters(filters.map(filter =>\n      filter.id === id ? { ...filter, ...updates } : filter\n    ))\n  }\n\n  const removeFilter = (id) => {\n    setFilters(filters.filter(filter => filter.id !== id))\n  }\n\n  const clearAllFilters = () => {\n    setFilters([])\n  }\n\n  // Column configuration\n  const getColumnConfig = (column) => {\n    const configs = {\n      image: { label: 'Image', sortable: false, width: 'min-w-[80px] w-20' },\n      title: { label: 'Title', sortable: true, sortKey: 'title', width: 'min-w-[200px]' },\n      quantity: { label: 'Qty', sortable: true, sortKey: 'quantity', width: 'min-w-[60px] w-16' },\n      currentPrice: { label: 'Current Price', sortable: true, sortKey: 'current_price', width: 'min-w-[100px] w-28' },\n      minimumPrice: { label: 'Min Price', sortable: false, width: 'min-w-[90px] w-24' },\n      priceReductionEnabled: { label: 'Price Reduction', sortable: true, sortKey: 'enable_auto_reduction', width: 'min-w-[120px] w-32' },\n      strategy: { label: 'Strategy', sortable: false, width: 'min-w-[140px] w-40' },\n      listingAge: { label: 'Age', sortable: true, sortKey: 'created_at', width: 'min-w-[70px] w-20' },\n      actions: { label: 'Actions', sortable: false, width: 'min-w-[120px] w-32' }\n    }\n    return configs[column] || { label: column, sortable: false }\n  }\n\n  if (isLoading) {\n    return <div className=\"text-center py-8\">Loading listings...</div>\n  }\n\n  if (error) {\n    const errorMessage = error?.message || 'Unknown error occurred'\n    const isEbayConnectionError = errorMessage.includes('eBay account not connected')\n    const isAuthError = errorMessage.includes('Authentication') || errorMessage.includes('log in')\n    const isServiceError = errorMessage.includes('service') || errorMessage.includes('unavailable')\n\n    return (\n      <div className=\"max-w-2xl mx-auto py-8\">\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-6\">\n          <div className=\"flex items-center mb-4\">\n            <svg className=\"w-6 h-6 text-red-600 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            <h3 className=\"text-lg font-medium text-red-800\">Unable to Load Listings</h3>\n          </div>\n\n          <p className=\"text-red-700 mb-4\">{errorMessage}</p>\n\n          <div className=\"space-y-3\">\n            {isEbayConnectionError && (\n              <button\n                onClick={handleConnectEbay}\n                className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\n              >\n                Connect eBay Account\n              </button>\n            )}\n\n            {isAuthError && (\n              <button\n                onClick={() => window.location.reload()}\n                className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\n              >\n                Refresh Page\n              </button>\n            )}\n\n            {isServiceError && (\n              <div className=\"text-sm text-red-600\">\n                <p>This is usually temporary. Please try again in a few minutes.</p>\n                <button\n                  onClick={() => window.location.reload()}\n                  className=\"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\n                >\n                  Try Again\n                </button>\n              </div>\n            )}\n\n            {!isEbayConnectionError && !isAuthError && !isServiceError && (\n              <div className=\"text-sm text-red-600\">\n                <p>If this problem persists, please contact support.</p>\n                <button\n                  onClick={() => window.location.reload()}\n                  className=\"mt-2 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500\"\n                >\n                  Try Again\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Notification Banner */}\n      {notification && (\n        <div className={`rounded-lg p-3 border ${\n          notification.type === 'success'\n            ? 'bg-success/10 border-success/30 text-success'\n            : 'bg-error/10 border-error/30 text-error'\n        }`}>\n          <div className=\"flex\">\n            <div>\n              {notification.message}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-semibold text-theme-primary\">Your eBay Listings</h1>\n        <p className=\"text-theme-secondary\">Manage and monitor your eBay listing prices</p>\n      </div>\n\n      {/* Search Box */}\n      <div className=\"bg-theme-surface rounded-lg border border-theme p-4\">\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <Search className=\"h-5 w-5 text-theme-tertiary\" strokeWidth={1.5} />\n          </div>\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"block w-full pl-10 pr-3 py-2 border border-theme rounded-lg bg-theme-primary text-theme-primary placeholder-text-tertiary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent\"\n            placeholder=\"Search listings by title, SKU, price, quantity, strategy, or any data...\"\n          />\n          {searchTerm && (\n            <button\n              onClick={() => setSearchTerm('')}\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n            >\n              <X className=\"h-5 w-5 text-theme-tertiary hover:text-theme-primary transition-colors\" strokeWidth={1.5} />\n            </button>\n          )}\n        </div>\n        {searchTerm && (\n          <div className=\"mt-2 text-sm text-theme-secondary\">\n            {totalItems} listing{totalItems !== 1 ? 's' : ''} found\n          </div>\n        )}\n      </div>\n\n      {/* Controls Row */}\n      <div className=\"space-y-4 lg:space-y-0 lg:flex lg:justify-between lg:items-center\">\n        {/* Status Filter */}\n        <div className=\"flex flex-wrap gap-2 justify-center lg:justify-start\">\n          {['Active'].map((statusOption) => (\n            <button\n              key={statusOption}\n              onClick={() => setStatus(statusOption)}\n              className={`px-3 py-2 rounded-lg text-sm font-medium flex-shrink-0 transition-colors ${\n                status === statusOption\n                  ? 'bg-accent text-white'\n                  : 'bg-theme-surface text-theme-secondary border border-theme hover:bg-theme-hover hover:text-theme-primary'\n              }`}\n            >\n              {statusOption === 'all' ? 'All' : statusOption}\n            </button>\n          ))}\n\n          {/* Sync eBay Button */}\n          <button\n            onClick={handleSyncEbay}\n            disabled={isSyncing}\n            className={`px-3 py-2 rounded-lg text-sm font-medium flex-shrink-0 transition-colors flex items-center gap-2 ${\n              isSyncing\n                ? 'bg-accent/50 text-white cursor-not-allowed'\n                : 'bg-accent text-white hover:bg-accent-hover'\n            }`}\n          >\n            <RefreshCw className={`h-4 w-4 ${isSyncing ? 'animate-spin' : ''}`} strokeWidth={2} />\n            <span>{isSyncing ? 'Syncing...' : 'Sync eBay'}</span>\n          </button>\n\n          {/* Vacation Mode Toggle */}\n          <button\n            onClick={() => toggleVacationMutation.mutate(!vacationMode)}\n            disabled={toggleVacationMutation.isLoading || isVacationLoading}\n            className={`px-3 py-2 rounded-lg text-sm font-medium flex-shrink-0 transition-colors flex items-center gap-2 ${\n              vacationMode\n                ? 'bg-warning/20 text-warning border border-warning/30 hover:bg-warning/30'\n                : 'bg-theme-surface text-theme-secondary border border-theme hover:bg-theme-hover hover:text-theme-primary'\n            }`}\n            title={vacationMode ? 'Click to resume price reductions' : 'Click to pause price reductions'}\n          >\n            <Palmtree className=\"h-4 w-4\" strokeWidth={2} />\n            <span>{vacationMode ? 'Vacation: ON' : 'Vacation: OFF'}</span>\n          </button>\n\n          {/* Bulk Close Button - Show when closeable listings exist */}\n          {(() => {\n            const closeableListings = status === 'Ended'\n              ? sortedAndFilteredListings // All ended listings\n              : sortedAndFilteredListings.filter(l => l.quantity_available === 0); // Only sold-out in other views\n\n            const buttonText = status === 'Ended'\n              ? `Close All Ended (${closeableListings.length})`\n              : `Close All Sold-Out (${closeableListings.length})`;\n\n            return closeableListings.length > 0 && (\n              <button\n                onClick={handleBulkCloseSoldOut}\n                className=\"bg-error/10 text-error border border-error/30 px-3 py-2 rounded-lg text-sm font-medium hover:bg-error/20 flex items-center gap-1 flex-shrink-0 transition-colors\"\n                title={status === 'Ended' ? 'Close all ended listings' : 'Close all sold-out listings'}\n              >\n                <span>{buttonText}</span>\n              </button>\n            );\n          })()}\n        </div>\n\n        {/* Filter and Column Controls */}\n        <div className=\"flex flex-wrap gap-2 justify-center lg:justify-end\">\n          {/* Add Filter Button */}\n          <button\n            onClick={addFilter}\n            className=\"bg-success/10 text-success border border-success/30 px-3 py-2 rounded-lg text-sm hover:bg-success/20 flex items-center space-x-1.5 flex-shrink-0 transition-colors\"\n          >\n            <Filter className=\"h-4 w-4\" strokeWidth={1.5} />\n            <span className=\"hidden sm:inline\">Add Filter</span>\n          </button>\n\n          {/* Clear Filters Button */}\n          {filters.length > 0 && (\n            <button\n              onClick={clearAllFilters}\n              className=\"bg-error/10 text-error border border-error/30 px-3 py-2 rounded-lg text-sm hover:bg-error/20 flex-shrink-0 transition-colors\"\n            >\n              <span className=\"hidden sm:inline\">Clear All ({filters.length})</span>\n              <span className=\"sm:hidden\">Clear ({filters.length})</span>\n            </button>\n          )}\n\n          {/* Column Visibility Controls - Hidden on mobile since mobile uses cards */}\n          <div className=\"hidden lg:block relative\">\n            <details className=\"relative\">\n              <summary className=\"bg-theme-surface border border-theme text-theme-secondary px-3 py-2 rounded-lg text-sm cursor-pointer hover:bg-theme-hover hover:text-theme-primary transition-colors\">\n                Manage Columns\n              </summary>\n              <div className=\"absolute right-0 mt-2 w-48 bg-theme-surface rounded-lg border border-theme shadow-xl z-10\">\n                <div className=\"p-2\">\n                  {Object.entries(visibleColumns).map(([column, visible]) => (\n                    <label key={column} className=\"flex items-center space-x-2 p-2 rounded hover:bg-theme-hover cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={visible}\n                        onChange={() => toggleColumnVisibility(column)}\n                        className=\"rounded bg-theme-primary border-theme text-accent focus:ring-accent\"\n                      />\n                      <span className=\"text-sm text-theme-primary capitalize\">{column.replace(/([A-Z])/g, ' $1').trim()}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            </details>\n          </div>\n        </div>\n      </div>\n\n      {/* Active Filters */}\n      {filters.length > 0 && (\n        <div className=\"bg-theme-surface rounded-lg border border-theme p-4\">\n          <h3 className=\"text-sm font-medium text-theme-secondary mb-3\">Active Filters</h3>\n          <div className=\"space-y-3\">\n            {filters.map((filter) => {\n              const filterOption = filterOptions.find(opt => opt.key === filter.field)\n              const isNumeric = filterOption?.type === 'number'\n              const isSelect = filterOption?.type === 'select'\n\n              return (\n                <div key={filter.id} className=\"p-3 bg-theme-primary rounded-lg border border-theme\">\n                  <div className=\"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3 sm:items-center\">\n                    {/* Field Selection */}\n                    <select\n                      value={filter.field}\n                      onChange={(e) => updateFilter(filter.id, { field: e.target.value, operator: 'equals', value: '' })}\n                      className=\"text-sm border border-theme rounded-lg px-2 py-1.5 bg-theme-surface text-theme-primary w-full sm:w-auto focus:ring-2 focus:ring-accent focus:border-transparent\"\n                    >\n                      <option value=\"\">Select Field</option>\n                      {filterOptions.map(option => (\n                        <option key={option.key} value={option.key}>{option.label}</option>\n                      ))}\n                    </select>\n\n                    {/* Operator Selection (for numeric fields) */}\n                    {filter.field && isNumeric && (\n                      <select\n                        value={filter.operator}\n                        onChange={(e) => updateFilter(filter.id, { operator: e.target.value })}\n                        className=\"text-sm border border-theme rounded-lg px-2 py-1.5 bg-theme-surface text-theme-primary w-full sm:w-auto focus:ring-2 focus:ring-accent focus:border-transparent\"\n                      >\n                        <option value=\"equals\">=</option>\n                        <option value=\"greater_than\">&gt;</option>\n                        <option value=\"less_than\">&lt;</option>\n                        <option value=\"greater_than_equal\">â‰¥</option>\n                        <option value=\"less_than_equal\">â‰¤</option>\n                      </select>\n                    )}\n\n                    {/* Operator Selection (for text fields) */}\n                    {filter.field && !isNumeric && !isSelect && (\n                      <select\n                        value={filter.operator}\n                        onChange={(e) => updateFilter(filter.id, { operator: e.target.value })}\n                        className=\"text-sm border border-theme rounded-lg px-2 py-1.5 bg-theme-surface text-theme-primary w-full sm:w-auto focus:ring-2 focus:ring-accent focus:border-transparent\"\n                      >\n                        <option value=\"equals\">Equals</option>\n                        <option value=\"contains\">Contains</option>\n                      </select>\n                    )}\n\n                    {/* Value Input */}\n                    {filter.field && (\n                      <>\n                        {isSelect ? (\n                          <select\n                            value={filter.value}\n                            onChange={(e) => updateFilter(filter.id, { value: e.target.value })}\n                            className=\"text-sm border border-theme rounded-lg px-2 py-1.5 bg-theme-surface text-theme-primary w-full sm:w-auto focus:ring-2 focus:ring-accent focus:border-transparent\"\n                          >\n                            <option value=\"\">Select Value</option>\n                            {filterOption.options?.map(option => (\n                              <option key={option.value} value={option.value}>{option.label}</option>\n                            ))}\n                          </select>\n                        ) : (\n                          <input\n                            type={isNumeric ? 'number' : 'text'}\n                            value={filter.value}\n                            onChange={(e) => updateFilter(filter.id, { value: e.target.value })}\n                            placeholder={`Enter ${filterOption?.label.toLowerCase()}`}\n                            className=\"text-sm border border-theme rounded-lg px-2 py-1.5 bg-theme-surface text-theme-primary placeholder-text-tertiary w-full sm:w-auto focus:ring-2 focus:ring-accent focus:border-transparent\"\n                          />\n                        )}\n                      </>\n                    )}\n\n                    {/* Remove Filter Button */}\n                    <button\n                      onClick={() => removeFilter(filter.id)}\n                      className=\"text-error hover:text-error text-sm p-2 hover:bg-error/10 rounded-lg flex-shrink-0 self-center sm:self-auto transition-colors\"\n                      aria-label=\"Remove filter\"\n                    >\n                      âœ•\n                    </button>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Pagination Controls - Top */}\n      {totalItems > 0 && (\n        <div className=\"bg-theme-surface rounded-lg border border-theme p-4\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n            {/* Items per page selector */}\n            <div className=\"flex items-center gap-2\">\n              <label htmlFor=\"items-per-page\" className=\"text-sm text-theme-secondary\">\n                Show:\n              </label>\n              <select\n                id=\"items-per-page\"\n                value={itemsPerPage}\n                onChange={(e) => handleItemsPerPageChange(e.target.value)}\n                className=\"border border-theme rounded-lg px-2 py-1 text-sm bg-theme-primary text-theme-primary focus:ring-2 focus:ring-accent focus:border-transparent\"\n              >\n                <option value=\"10\">10</option>\n                <option value=\"25\">25</option>\n                <option value=\"50\">50</option>\n                <option value=\"100\">100</option>\n              </select>\n              <span className=\"text-sm text-theme-secondary\">per page</span>\n            </div>\n\n            {/* Page info */}\n            <div className=\"text-sm text-theme-secondary text-center sm:text-left\">\n              Showing {totalItems === 0 ? 0 : startIndex + 1}-{Math.min(startIndex + paginatedListings.length, totalItems)} of {totalItems} listings\n            </div>\n\n            {/* Page navigation */}\n            {totalPages > 1 && (\n              <div className=\"flex items-center gap-1 justify-center sm:justify-end\">\n                <button\n                  onClick={() => handlePageChange(currentPage - 1)}\n                  disabled={currentPage === 1}\n                  className={`px-3 py-1 rounded-lg text-sm transition-colors ${\n                    currentPage === 1\n                      ? 'bg-theme-primary text-theme-tertiary cursor-not-allowed'\n                      : 'bg-accent text-white hover:bg-accent-hover'\n                  }`}\n                >\n                  Previous\n                </button>\n\n                {getPageNumbers().map((page, index) => (\n                  page === '...' ? (\n                    <span key={`ellipsis-${index}`} className=\"px-2 text-theme-tertiary\">\n                      ...\n                    </span>\n                  ) : (\n                    <button\n                      key={page}\n                      onClick={() => handlePageChange(page)}\n                      className={`px-3 py-1 rounded-lg text-sm transition-colors ${\n                        currentPage === page\n                          ? 'bg-accent text-white'\n                          : 'bg-theme-primary text-theme-secondary hover:bg-theme-hover hover:text-theme-primary'\n                      }`}\n                    >\n                      {page}\n                    </button>\n                  )\n                ))}\n\n                <button\n                  onClick={() => handlePageChange(currentPage + 1)}\n                  disabled={currentPage === totalPages}\n                  className={`px-3 py-1 rounded-lg text-sm transition-colors ${\n                    currentPage === totalPages\n                      ? 'bg-theme-primary text-theme-tertiary cursor-not-allowed'\n                      : 'bg-accent text-white hover:bg-accent-hover'\n                  }`}\n                >\n                  Next\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Mobile Card View (visible on small screens) */}\n      <div className=\"lg:hidden space-y-4\">\n        {paginatedListings.map((listing) => (\n          <div key={listing.id} className=\"bg-theme-surface rounded-lg border border-theme p-4\">\n            <div className=\"flex items-start space-x-4\">\n              <img\n                src={listing.image_url || '/placeholder-image.jpg'}\n                alt={listing.title}\n                className=\"w-20 h-20 rounded-lg object-cover flex-shrink-0\"\n              />\n              <div className=\"flex-1 min-w-0\">\n                <h3 className=\"text-sm font-medium text-theme-primary truncate\">{listing.title}</h3>\n                {listing.ebay_sku && (\n                  <p className=\"text-xs text-theme-tertiary mt-1\">SKU: {listing.ebay_sku}</p>\n                )}\n\n                <div className=\"mt-3 grid grid-cols-2 gap-3 text-sm\">\n                  <div>\n                    <span className=\"text-theme-tertiary\">Current Price:</span>\n                    <div className=\"font-bold text-success\">${listing.current_price}</div>\n                  </div>\n                  <div>\n                    <span className=\"text-theme-tertiary\">Quantity:</span>\n                    <div className=\"font-medium text-theme-primary\">{listing.listing_status === 'Ended' ? 0 : (listing.quantity_available ?? 0)}</div>\n                  </div>\n                  <div>\n                    <span className=\"text-theme-tertiary\">Age:</span>\n                    <div className=\"font-medium text-theme-primary\">{calculateListingAge(listing.created_at || new Date())}</div>\n                  </div>\n                </div>\n\n\n                <div className=\"mt-3 space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-theme-tertiary\">Minimum Price:</span>\n                    <input\n                      type=\"number\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      defaultValue={listing.minimum_price || ''}\n                      onBlur={(e) => handleMinimumPriceUpdate(listing.id, e.target.value)}\n                      className=\"w-24 px-2 py-1 text-sm border border-theme rounded-lg bg-theme-primary text-theme-primary placeholder-text-tertiary\"\n                      placeholder=\"Set min\"\n                    />\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-theme-tertiary\">Price Reduction:</span>\n                    <div className=\"flex items-center\">\n                      <label\n                        className={`relative inline-flex items-center ${\n                          (!listing.minimum_price || listing.minimum_price <= 0) && !listing.enable_auto_reduction\n                            ? 'cursor-not-allowed'\n                            : 'cursor-pointer'\n                        }`}\n                        title={(!listing.minimum_price || listing.minimum_price <= 0) && !listing.enable_auto_reduction\n                          ? 'Set a minimum price before enabling price reduction'\n                          : ''}\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={listing.enable_auto_reduction}\n                          onChange={() => handleTogglePriceReduction(listing)}\n                          disabled={togglePriceReductionMutation.isLoading}\n                          className=\"sr-only\"\n                        />\n                        <div className={`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${\n                          listing.enable_auto_reduction ? 'bg-accent' : 'bg-gray-200 dark:bg-gray-700'\n                        }`}>\n                          <div className={`absolute top-0.5 left-0.5 bg-white w-5 h-5 rounded-full transition-transform duration-200 ease-in-out ${\n                            listing.enable_auto_reduction ? 'translate-x-5' : 'translate-x-0'\n                          }`}></div>\n                        </div>\n                      </label>\n                      <span className={`ml-2 text-xs ${\n                        listing.enable_auto_reduction ? 'text-success font-medium' : 'text-theme-tertiary'\n                      }`}>\n                        {listing.enable_auto_reduction ? 'Active' : 'Paused'}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-theme-tertiary\">Strategy:</span>\n                    <select\n                      value={listing.strategy_id || listing.reduction_strategy || ''}\n                      onChange={(e) => handleStrategyUpdate(listing.id, e.target.value)}\n                      className=\"text-sm border border-theme rounded-lg px-2 py-1 max-w-32 bg-theme-primary text-theme-primary\"\n                    >\n                      <option value=\"\">No Strategy</option>\n                      {strategies.map((strategy) => (\n                        <option key={strategy.id} value={strategy.id}>\n                          {strategy.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 flex flex-wrap gap-2\">\n                  <a\n                    href={listing.ebay_url || `https://www.ebay.com/itm/${listing.ebay_item_id}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"bg-accent/10 text-accent border border-accent/30 px-3 py-1 rounded-lg text-xs hover:bg-accent/20 inline-block text-center transition-colors\"\n                    title=\"Open this listing on eBay in a new tab\"\n                  >\n                    View on eBay\n                  </a>\n                  <button\n                    onClick={() => handleDeleteListing(listing.id)}\n                    disabled={endListingMutation.isLoading}\n                    className=\"bg-error/10 text-error border border-error/30 px-3 py-1 rounded-lg text-xs hover:bg-error/20 disabled:opacity-50 transition-colors\"\n                    title=\"Close this listing\"\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {totalItems === 0 && (\n          <div className=\"text-center py-12 bg-theme-surface rounded-lg border border-theme\">\n            <div className=\"text-theme-tertiary\">\n              No listings found.\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Desktop Table View (visible on large screens) */}\n      <div className=\"hidden lg:block bg-theme-surface rounded-lg border border-theme overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full table-auto divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-theme-primary\">\n              <tr>\n                {columnOrder.map((column) => {\n                  if (!visibleColumns[column]) return null\n                  const config = getColumnConfig(column)\n\n                  return (\n                    <th\n                      key={column}\n                      draggable\n                      onDragStart={(e) => handleDragStart(e, column)}\n                      onDragOver={handleDragOver}\n                      onDrop={(e) => handleDrop(e, column)}\n                      onDragEnd={handleDragEnd}\n                      className={`px-2 py-3 text-left text-xs font-medium text-theme-tertiary uppercase tracking-wider ${\n                        config.sortable ? 'cursor-pointer hover:bg-theme-hover hover:text-theme-secondary' : ''\n                      } ${draggedColumn === column ? 'opacity-50' : ''} ${config.width || ''} select-none transition-colors`}\n                      onClick={config.sortable ? () => handleSort(config.sortKey) : undefined}\n                    >\n                      <div className=\"flex items-center space-x-1 min-w-0\">\n                        <span className=\"flex-shrink-0 text-theme-tertiary\">â‹®â‹®</span>\n                        <span className=\"break-words leading-tight\">{config.label}</span>\n                        {config.sortable && sortConfig.key === config.sortKey && (\n                          <span className=\"flex-shrink-0 text-accent\">{sortConfig.direction === 'asc' ? 'â†‘' : 'â†“'}</span>\n                        )}\n                      </div>\n                    </th>\n                  )\n                })}\n              </tr>\n            </thead>\n            <tbody className=\"bg-theme-surface divide-y divide-gray-200 dark:divide-gray-700\">\n              {paginatedListings.map((listing) => (\n                <tr key={listing.id} className=\"hover:bg-theme-hover transition-colors\">\n                  {columnOrder.map((column) => {\n                    if (!visibleColumns[column]) return null\n\n                    const renderCell = () => {\n                      switch (column) {\n                        case 'image':\n                          return (\n                            <img\n                              src={listing.image_url || '/placeholder-image.jpg'}\n                              alt={listing.title}\n                              className=\"w-16 h-16 rounded-lg object-cover\"\n                            />\n                          )\n                        case 'title':\n                          return (\n                            <div className=\"max-w-xs\">\n                              <div className=\"text-sm font-medium text-theme-primary truncate\">\n                                {listing.title}\n                              </div>\n                              {listing.ebay_sku && (\n                                <div className=\"text-xs text-theme-tertiary mt-1\">\n                                  SKU: {listing.ebay_sku}\n                                </div>\n                              )}\n                            </div>\n                          )\n                        case 'quantity':\n                          return (\n                            <div className=\"text-sm text-theme-primary\">\n                              {listing.listing_status === 'Ended' ? 0 : (listing.quantity_available ?? 0)}\n                            </div>\n                          )\n                        case 'currentPrice':\n                          return (\n                            <div className=\"text-sm font-bold text-green-600\">${listing.current_price}</div>\n                          )\n                        case 'minimumPrice':\n                          return (\n                            <input\n                              type=\"number\"\n                              step=\"0.01\"\n                              min=\"0\"\n                              defaultValue={listing.minimum_price || ''}\n                              onBlur={(e) => handleMinimumPriceUpdate(listing.id, e.target.value)}\n                              className=\"w-20 px-2 py-1 text-sm border border-theme rounded-lg bg-theme-primary text-theme-primary placeholder-text-tertiary\"\n                              placeholder=\"Set min\"\n                            />\n                          )\n                        case 'priceReductionEnabled':\n                          return (\n                            <div className=\"flex items-center\">\n                              <label\n                                className={`relative inline-flex items-center ${\n                                  (!listing.minimum_price || listing.minimum_price <= 0) && !listing.enable_auto_reduction\n                                    ? 'cursor-not-allowed'\n                                    : 'cursor-pointer'\n                                }`}\n                                title={(!listing.minimum_price || listing.minimum_price <= 0) && !listing.enable_auto_reduction\n                                  ? 'Set a minimum price before enabling price reduction'\n                                  : ''}\n                              >\n                                <input\n                                  type=\"checkbox\"\n                                  checked={listing.enable_auto_reduction}\n                                  onChange={() => handleTogglePriceReduction(listing)}\n                                  disabled={togglePriceReductionMutation.isLoading}\n                                  className=\"sr-only\"\n                                />\n                                <div className={`relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out ${\n                                  listing.enable_auto_reduction ? 'bg-accent' : 'bg-gray-200 dark:bg-gray-700'\n                                }`}>\n                                  <div className={`absolute top-0.5 left-0.5 bg-white w-5 h-5 rounded-full transition-transform duration-200 ease-in-out ${\n                                    listing.enable_auto_reduction ? 'translate-x-5' : 'translate-x-0'\n                                  }`}></div>\n                                </div>\n                              </label>\n                              <span className={`ml-2 text-xs ${\n                                listing.enable_auto_reduction ? 'text-success font-medium' : 'text-theme-tertiary'\n                              }`}>\n                                {listing.enable_auto_reduction ? 'Active' : 'Paused'}\n                              </span>\n                            </div>\n                          )\n                        case 'strategy':\n                          const currentStrategy = getStrategyDisplayInfo(listing, strategies)\n                          return (\n                            <select\n                              value={listing.strategy_id || listing.reduction_strategy || ''}\n                              onChange={(e) => handleStrategyUpdate(listing.id, e.target.value)}\n                              className=\"text-sm border border-theme rounded-lg px-2 py-1 min-w-40 bg-theme-primary text-theme-primary\"\n                            >\n                              <option value=\"\">No Strategy</option>\n                              {strategies.map((strategy) => (\n                                <option key={strategy.id} value={strategy.id}>\n                                  {strategy.name}\n                                </option>\n                              ))}\n                            </select>\n                          )\n                        case 'listingAge':\n                          return (\n                            <div className=\"text-sm text-theme-primary\">\n                              {calculateListingAge(listing.created_at || new Date())}\n                            </div>\n                          )\n                        case 'actions':\n                          return (\n                            <div className=\"flex space-x-1\">\n                              <a\n                                href={listing.ebay_url || `https://www.ebay.com/itm/${listing.ebay_item_id}`}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"bg-accent/10 text-accent border border-accent/30 px-2 py-1 rounded-lg text-xs hover:bg-accent/20 transition-colors\"\n                                title=\"Open this listing on eBay in a new tab\"\n                              >\n                                View\n                              </a>\n                              <button\n                                onClick={() => handleDeleteListing(listing.id)}\n                                disabled={endListingMutation.isLoading}\n                                className=\"bg-error/10 text-error border border-error/30 px-2 py-1 rounded-lg text-xs hover:bg-error/20 disabled:opacity-50 transition-colors\"\n                                title=\"Close this listing\"\n                              >\n                                Close\n                              </button>\n                            </div>\n                          )\n                        default:\n                          return null\n                      }\n                    }\n\n                    const config = getColumnConfig(column)\n                    return (\n                      <td\n                        key={column}\n                        className={`px-2 py-3 ${column === 'actions' ? 'whitespace-nowrap text-sm font-medium' : 'whitespace-nowrap'} ${config.width || ''}`}\n                      >\n                        {renderCell()}\n                      </td>\n                    )\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {(!listings || listings.length === 0) && (\n          <div className=\"text-center py-12\">\n            <div className=\"text-gray-500\">\n              No listings found.\n            </div>\n          </div>\n        )}\n\n        {/* Pagination Controls - Bottom (Desktop) */}\n        {totalItems > 0 && totalPages > 1 && (\n          <div className=\"mt-4 flex justify-center\">\n            <div className=\"flex items-center gap-1\">\n              <button\n                onClick={() => handlePageChange(currentPage - 1)}\n                disabled={currentPage === 1}\n                className={`px-3 py-1 rounded text-sm ${\n                  currentPage === 1\n                    ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                    : 'bg-blue-600 text-white hover:bg-blue-700'\n                }`}\n              >\n                Previous\n              </button>\n\n              {getPageNumbers().map((page, index) => (\n                page === '...' ? (\n                  <span key={`ellipsis-bottom-${index}`} className=\"px-2 text-gray-500\">\n                    ...\n                  </span>\n                ) : (\n                  <button\n                    key={`bottom-${page}`}\n                    onClick={() => handlePageChange(page)}\n                    className={`px-3 py-1 rounded text-sm ${\n                      currentPage === page\n                        ? 'bg-blue-600 text-white'\n                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                    }`}\n                  >\n                    {page}\n                  </button>\n                )\n              ))}\n\n              <button\n                onClick={() => handlePageChange(currentPage + 1)}\n                disabled={currentPage === totalPages}\n                className={`px-3 py-1 rounded text-sm ${\n                  currentPage === totalPages\n                    ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                    : 'bg-blue-600 text-white hover:bg-blue-700'\n                }`}\n              >\n                Next\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Pagination Controls - Bottom (Mobile) */}\n      {totalItems > 0 && totalPages > 1 && (\n        <div className=\"lg:hidden flex justify-center\">\n          <div className=\"flex items-center gap-1\">\n            <button\n              onClick={() => handlePageChange(currentPage - 1)}\n              disabled={currentPage === 1}\n              className={`px-3 py-1 rounded text-sm ${\n                currentPage === 1\n                  ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                  : 'bg-blue-600 text-white hover:bg-blue-700'\n              }`}\n            >\n              Previous\n            </button>\n\n            {getPageNumbers().map((page, index) => (\n              page === '...' ? (\n                <span key={`ellipsis-mobile-${index}`} className=\"px-2 text-gray-500\">\n                  ...\n                </span>\n              ) : (\n                <button\n                  key={`mobile-${page}`}\n                  onClick={() => handlePageChange(page)}\n                  className={`px-3 py-1 rounded text-sm ${\n                    currentPage === page\n                      ? 'bg-blue-600 text-white'\n                      : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                  }`}\n                >\n                  {page}\n                </button>\n              )\n            ))}\n\n            <button\n              onClick={() => handlePageChange(currentPage + 1)}\n              disabled={currentPage === totalPages}\n              className={`px-3 py-1 rounded text-sm ${\n                currentPage === totalPages\n                  ? 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                  : 'bg-blue-600 text-white hover:bg-blue-700'\n              }`}\n            >\n              Next\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":["__iconNode","TreePalm","createLucideIcon","getActiveStrategies","strategiesAPI","LEGACY_STRATEGIES","getStrategyDisplayInfo","listing","strategies","strategy","s","strategyById","legacyStrategy","VALID_COLUMNS","getStoredColumnOrder","stored","parsed","filtered","col","error","getStoredVisibleColumns","hasInvalidColumns","getStoredItemsPerPage","value","Listings","useNavigate","status","setStatus","useState","searchTerm","setSearchTerm","sortConfig","setSortConfig","visibleColumns","setVisibleColumns","columnOrder","setColumnOrder","draggedColumn","setDraggedColumn","filters","setFilters","notification","setNotification","currentPage","setCurrentPage","itemsPerPage","setItemsPerPage","isSyncing","setIsSyncing","queryClient","useQueryClient","showNotification","type","message","handleSyncEbay","session","supabase","response","data","totalImported","totalUpdated","useEffect","listings","isLoading","refetch","useQuery","listingsAPI","userProfile","isUserLoading","userAPI","isStrategiesLoading","vacationMode","isVacationLoading","user","toggleVacationMutation","useMutation","newValue","endListingMutation","updateMinimumPriceMutation","listingId","minimumPrice","previousListings","old","variables","context","updateStrategyMutation","strategyId","strategyName","_a","togglePriceReductionMutation","enabled","handleDeleteListing","handleBulkCloseSoldOut","listingsToClose","sortedAndFilteredListings","listingType","confirmMessage","successCount","alreadyClosedCount","failCount","errors","errorMsg","totalProcessed","failedSkus","e","moreText","handleMinimumPriceUpdate","handleStrategyUpdate","handleTogglePriceReduction","handleSort","key","direction","toggleColumnVisibility","column","prev","handleDragStart","handleDragOver","handleDrop","targetColumn","newOrder","draggedIndex","targetIndex","handleDragEnd","calculateListingAge","createdAt","now","created","diffTime","filteredListings","useMemo","searchLower","_b","_c","_d","_e","_f","_g","filter","listingValue","filterValue","numericListingValue","numericFilterValue","a","b","aValue","bValue","totalItems","totalPages","startIndex","endIndex","paginatedListings","getPageNumbers","pages","i","start","end","handlePageChange","page","handleItemsPerPageChange","filterOptions","addFilter","newFilter","updateFilter","id","updates","removeFilter","clearAllFilters","getColumnConfig","jsx","errorMessage","isEbayConnectionError","isAuthError","isServiceError","jsxs","Search","X","statusOption","RefreshCw","Palmtree","closeableListings","l","buttonText","Filter","visible","filterOption","opt","isNumeric","isSelect","option","Fragment","index","config","renderCell"],"mappings":"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","x_google_ignoreList":[0]}