import{c as ht,u as y,j as e,X as ge,S as ot}from"./index-0231291c.js";import{r as l}from"./vendor-react-4c62d1cf.js";import{u as Gt}from"./vendor-forms-45c7a11a.js";import{r as Ht,u as Zt}from"./vendor-utils-04f2268f.js";import{R as M}from"./refresh-cw-6c475bbf.js";import{U as Ee}from"./upload-c26ca2b0.js";import{F as fe}from"./file-spreadsheet-291256bd.js";import{C as B}from"./circle-alert-a9c91508.js";import{L as p,C as se}from"./loader-43bf0082.js";import{P as Xt}from"./plus-1047e1dd.js";import{D as Wt}from"./download-ea89d811.js";import{C as ct}from"./chevron-down-7e76eefa.js";import{C as it}from"./chevron-right-269a41e8.js";import{E as dt}from"./external-link-a2bb9e65.js";import{T as Yt}from"./trash-2-71e25496.js";import{C as es}from"./clock-1f92464c.js";import"./vendor-supabase-5edd3635.js";import"./vendor-query-4b12add6.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$e=ht("square-check-big",ts);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],mt=ht("square",ss),_={imported:{icon:fe,label:"Imported",emoji:"ðŸ“¥",bgClass:"bg-gray-100 dark:bg-gray-800",textClass:"text-gray-600 dark:text-gray-400",animated:!1,canSync:!0},pending:{icon:es,label:"Queued",emoji:"â³",bgClass:"bg-yellow-50 dark:bg-yellow-900/30",textClass:"text-yellow-600 dark:text-yellow-400",animated:!1,canSync:!1},processing:{icon:p,label:"Processing",emoji:"ðŸ”„",bgClass:"bg-blue-50 dark:bg-blue-900/30",textClass:"text-blue-600 dark:text-blue-400",animated:!0,canSync:!1},processed:{icon:se,label:"Processed",emoji:"âœ…",bgClass:"bg-green-50 dark:bg-green-900/30",textClass:"text-green-600 dark:text-green-400",animated:!1,canSync:!1},error:{icon:B,label:"Error",emoji:"âŒ",bgClass:"bg-red-50 dark:bg-red-900/30",textClass:"text-red-600 dark:text-red-400",animated:!1,canSync:!0}},as=h=>{const A=["asin","amazon asin","product asin","asin code"],L=h.map(D=>(D||"").toString().toLowerCase().trim());for(const D of A){const Q=L.findIndex(q=>q===D||q.includes(D));if(Q!==-1)return Q}return 0},rs=h=>{if(!h||typeof h!="string")return!1;const A=h.trim().toUpperCase();return/^B[0-9A-Z]{9}$/.test(A)};function Ss(){const[h,A]=l.useState([]),[L,D]=l.useState(!0),[Q,q]=l.useState(!1),[k,_e]=l.useState(""),[ae,De]=l.useState(""),[U,xt]=l.useState("all"),[ut,pt]=l.useState(new Set),[T,J]=l.useState(new Set),[b,re]=l.useState(1),[K,gt]=l.useState(1),[O,ft]=l.useState(0),be=25,[V,bt]=l.useState("created_at"),[G,yt]=l.useState("desc"),[H,Ue]=l.useState(!1),[m,R]=l.useState(null),[ye,jt]=l.useState(!0),[je,Oe]=l.useState(!1),[Ne,ne]=l.useState("skip"),[le,oe]=l.useState(null),[we,Re]=l.useState(!1),[ve,ze]=l.useState(!1),[F,Me]=l.useState(new Set),[Be,Le]=l.useState({}),[Nt,Qe]=l.useState({}),[c,N]=l.useState(null),ce=l.useRef(!1),[ie,qe]=l.useState(null),[Z,wt]=l.useState({}),[de,Je]=l.useState(new Set),[Ke,X]=l.useState({}),[j,z]=l.useState(null),[w,Ve]=l.useState(null),[u,me]=l.useState(null),[W,P]=l.useState(null),[ns,Ge]=l.useState(!1),[He,Se]=l.useState(!1),Y=l.useRef(null),E=l.useRef(null),ke=l.useRef(null),f=l.useCallback(async(t,a,s,r)=>{var g,x;const n=t??b,o=a??V,i=s??G,d=r!==void 0?r:ae;try{const v=await y.getAuthToken(),$=new URLSearchParams({action:"list",limit:be.toString(),page:n.toString(),sortBy:o,sortOrder:i});d&&$.set("search",d);const I=await(await fetch(`/.netlify/functions/catalog-import?${$}`,{headers:{Authorization:`Bearer ${v}`}})).json();I.success&&(A(I.items||[]),gt(((g=I.pagination)==null?void 0:g.pages)||1),ft(((x=I.pagination)==null?void 0:x.total)||0),re(n))}catch(v){console.error("Failed to load catalog imports:",v)}finally{D(!1)}},[b,V,G,ae]);l.useEffect(()=>{ke.current=f},[f]);const Ze=l.useCallback(()=>{Y.current&&(clearInterval(Y.current),Y.current=null)},[]),vt=l.useCallback(()=>{Y.current||(Y.current=setInterval(()=>{ke.current&&ke.current()},12e3))},[]);l.useEffect(()=>(f(),()=>{Ze(),E.current&&clearTimeout(E.current)}),[]),l.useEffect(()=>(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{k!==ae&&(De(k),re(1),f(1,V,G,k))},300),()=>{E.current&&clearTimeout(E.current)}),[k]),l.useEffect(()=>{h.some(a=>a.status==="pending"||a.status==="processing")?vt():Ze()},[h]),l.useEffect(()=>{if(F.size===0&&!c&&!ie)return;const t=setInterval(()=>{const a=Date.now();F.size>0&&Qe(s=>{const r={...s};return F.forEach(n=>{const o=Be[n];o&&(r[n]=Math.floor((a-o)/1e3))}),r}),c!=null&&c.startTime&&N(s=>s?{...s,elapsed:Math.floor((a-s.startTime)/1e3)}:null),ie&&(m!=null&&m.inProgress)&&R(s=>s?{...s,elapsed:Math.floor((a-ie)/1e3)}:null)},1e3);return()=>clearInterval(t)},[F,Be,c,ie,m==null?void 0:m.inProgress]);const St=async t=>{try{const a=await y.getAuthToken(),r=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({action:"check_duplicates",asins:t})})).json();if(r.success){const n=r.existingAsins||[],o=t.length-n.length;oe({newCount:o,existingCount:n.length,existingAsins:n}),ne((n.length>0,"skip"))}}catch(a){console.error("Duplicate check error:",a),oe(null)}},kt=l.useCallback(t=>{const a=t[0];if(!a)return;P(null),me(null);const s=new FileReader;s.onload=r=>{try{const n=new Uint8Array(r.target.result),o=Ht(n,{type:"array"}),i=o.SheetNames[0],d=o.Sheets[i],g=Zt.sheet_to_json(d,{header:1});if(g.length<2){P("File appears to be empty or has no data rows");return}const x=g[0],v=as(x),$=[],ee=[];for(let S=1;S<g.length;S++){const te=g[S],st=te[v];if(!st)continue;const pe=st.toString().trim().toUpperCase();if(rs(pe)){const at=x.findIndex(C=>(C||"").toLowerCase().includes("title")||(C||"").toLowerCase().includes("name")),rt=x.findIndex(C=>(C||"").toLowerCase().includes("image")||(C||"").toLowerCase().includes("photo")),nt=x.findIndex(C=>(C||"").toLowerCase().includes("category")),lt=x.findIndex(C=>(C||"").toLowerCase().includes("price")),Ie=at!==-1?te[at]:null,Fe=rt!==-1?te[rt]:null,Pe=nt!==-1?te[nt]:null,Vt=lt!==-1&&parseFloat(te[lt])||null;$.push({asin:pe,title:(Ie==null?void 0:Ie.toString())||null,image_url:(Fe==null?void 0:Fe.toString())||null,category:(Pe==null?void 0:Pe.toString())||null,price:Vt,rowNum:S+1})}else pe&&ee.push({value:pe,rowNum:S+1})}if($.length===0){P(`No valid ASINs found in the file. ${ee.length>0?`Found ${ee.length} invalid values.`:""}`);return}const I=[...new Map($.map(S=>[S.asin,S])).values()];me({fileName:a.name,totalRows:g.length-1,validAsins:I,invalidRows:ee,duplicatesRemoved:$.length-I.length}),Ge(!0),St(I.map(S=>S.asin))}catch(n){console.error("Parse error:",n),P("Failed to parse file. Please ensure it's a valid Excel or CSV file.")}},s.readAsArrayBuffer(a)},[]),{getRootProps:Ct,getInputProps:At,isDragActive:he}=Gt({onDrop:kt,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"],"text/csv":[".csv"]},maxFiles:1}),Tt=async()=>{var t;if((t=u==null?void 0:u.validAsins)!=null&&t.length){q(!0);try{const a=await y.getAuthToken(),r=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({action:"import",mode:Ne,asins:u.validAsins.map(n=>({asin:n.asin,title:n.title,image_url:n.image_url,category:n.category,price:n.price}))})})).json();r.success?(Ge(!1),me(null),oe(null),await f(),ye&&await We(!0)):P(r.error||"Import failed")}catch(a){console.error("Import error:",a),P("Failed to import ASINs. Please try again.")}finally{q(!1)}}},It=async t=>{if(confirm("Are you sure you want to delete this import?"))try{const a=await y.getAuthToken();(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({action:"delete",id:t})})).ok&&A(r=>r.filter(n=>n.id!==t))}catch(a){console.error("Delete error:",a)}},Xe=async t=>{const a=Date.now();Me(s=>{const r=new Set(s);return t.forEach(n=>r.add(n)),r}),Le(s=>{const r={...s};return t.forEach(n=>{r[n]=a}),r});try{const s=await y.getAuthToken(),n=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:"sync",ids:t})})).json();n.success?(A(o=>o.map(i=>t.includes(i.id)?{...i,status:"pending"}:i)),J(new Set)):alert(n.error||"Failed to queue for sync")}catch(s){console.error("Sync error:",s),alert("Failed to queue for sync")}finally{Me(s=>{const r=new Set(s);return t.forEach(n=>r.delete(n)),r}),setTimeout(()=>{Qe(s=>{const r={...s};return t.forEach(n=>{delete r[n]}),r}),Le(s=>{const r={...s};return t.forEach(n=>{delete r[n]}),r})},2e3)}},We=async(t=!0)=>{Ue(!0);const a=Date.now();qe(a),t&&R({message:"Fetching images from Keepa...",inProgress:!0,elapsed:0});try{const s=await y.getAuthToken(),n=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:"fetch_images",limit:100})})).json(),o=Math.floor((Date.now()-a)/1e3);if(n.success){const i=`Updated ${n.updated||0} images (${n.noImageAvailable||0} had no image available)`;R({message:i,inProgress:!1,updated:n.updated||0,noImageAvailable:n.noImageAvailable||0,batches:n.batches||0,tokensUsed:n.tokensUsed||0,elapsed:o}),await f(b)}else R({message:n.error||"Failed to fetch images",inProgress:!1,error:!0,elapsed:o})}catch(s){console.error("Fetch images error:",s);const r=Math.floor((Date.now()-a)/1e3);R({message:"Failed to fetch images from Keepa",inProgress:!1,error:!0,elapsed:r})}finally{Ue(!1),qe(null)}},Ft=async()=>{Oe(!0);try{const t=await y.getAuthToken(),s=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:"export"})})).json();if(s.success&&s.csv){const r=new Blob([s.csv],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(r),o=document.createElement("a"),i=new Date().toISOString().split("T")[0];o.href=n,o.download=`catalog-export-${i}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}else alert(s.error||"Failed to export catalog")}catch(t){console.error("Export error:",t),alert("Failed to export catalog")}finally{Oe(!1)}},Pt=async(t,a,s="US")=>{z({asin:a.asin,action:"accepting"});try{const r=await y.getAuthToken(),o=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({action:"create_task",import_id:t.id,source_asin:t.asin,target_asin:a.asin,marketplace:s})})).json();o.success?(X(i=>({...i,[a.asin]:"accepted"})),Ve(null)):alert(o.error||"Failed to create task")}catch(r){console.error("Create task error:",r),alert("Failed to create task")}finally{z(null)}},Et=async t=>{if(Z[t])return Z[t];Je(a=>new Set(a).add(t));try{const a=await y.getAuthToken(),r=await(await fetch(`/.netlify/functions/catalog-import?action=get_correlations&asin=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${a}`}})).json();return r.success&&r.correlations?(wt(n=>({...n,[t]:r.correlations})),r.correlations):(console.error("Failed to fetch correlations:",r.error),[])}catch(a){return console.error("Fetch correlations error:",a),[]}finally{Je(a=>{const s=new Set(a);return s.delete(t),s})}},$t=["US","CA","UK","DE"],_t=async(t,a)=>{z({asin:a.asin,action:"accepting"});try{const s=a.marketplaces||["US"],r=$t.filter(i=>s.includes(i)),n=await y.getAuthToken();let o=0;for(const i of r)try{(await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({action:"create_task",import_id:t.id,source_asin:t.asin,target_asin:a.asin,marketplace:i})})).json()).success&&o++}catch(d){console.error(`Failed to create task for ${i}:`,d)}o>0?X(i=>({...i,[a.asin]:"accepted"})):alert("Failed to create tasks")}catch(s){console.error("Accept correlation error:",s),alert("Failed to create tasks")}finally{z(null)}},Dt=async(t,a)=>{z({asin:a.asin,action:"declining"});try{const s=await y.getAuthToken();(await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:"decline_correlation",source_asin:t.asin,target_asin:a.asin})})).json()).success?X(o=>({...o,[a.asin]:"declined"})):X(o=>({...o,[a.asin]:"declined"}))}catch(s){console.error("Decline correlation error:",s),X(r=>({...r,[a.asin]:"declined"}))}finally{z(null)}},Ut=({marketplaces:t})=>{const a={US:{emoji:"ðŸ‡ºðŸ‡¸",label:"United States"},UK:{emoji:"ðŸ‡¬ðŸ‡§",label:"United Kingdom"},DE:{emoji:"ðŸ‡©ðŸ‡ª",label:"Germany"},FR:{emoji:"ðŸ‡«ðŸ‡·",label:"France"},IT:{emoji:"ðŸ‡®ðŸ‡¹",label:"Italy"},ES:{emoji:"ðŸ‡ªðŸ‡¸",label:"Spain"},CA:{emoji:"ðŸ‡¨ðŸ‡¦",label:"Canada"},JP:{emoji:"ðŸ‡¯ðŸ‡µ",label:"Japan"}};return!t||t.length===0?null:e.jsx("div",{className:"flex items-center gap-0.5",children:t.map(s=>{const r=a[s]||{emoji:"ðŸŒ",label:s};return e.jsx("span",{title:r.label,className:"text-sm",children:r.emoji},s)})})},Ye=(t,a)=>{pt(s=>{const r=new Set(s);return r.has(t)?r.delete(t):(r.add(t),a&&!Z[a]&&!de.has(a)&&Et(a)),r})},Ot=t=>{J(a=>{const s=new Set(a);return s.has(t)?s.delete(t):s.add(t),s})},Rt=()=>{const t=xe.filter(s=>{var r;return(r=_[s.status])==null?void 0:r.canSync}).map(s=>s.id),a=t.every(s=>T.has(s));J(a?s=>{const r=new Set(s);return t.forEach(n=>r.delete(n)),r}:s=>{const r=new Set(s);return t.forEach(n=>r.add(n)),r})},zt=async()=>{if(T.size===0)return;const t=Array.from(T),a=t.length;if(a===1){await Xe(t);return}ce.current=!1,N({current:0,total:a,currentAsin:null,startTime:Date.now(),elapsed:0,cancelled:!1});try{const s=await y.getAuthToken();for(let r=0;r<t.length;r++){if(ce.current){N(i=>i?{...i,cancelled:!0}:null);break}const n=t[r],o=h.find(i=>i.id===n);N(i=>i?{...i,current:r+1,currentAsin:(o==null?void 0:o.asin)||"Unknown",elapsed:Math.floor((Date.now()-i.startTime)/1e3)}:null);try{(await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({action:"sync",ids:[n]})})).json()).success&&A(g=>g.map(x=>x.id===n?{...x,status:"pending"}:x))}catch(i){console.error(`Sync error for item ${n}:`,i)}}J(new Set)}catch(s){console.error("Batch sync error:",s)}finally{setTimeout(()=>{N(null)},2e3)}},Mt=async()=>{const t=h.filter(o=>o.status==="imported").length,a=h.filter(o=>o.status==="error").length,s=t+a,r=O>s?O:s;if(r===0){alert("No items available to sync.");return}if(confirm(`Queue all ${r} imported items for sync?

This will find correlations for all items with "Imported" or "Error" status.`)){Re(!0),ce.current=!1,N({current:0,total:r,currentAsin:"Queuing all items...",startTime:Date.now(),elapsed:0,cancelled:!1,isSyncAll:!0});try{const o=await y.getAuthToken(),d=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({action:"sync_all"})})).json(),g=Math.floor((Date.now()-(c==null?void 0:c.startTime))/1e3);d.success?(N(x=>x?{...x,current:d.queued||r,currentAsin:"Complete!",elapsed:g,complete:!0}:null),await f(b)):N(x=>x?{...x,error:d.error||"Failed to queue items for sync",elapsed:g}:null)}catch(o){console.error("Sync all error:",o),N(i=>i?{...i,error:"Failed to sync all items"}:null)}finally{Re(!1),setTimeout(()=>{N(null)},3e3)}}},[Ce,et]=l.useState(null),[Bt,Ae]=l.useState(0);l.useEffect(()=>{if(!Ce)return;const t=setInterval(()=>{Ae(Math.floor((Date.now()-Ce)/1e3))},1e3);return()=>clearInterval(t)},[Ce]);const Lt=async()=>{ze(!0),et(Date.now()),Ae(0);try{const t=await y.getAuthToken(),s=await(await fetch("/.netlify/functions/catalog-import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({action:"process_pending",limit:5})})).json();s.success?(alert(`âœ… ${s.message}`),await f(b)):alert(s.error||"Failed to process queue")}catch(t){console.error("Process queue error:",t),alert("Failed to process queue")}finally{ze(!1),et(null),Ae(0)}},xe=h.filter(t=>!(U!=="all"&&t.status!==U)),ue=xe.filter(t=>{var a;return(a=_[t.status])==null?void 0:a.canSync}),tt=ue.length>0&&ue.every(t=>T.has(t.id)),Qt=ue.some(t=>T.has(t.id)),qt=t=>{const[a,s]=t.split(":");bt(a),yt(s),re(1),f(1,a,s,ae)},Jt=[{value:"created_at:desc",label:"Date (newest)"},{value:"created_at:asc",label:"Date (oldest)"},{value:"status:asc",label:"Status"},{value:"title:asc",label:"Title (A-Z)"},{value:"asin:asc",label:"ASIN"}],Te={all:h.length,imported:h.filter(t=>t.status==="imported").length,pending:h.filter(t=>t.status==="pending").length,processing:h.filter(t=>t.status==="processing").length,processed:h.filter(t=>t.status==="processed").length,error:h.filter(t=>t.status==="error").length},Kt=({status:t})=>{const a=_[t]||_.pending,s=a.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${a.bgClass} ${a.textClass}`,children:[e.jsx(s,{className:`w-3.5 h-3.5 ${a.animated?"animate-spin":""}`}),a.label]})};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-theme-primary flex items-center gap-3",children:"ðŸ“¥ Catalog Import"}),e.jsx("p",{className:"text-theme-secondary mt-1",children:"Import your Amazon Influencer ASINs and find correlations"})]}),e.jsx("button",{onClick:f,disabled:L,className:"p-2 text-theme-secondary hover:text-accent transition-colors",title:"Refresh",children:e.jsx(M,{className:`w-5 h-5 ${L?"animate-spin":""}`})})]}),He&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-theme-surface rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme",children:[e.jsxs("h2",{className:"text-lg font-semibold text-theme-primary flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-accent"}),"Import ASINs from File"]}),e.jsx("button",{onClick:()=>{Se(!1),me(null),P(null),oe(null),ne("skip")},className:"p-1 rounded-lg text-theme-tertiary hover:text-theme-primary hover:bg-theme-hover transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{...Ct(),className:`
                  border-2 border-dashed rounded-xl p-8 text-center cursor-pointer
                  transition-all duration-200
                  ${he?"border-accent bg-accent/5 scale-[1.02]":"border-theme hover:border-accent/50 hover:bg-theme-hover"}
                `,children:[e.jsx("input",{...At()}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`
                    w-16 h-16 rounded-full flex items-center justify-center mb-4
                    ${he?"bg-accent/20":"bg-theme-primary"}
                  `,children:he?e.jsx(fe,{className:"w-8 h-8 text-accent"}):e.jsx(Ee,{className:"w-8 h-8 text-theme-tertiary"})}),e.jsx("p",{className:"text-theme-primary font-medium mb-1",children:he?"Drop your file here":"Drop Excel/CSV file here"}),e.jsx("p",{className:"text-sm text-theme-secondary",children:"or click to browse â€¢ Supports .xlsx, .xls, .csv"})]})]}),W&&e.jsxs("div",{className:"mt-3 p-3 bg-error/10 border border-error/30 rounded-lg flex items-center gap-2 text-error text-sm",children:[e.jsx(B,{className:"w-4 h-4 flex-shrink-0"}),W]}),u&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"bg-theme-primary rounded-lg p-4 mb-4",children:[e.jsxs("h3",{className:"font-medium text-theme-primary mb-2 flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-accent"}),u.fileName]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("div",{className:"text-theme-secondary",children:"Total rows:"}),e.jsx("div",{className:"text-theme-primary",children:u.totalRows}),e.jsx("div",{className:"text-theme-secondary",children:"Valid ASINs:"}),e.jsx("div",{className:"text-success font-medium",children:u.validAsins.length}),u.duplicatesRemoved>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-theme-secondary",children:"Duplicates removed:"}),e.jsx("div",{className:"text-warning",children:u.duplicatesRemoved})]}),u.invalidRows.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-theme-secondary",children:"Invalid rows:"}),e.jsx("div",{className:"text-error",children:u.invalidRows.length})]})]})]}),le&&le.existingCount>0&&e.jsxs("div",{className:"mb-4 p-3 bg-warning/10 border border-warning/30 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-theme-primary mb-2 font-medium",children:["ðŸ“‹ ",le.newCount," new ASINs, ",le.existingCount," already exist"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mergeMode",value:"skip",checked:Ne==="skip",onChange:()=>ne("skip"),className:"w-4 h-4 text-accent focus:ring-accent"}),e.jsx("span",{className:"text-sm text-theme-secondary",children:"Skip existing (import only new)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mergeMode",value:"merge",checked:Ne==="merge",onChange:()=>ne("merge"),className:"w-4 h-4 text-accent focus:ring-accent"}),e.jsx("span",{className:"text-sm text-theme-secondary",children:"Update existing (merge data)"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-theme-secondary mb-2",children:"Sample ASINs to import:"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[u.validAsins.slice(0,8).map(t=>e.jsx("span",{className:"px-2 py-1 bg-theme-primary rounded text-xs font-mono text-accent",children:t.asin},t.asin)),u.validAsins.length>8&&e.jsxs("span",{className:"px-2 py-1 bg-theme-primary rounded text-xs text-theme-secondary",children:["+",u.validAsins.length-8," more"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:ye,onChange:t=>jt(t.target.checked),className:"w-4 h-4 text-orange-500 focus:ring-orange-500 rounded"}),e.jsx("span",{className:"text-sm text-theme-secondary",children:"Fetch images from Keepa after import"})]})}),e.jsx("button",{onClick:async()=>{await Tt(),W||Se(!1)},disabled:Q||H,className:"w-full py-3 bg-accent hover:bg-accent-hover disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):H?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 animate-spin"}),"Fetching images..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-4 h-4"}),"Import ",u.validAsins.length," ASINs",ye&&" + Fetch Images"]})})]}),!u&&e.jsxs("div",{className:"mt-4 p-3 bg-theme-primary rounded-lg",children:[e.jsxs("p",{className:"text-sm text-theme-secondary",children:[e.jsx("strong",{className:"text-theme-primary",children:"Required column:"})," ASIN (e.g., B01N9SPQHQ)"]}),e.jsxs("p",{className:"text-sm text-theme-secondary mt-1",children:[e.jsx("strong",{className:"text-theme-primary",children:"Optional:"})," Product Title, Category, Price"]})]})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-theme-surface rounded-xl shadow-2xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-theme",children:[e.jsx("h2",{className:"text-lg font-semibold text-theme-primary flex items-center gap-2",children:"ðŸŒ Select Marketplace"}),e.jsx("button",{onClick:()=>Ve(null),className:"p-1 rounded-lg text-theme-tertiary hover:text-theme-primary hover:bg-theme-hover transition-colors",children:e.jsx(ge,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-theme-secondary mb-4",children:"Select the marketplace to create a task for:"}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-theme-primary rounded-lg mb-4",children:[w.correlation.image_url?e.jsx("img",{src:w.correlation.image_url,alt:"",className:"w-12 h-12 object-contain bg-white rounded"}):e.jsx("div",{className:"w-12 h-12 bg-theme-surface rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ“¦"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-theme-primary truncate",children:w.correlation.correlated_title||w.correlation.title||"Unknown"}),e.jsx("p",{className:"text-xs font-mono text-accent",children:w.correlation.asin})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(()=>{const t=[{code:"US",emoji:"ðŸ‡ºðŸ‡¸",label:"United States"},{code:"CA",emoji:"ðŸ‡¨ðŸ‡¦",label:"Canada"},{code:"UK",emoji:"ðŸ‡¬ðŸ‡§",label:"United Kingdom"},{code:"DE",emoji:"ðŸ‡©ðŸ‡ª",label:"Germany"}],a=w.correlation.marketplaces||["US"];return t.map(s=>{const r=a.includes(s.code);return e.jsxs("button",{onClick:()=>Pt(w.importItem,w.correlation,s.code),disabled:!r||j,className:`p-3 rounded-lg border transition-all flex items-center gap-2 ${r?"border-theme hover:border-accent hover:bg-accent/5 cursor-pointer":"border-theme/50 bg-theme-primary/50 opacity-50 cursor-not-allowed"}`,children:[e.jsx("span",{className:"text-xl",children:s.emoji}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-theme-primary",children:s.code}),e.jsx("p",{className:"text-xs text-theme-secondary",children:s.label})]}),j&&j.asin===w.correlation.asin&&e.jsx(p,{className:"w-4 h-4 animate-spin ml-auto text-accent"})]},s.code)})})()}),e.jsx("p",{className:"text-xs text-theme-tertiary mt-3 text-center",children:"Only available marketplaces are clickable"})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-theme-surface rounded-xl shadow-2xl max-w-md w-full",children:e.jsx("div",{className:"p-6 text-center",children:m.inProgress?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-12 h-12 animate-spin mx-auto mb-4 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:"Fetching Images"}),e.jsx("p",{className:"text-theme-secondary",children:m.message}),m.elapsed>0&&e.jsxs("p",{className:"text-sm text-theme-tertiary mt-2",children:["Elapsed: ",m.elapsed,"s"]})]}):e.jsxs(e.Fragment,{children:[m.error?e.jsx(B,{className:"w-12 h-12 mx-auto mb-4 text-error"}):e.jsx(se,{className:"w-12 h-12 mx-auto mb-4 text-success"}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary mb-2",children:m.error?"Fetch Failed":"Fetch Complete"}),e.jsx("p",{className:"text-theme-secondary mb-4",children:m.message}),!m.error&&m.batches>0&&e.jsxs("div",{className:"text-sm text-theme-tertiary",children:["Processed in ",m.batches," batch",m.batches!==1?"es":""," â€¢ ",m.tokensUsed," Keepa tokens used",m.elapsed>0&&` â€¢ ${m.elapsed}s`]}),e.jsx("button",{onClick:()=>R(null),className:"mt-4 px-6 py-2 bg-accent hover:bg-accent-hover text-white font-medium rounded-lg transition-colors",children:"Close"})]})})})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-theme-surface rounded-xl shadow-2xl max-w-md w-full",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[c.complete?e.jsx(se,{className:"w-12 h-12 mx-auto mb-3 text-success"}):c.error?e.jsx(B,{className:"w-12 h-12 mx-auto mb-3 text-error"}):c.cancelled?e.jsx(B,{className:"w-12 h-12 mx-auto mb-3 text-warning"}):e.jsx(p,{className:"w-12 h-12 animate-spin mx-auto mb-3 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-theme-primary",children:c.complete?"Sync Complete!":c.error?"Sync Failed":c.cancelled?"Sync Cancelled":c.isSyncAll?"Syncing All Items":"Syncing Selected Items"})]}),!c.error&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-theme-secondary mb-1",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[c.current," of ",c.total]})]}),e.jsx("div",{className:"w-full bg-theme-primary rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${c.complete?"bg-success":c.cancelled?"bg-warning":"bg-orange-500"}`,style:{width:`${Math.round(c.current/c.total*100)}%`}})})]}),c.currentAsin&&!c.error&&e.jsxs("div",{className:"mb-4 p-3 bg-theme-primary rounded-lg",children:[e.jsx("p",{className:"text-sm text-theme-secondary",children:c.complete?"Completed:":"Currently processing:"}),e.jsx("p",{className:"font-mono text-accent text-sm",children:c.currentAsin})]}),c.error&&e.jsx("div",{className:"mb-4 p-3 bg-error/10 border border-error/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-error",children:c.error})}),e.jsx("div",{className:"text-center text-sm text-theme-tertiary mb-4",children:c.elapsed>0&&e.jsxs("span",{children:["Elapsed: ",c.elapsed,"s"]})}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[!c.complete&&!c.error&&!c.cancelled&&!c.isSyncAll&&e.jsx("button",{onClick:()=>{ce.current=!0},className:"px-4 py-2 bg-theme-primary border border-theme hover:bg-error/10 hover:border-error/30 hover:text-error text-theme-secondary font-medium rounded-lg transition-colors",children:"Cancel"}),(c.complete||c.error||c.cancelled)&&e.jsx("button",{onClick:()=>N(null),className:"px-6 py-2 bg-accent hover:bg-accent-hover text-white font-medium rounded-lg transition-colors",children:"Close"})]})]})})}),e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>Se(!0),className:"px-4 py-2.5 bg-accent hover:bg-accent-hover text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4"}),"Import from File"]}),e.jsxs("button",{onClick:()=>We(!0),disabled:H,className:"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[H?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(M,{className:"w-4 h-4"}),H?`Fetching... ${(m==null?void 0:m.elapsed)||0}s`:"Fetch Images from Keepa"]}),e.jsxs("button",{onClick:Ft,disabled:je||O===0,className:"px-4 py-2.5 bg-theme-surface border border-theme hover:bg-theme-hover disabled:opacity-50 text-theme-primary font-medium rounded-lg transition-colors flex items-center gap-2",children:[je?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(Wt,{className:"w-4 h-4"}),je?"Exporting...":"Export CSV"]}),e.jsxs("button",{onClick:Mt,disabled:we||O===0||c!==null,className:"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[we?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(M,{className:"w-4 h-4"}),we?`Queuing... ${(c==null?void 0:c.elapsed)||0}s`:"Sync All"]}),Te.pending>0&&e.jsxs("button",{onClick:Lt,disabled:ve,className:"px-4 py-2.5 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[ve?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(M,{className:"w-4 h-4"}),ve?`Processing... ${Bt}s`:`Process Queue (${Te.pending})`]}),T.size>0&&e.jsxs("button",{onClick:zt,disabled:c!==null,className:"px-4 py-2.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[c&&!c.isSyncAll?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(M,{className:"w-4 h-4"}),"Sync Selected (",T.size,")"]}),W&&!He&&e.jsxs("div",{className:"w-full mt-3 p-3 bg-error/10 border border-error/30 rounded-lg flex items-center gap-2 text-error text-sm",children:[e.jsx(B,{className:"w-4 h-4 flex-shrink-0"}),W]})]}),h.length>0&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ot,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-theme-tertiary"}),e.jsx("input",{type:"text",placeholder:"Search by ASIN or title...",value:k,onChange:t=>_e(t.target.value),className:"w-full pl-10 pr-10 py-2 bg-theme-surface border border-theme rounded-lg text-theme-primary placeholder-theme-tertiary focus:outline-none focus:border-accent"}),k&&e.jsx("button",{onClick:()=>{_e(""),De(""),re(1),f(1,V,G,"")},className:"absolute right-3 top-1/2 -translate-y-1/2 text-theme-tertiary hover:text-theme-primary",children:e.jsx(ge,{className:"w-4 h-4"})})]}),e.jsx("select",{value:`${V}:${G}`,onChange:t=>qt(t.target.value),className:"px-3 py-2 bg-theme-surface border border-theme rounded-lg text-theme-primary focus:outline-none focus:border-accent cursor-pointer",children:Jt.map(t=>e.jsxs("option",{value:t.value,children:["Sort: ",t.label]},t.value))}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","imported","pending","processing","processed","error"].map(t=>{var a;return e.jsxs("button",{onClick:()=>xt(t),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1.5 ${U===t?"bg-accent text-white":"bg-theme-surface border border-theme text-theme-secondary hover:text-theme-primary"}`,children:[t!=="all"&&e.jsx("span",{children:(a=_[t])==null?void 0:a.emoji}),e.jsx("span",{className:"capitalize",children:t}),e.jsxs("span",{className:"text-xs opacity-70",children:["(",Te[t],")"]})]},t)})})]}),L&&h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-8 h-8 animate-spin mx-auto mb-3 text-accent"}),e.jsx("p",{className:"text-theme-secondary",children:"Loading imports..."})]}):xe.length===0?e.jsxs("div",{className:"text-center py-12 bg-theme-surface rounded-lg border border-theme",children:[e.jsx("div",{className:"w-16 h-16 bg-theme-primary rounded-full flex items-center justify-center mx-auto mb-4",children:k||U!=="all"?e.jsx(ot,{className:"w-8 h-8 text-theme-tertiary"}):e.jsx(fe,{className:"w-8 h-8 text-theme-tertiary"})}),e.jsx("h3",{className:"text-lg font-medium text-theme-primary mb-1",children:k||U!=="all"?"No matches found":"No imports yet"}),e.jsx("p",{className:"text-theme-secondary",children:k||U!=="all"?"Try adjusting your search or filters":"Upload an Excel file with your ASINs to get started"})]}):e.jsxs("div",{className:"bg-theme-surface rounded-lg border border-theme overflow-hidden",children:[e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-12 gap-4 px-4 py-3 bg-theme-primary border-b border-theme text-sm font-medium text-theme-secondary",children:[e.jsx("div",{className:"col-span-1 flex items-center gap-2",children:ue.length>0&&e.jsx("button",{onClick:Rt,className:"p-1 text-theme-tertiary hover:text-accent transition-colors",title:tt?"Deselect all":"Select all syncable",children:tt?e.jsx($e,{className:"w-5 h-5 text-accent"}):Qt?e.jsx($e,{className:"w-5 h-5 text-theme-tertiary"}):e.jsx(mt,{className:"w-5 h-5"})})}),e.jsx("div",{className:"col-span-1",children:"Image"}),e.jsx("div",{className:"col-span-3",children:"Title"}),e.jsx("div",{className:"col-span-2",children:"ASIN"}),e.jsx("div",{className:"col-span-2",children:"Status"}),e.jsx("div",{className:"col-span-2",children:"Correlations"}),e.jsx("div",{className:"col-span-1",children:"Actions"})]}),e.jsx("div",{className:"divide-y divide-theme",children:xe.map(t=>{var n;const a=ut.has(t.id),s=((n=t.correlations)==null?void 0:n.length)||0,r=_[t.status]||_.pending;return e.jsxs("div",{children:[e.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-12 gap-4 px-4 py-3 items-center hover:bg-theme-hover transition-colors ${a?"bg-theme-hover":""}`,children:[e.jsxs("div",{className:"col-span-1 hidden sm:flex items-center gap-1",children:[r.canSync?e.jsx("button",{onClick:()=>Ot(t.id),className:"p-1 text-theme-tertiary hover:text-accent transition-colors",children:T.has(t.id)?e.jsx($e,{className:"w-5 h-5 text-accent"}):e.jsx(mt,{className:"w-5 h-5"})}):e.jsx("div",{className:"w-7"}),s>0&&e.jsx("button",{onClick:()=>Ye(t.id,t.asin),className:"p-1 text-theme-tertiary hover:text-theme-primary hover:bg-theme-primary rounded transition-colors",children:a?e.jsx(ct,{className:"w-4 h-4"}):e.jsx(it,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"col-span-1 flex justify-center sm:justify-start",children:t.image_url?e.jsx("img",{src:t.image_url,alt:t.title||t.asin,className:"w-12 h-12 object-contain bg-white rounded"}):e.jsx("div",{className:"w-12 h-12 bg-theme-primary rounded flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“¦"})})}),e.jsx("div",{className:"col-span-3",children:e.jsx("p",{className:"text-theme-primary line-clamp-2 text-sm",children:t.title||"Title pending..."})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("a",{href:`https://www.amazon.com/dp/${t.asin}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-sm text-accent hover:underline flex items-center gap-1",children:[t.asin,e.jsx(dt,{className:"w-3 h-3"})]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(Kt,{status:t.status}),t.error_message&&e.jsx("p",{className:"text-xs text-error mt-1 truncate",title:t.error_message,children:t.error_message})]}),e.jsx("div",{className:"col-span-2",children:(()=>{const o=t.correlation_count??s;return t.status==="processed"||o>0?e.jsx("button",{onClick:()=>Ye(t.id,t.asin),className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-colors ${o>0?"bg-accent/10 text-accent hover:bg-accent/20 cursor-pointer":"bg-theme-primary text-theme-tertiary"}`,children:o>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold",children:o}),e.jsxs("span",{children:["correlation",o!==1?"s":""]}),!a&&e.jsx(it,{className:"w-3 h-3"}),a&&e.jsx(ct,{className:"w-3 h-3"})]}):e.jsx("span",{children:"â€”"})}):e.jsx("span",{className:"text-sm text-theme-tertiary",children:"â€”"})})()}),e.jsxs("div",{className:"col-span-1 flex justify-end gap-2",children:[(t.status==="imported"||t.status==="error")&&e.jsx("button",{onClick:()=>Xe([t.id]),disabled:F.has(t.id),className:"px-3 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:bg-orange-400 text-white text-xs font-medium rounded-lg transition-colors flex items-center gap-1 min-w-[80px] justify-center",title:"Find Correlations",children:F.has(t.id)?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-3 h-3 animate-spin"}),e.jsxs("span",{children:[Nt[t.id]||0,"s"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{children:"Sync"})]})}),e.jsx("button",{onClick:()=>It(t.id),disabled:F.has(t.id),className:"p-2 text-theme-tertiary hover:text-error hover:bg-error/10 disabled:opacity-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(Yt,{className:"w-4 h-4"})})]})]}),a&&e.jsx("div",{className:"px-4 pb-4 bg-theme-primary",children:e.jsxs("div",{className:"ml-6 sm:ml-12 border-l-2 border-accent/30 pl-4 space-y-3",children:[e.jsxs("div",{className:"text-xs font-medium text-theme-secondary py-2 flex items-center gap-2",children:["Related Products",de.has(t.asin)&&e.jsx(p,{className:"w-3 h-3 animate-spin text-accent"})]}),de.has(t.asin)&&!Z[t.asin]&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-theme-surface rounded-lg border border-theme",children:[e.jsx(p,{className:"w-5 h-5 animate-spin text-accent"}),e.jsx("span",{className:"text-sm text-theme-secondary",children:"Loading correlations..."})]}),(()=>{const i=(Z[t.asin]||t.correlations||[]).filter(d=>Ke[d.asin]!=="declined");return i.length===0&&!de.has(t.asin)?e.jsx("div",{className:"p-4 bg-theme-surface rounded-lg border border-theme text-center",children:e.jsx("span",{className:"text-sm text-theme-tertiary",children:"No correlations found"})}):i.map((d,g)=>{const x=Ke[d.asin],v=(j==null?void 0:j.asin)===d.asin;return e.jsx("div",{className:`p-4 bg-theme-surface rounded-lg border transition-all ${x==="accepted"?"border-green-500/50 bg-green-50/5":"border-theme hover:border-accent/30"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[d.image_url?e.jsx("img",{src:d.image_url,alt:d.correlated_title||d.title||d.asin,className:"w-16 h-16 object-contain bg-white rounded-lg flex-shrink-0 border border-theme"}):e.jsx("div",{className:"w-16 h-16 bg-theme-primary rounded-lg flex items-center justify-center flex-shrink-0 border border-theme",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“¦"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-theme-primary font-medium line-clamp-2 mb-2",children:d.correlated_title||d.title||"Unknown Title"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("a",{href:`https://www.amazon.com/dp/${d.asin}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-xs text-accent hover:underline flex items-center gap-1",children:[d.asin,e.jsx(dt,{className:"w-3 h-3"})]}),d.type&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${d.type==="variation"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}`,children:d.type}),d.marketplaces&&d.marketplaces.length>0&&e.jsx(Ut,{marketplaces:d.marketplaces})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:x==="accepted"?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:[e.jsx(se,{className:"w-3.5 h-3.5"}),"Accepted"]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>_t(t,d),disabled:v,className:"px-3 py-1.5 text-xs bg-green-500 hover:bg-green-600 disabled:bg-green-300 text-white rounded-lg transition-colors flex items-center gap-1.5 font-medium",children:[v&&(j==null?void 0:j.action)==="accepting"?e.jsx(p,{className:"w-3 h-3 animate-spin"}):e.jsx(se,{className:"w-3.5 h-3.5"}),"Accept"]}),e.jsxs("button",{onClick:()=>Dt(t,d),disabled:v,className:"px-3 py-1.5 text-xs bg-theme-primary hover:bg-red-100 dark:hover:bg-red-900/20 text-theme-secondary hover:text-red-600 dark:hover:text-red-400 rounded-lg transition-colors flex items-center gap-1.5 border border-theme",children:[v&&(j==null?void 0:j.action)==="declining"?e.jsx(p,{className:"w-3 h-3 animate-spin"}):e.jsx(ge,{className:"w-3.5 h-3.5"}),"Decline"]})]})})]})},d.asin||g)})})()]})})]},t.id)})})]}),K>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-theme-secondary",children:["Showing ",(b-1)*be+1," - ",Math.min(b*be,O)," of ",O," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(1),disabled:b===1,className:"px-3 py-1.5 text-sm border border-theme rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-theme-hover transition-colors",children:"First"}),e.jsx("button",{onClick:()=>f(b-1),disabled:b===1,className:"px-3 py-1.5 text-sm border border-theme rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-theme-hover transition-colors",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1.5 text-sm text-theme-primary",children:["Page ",b," of ",K]}),e.jsx("button",{onClick:()=>f(b+1),disabled:b===K,className:"px-3 py-1.5 text-sm border border-theme rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-theme-hover transition-colors",children:"Next"}),e.jsx("button",{onClick:()=>f(K),disabled:b===K,className:"px-3 py-1.5 text-sm border border-theme rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-theme-hover transition-colors",children:"Last"})]})]}),h.some(t=>t.status==="pending"||t.status==="processing")&&e.jsxs("div",{className:"mt-4 text-center text-sm text-theme-tertiary flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-accent rounded-full animate-pulse"}),"Auto-refreshing every 12 seconds"]})]})}export{Ss as default};
//# sourceMappingURL=CatalogImport-54c97d59.js.map
